bd157658e8c4b4140563f7f37d8fbd99
"use strict";

// Mock Sentry and Analytics
_getJestObj().mock("../lib/sentry.js", () => ({
  captureMessage: jest.fn()
}));
_getJestObj().mock("../lib/analytics.js", () => ({
  trackEvent: jest.fn(),
  Events: {
    FEEDBACK_SUBMITTED: "feedback_submitted"
  }
}));
var _react = _interopRequireDefault(require("react"));
var _react2 = require("@testing-library/react");
require("@testing-library/jest-dom");
var _FeedbackButton = _interopRequireDefault(require("./FeedbackButton.jsx"));
var _jsxRuntime = require("react/jsx-runtime");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
} // src/components/FeedbackButton.test.jsx
describe("FeedbackButton Component", () => {
  beforeEach(() => {
    global.fetch = jest.fn(() => Promise.resolve({
      ok: true,
      json: () => Promise.resolve({
        ok: true
      })
    }));
  });
  afterEach(() => {
    jest.clearAllMocks();
  });
  test("renders feedback button", () => {
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_FeedbackButton.default, {}));
    const button = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    expect(button).toBeInTheDocument();
  });
  test("opens feedback form when button is clicked", () => {
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_FeedbackButton.default, {}));
    const button = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    _react2.fireEvent.click(button);
    expect(_react2.screen.getByText(/enviar feedback/i)).toBeInTheDocument();
  });
  test("closes form when close button is clicked", () => {
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_FeedbackButton.default, {}));
    const openButton = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    _react2.fireEvent.click(openButton);
    const closeButton = _react2.screen.getByRole("button", {
      name: /fechar/i
    });
    _react2.fireEvent.click(closeButton);
    expect(_react2.screen.queryByText(/enviar feedback/i)).not.toBeInTheDocument();
  });
  test("submits feedback successfully", async () => {
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_FeedbackButton.default, {}));
    const openButton = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    _react2.fireEvent.click(openButton);
    const textarea = _react2.screen.getByPlaceholderText(/descreva o problema/i);
    _react2.fireEvent.change(textarea, {
      target: {
        value: "Test feedback"
      }
    });
    const submitButton = _react2.screen.getByRole("button", {
      name: /enviar feedback/i
    });
    _react2.fireEvent.click(submitButton);
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText(/feedback enviado/i)).toBeInTheDocument();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJjYXB0dXJlTWVzc2FnZSIsImplc3QiLCJmbiIsInRyYWNrRXZlbnQiLCJFdmVudHMiLCJGRUVEQkFDS19TVUJNSVRURUQiLCJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdDIiLCJfRmVlZGJhY2tCdXR0b24iLCJfanN4UnVudGltZSIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImdsb2JhbCIsImZldGNoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvayIsImpzb24iLCJhZnRlckVhY2giLCJjbGVhckFsbE1vY2tzIiwidGVzdCIsInJlbmRlciIsImpzeCIsImJ1dHRvbiIsInNjcmVlbiIsImdldEJ5Um9sZSIsIm5hbWUiLCJleHBlY3QiLCJ0b0JlSW5UaGVEb2N1bWVudCIsImZpcmVFdmVudCIsImNsaWNrIiwiZ2V0QnlUZXh0Iiwib3BlbkJ1dHRvbiIsImNsb3NlQnV0dG9uIiwicXVlcnlCeVRleHQiLCJub3QiLCJ0ZXh0YXJlYSIsImdldEJ5UGxhY2Vob2xkZXJUZXh0IiwiY2hhbmdlIiwidGFyZ2V0IiwidmFsdWUiLCJzdWJtaXRCdXR0b24iLCJ3YWl0Rm9yIl0sInNvdXJjZXMiOlsiRmVlZGJhY2tCdXR0b24udGVzdC5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2NvbXBvbmVudHMvRmVlZGJhY2tCdXR0b24udGVzdC5qc3hcbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IgfSBmcm9tIFwiQHRlc3RpbmctbGlicmFyeS9yZWFjdFwiO1xuaW1wb3J0IFwiQHRlc3RpbmctbGlicmFyeS9qZXN0LWRvbVwiO1xuaW1wb3J0IEZlZWRiYWNrQnV0dG9uIGZyb20gXCIuL0ZlZWRiYWNrQnV0dG9uLmpzeFwiO1xuXG4vLyBNb2NrIFNlbnRyeSBhbmQgQW5hbHl0aWNzXG5qZXN0Lm1vY2soXCIuLi9saWIvc2VudHJ5LmpzXCIsICgpID0+ICh7XG4gIGNhcHR1cmVNZXNzYWdlOiBqZXN0LmZuKCksXG59KSk7XG5cbmplc3QubW9jayhcIi4uL2xpYi9hbmFseXRpY3MuanNcIiwgKCkgPT4gKHtcbiAgdHJhY2tFdmVudDogamVzdC5mbigpLFxuICBFdmVudHM6IHsgRkVFREJBQ0tfU1VCTUlUVEVEOiBcImZlZWRiYWNrX3N1Ym1pdHRlZFwiIH0sXG59KSk7XG5cbmRlc2NyaWJlKFwiRmVlZGJhY2tCdXR0b24gQ29tcG9uZW50XCIsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgZ2xvYmFsLmZldGNoID0gamVzdC5mbigoKSA9PlxuICAgICAgUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IG9rOiB0cnVlIH0pLFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICB0ZXN0KFwicmVuZGVycyBmZWVkYmFjayBidXR0b25cIiwgKCkgPT4ge1xuICAgIHJlbmRlcig8RmVlZGJhY2tCdXR0b24gLz4pO1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoXCJidXR0b25cIiwgeyBuYW1lOiAvZmVlZGJhY2svaSB9KTtcbiAgICBleHBlY3QoYnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICB0ZXN0KFwib3BlbnMgZmVlZGJhY2sgZm9ybSB3aGVuIGJ1dHRvbiBpcyBjbGlja2VkXCIsICgpID0+IHtcbiAgICByZW5kZXIoPEZlZWRiYWNrQnV0dG9uIC8+KTtcbiAgICBjb25zdCBidXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKFwiYnV0dG9uXCIsIHsgbmFtZTogL2ZlZWRiYWNrL2kgfSk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKGJ1dHRvbik7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvZW52aWFyIGZlZWRiYWNrL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICB9KTtcblxuICB0ZXN0KFwiY2xvc2VzIGZvcm0gd2hlbiBjbG9zZSBidXR0b24gaXMgY2xpY2tlZFwiLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxGZWVkYmFja0J1dHRvbiAvPik7XG4gICAgY29uc3Qgb3BlbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoXCJidXR0b25cIiwgeyBuYW1lOiAvZmVlZGJhY2svaSB9KTtcbiAgICBmaXJlRXZlbnQuY2xpY2sob3BlbkJ1dHRvbik7XG5cbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoXCJidXR0b25cIiwgeyBuYW1lOiAvZmVjaGFyL2kgfSk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKGNsb3NlQnV0dG9uKTtcblxuICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoL2VudmlhciBmZWVkYmFjay9pKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIHRlc3QoXCJzdWJtaXRzIGZlZWRiYWNrIHN1Y2Nlc3NmdWxseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgcmVuZGVyKDxGZWVkYmFja0J1dHRvbiAvPik7XG4gICAgY29uc3Qgb3BlbkJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoXCJidXR0b25cIiwgeyBuYW1lOiAvZmVlZGJhY2svaSB9KTtcbiAgICBmaXJlRXZlbnQuY2xpY2sob3BlbkJ1dHRvbik7XG5cbiAgICBjb25zdCB0ZXh0YXJlYSA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgvZGVzY3JldmEgbyBwcm9ibGVtYS9pKTtcbiAgICBmaXJlRXZlbnQuY2hhbmdlKHRleHRhcmVhLCB7IHRhcmdldDogeyB2YWx1ZTogXCJUZXN0IGZlZWRiYWNrXCIgfSB9KTtcblxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoXCJidXR0b25cIiwgeyBuYW1lOiAvZW52aWFyIGZlZWRiYWNrL2kgfSk7XG4gICAgZmlyZUV2ZW50LmNsaWNrKHN1Ym1pdEJ1dHRvbik7XG5cbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9mZWVkYmFjayBlbnZpYWRvL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQU1BO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLGtCQUFrQixFQUFFLE9BQU87RUFDbkNDLGNBQWMsRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUM7QUFDMUIsQ0FBQyxDQUFDLENBQUM7QUFFSEosV0FBQSxHQUFLQyxJQUFJLENBQUMscUJBQXFCLEVBQUUsT0FBTztFQUN0Q0ksVUFBVSxFQUFFRixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0VBQ3JCRSxNQUFNLEVBQUU7SUFBRUMsa0JBQWtCLEVBQUU7RUFBcUI7QUFDckQsQ0FBQyxDQUFDLENBQUM7QUFiSCxJQUFBQyxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFDQUEsT0FBQTtBQUNBLElBQUFFLGVBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUFrRCxJQUFBRyxXQUFBLEdBQUFILE9BQUE7QUFBQSxTQUFBRCx1QkFBQUssQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUFBLFNBQUFkLFlBQUE7RUFBQTtJQUFBRztFQUFBLElBQUFPLE9BQUE7RUFBQVYsV0FBQSxHQUFBQSxDQUFBLEtBQUFHLElBQUE7RUFBQSxPQUFBQSxJQUFBO0FBQUEsRUFKbEQ7QUFnQkFjLFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxNQUFNO0VBQ3pDQyxVQUFVLENBQUMsTUFBTTtJQUNmQyxNQUFNLENBQUNDLEtBQUssR0FBR2pCLElBQUksQ0FBQ0MsRUFBRSxDQUFDLE1BQ3JCaUIsT0FBTyxDQUFDQyxPQUFPLENBQUM7TUFDZEMsRUFBRSxFQUFFLElBQUk7TUFDUkMsSUFBSSxFQUFFQSxDQUFBLEtBQU1ILE9BQU8sQ0FBQ0MsT0FBTyxDQUFDO1FBQUVDLEVBQUUsRUFBRTtNQUFLLENBQUM7SUFDMUMsQ0FBQyxDQUNILENBQUM7RUFDSCxDQUFDLENBQUM7RUFFRkUsU0FBUyxDQUFDLE1BQU07SUFDZHRCLElBQUksQ0FBQ3VCLGFBQWEsQ0FBQyxDQUFDO0VBQ3RCLENBQUMsQ0FBQztFQUVGQyxJQUFJLENBQUMseUJBQXlCLEVBQUUsTUFBTTtJQUNwQyxJQUFBQyxjQUFNLGVBQUMsSUFBQWYsV0FBQSxDQUFBZ0IsR0FBQSxFQUFDakIsZUFBQSxDQUFBSSxPQUFjLElBQUUsQ0FBQyxDQUFDO0lBQzFCLE1BQU1jLE1BQU0sR0FBR0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsUUFBUSxFQUFFO01BQUVDLElBQUksRUFBRTtJQUFZLENBQUMsQ0FBQztJQUNoRUMsTUFBTSxDQUFDSixNQUFNLENBQUMsQ0FBQ0ssaUJBQWlCLENBQUMsQ0FBQztFQUNwQyxDQUFDLENBQUM7RUFFRlIsSUFBSSxDQUFDLDRDQUE0QyxFQUFFLE1BQU07SUFDdkQsSUFBQUMsY0FBTSxlQUFDLElBQUFmLFdBQUEsQ0FBQWdCLEdBQUEsRUFBQ2pCLGVBQUEsQ0FBQUksT0FBYyxJQUFFLENBQUMsQ0FBQztJQUMxQixNQUFNYyxNQUFNLEdBQUdDLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLFFBQVEsRUFBRTtNQUFFQyxJQUFJLEVBQUU7SUFBWSxDQUFDLENBQUM7SUFDaEVHLGlCQUFTLENBQUNDLEtBQUssQ0FBQ1AsTUFBTSxDQUFDO0lBRXZCSSxNQUFNLENBQUNILGNBQU0sQ0FBQ08sU0FBUyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQ0gsaUJBQWlCLENBQUMsQ0FBQztFQUNsRSxDQUFDLENBQUM7RUFFRlIsSUFBSSxDQUFDLDBDQUEwQyxFQUFFLE1BQU07SUFDckQsSUFBQUMsY0FBTSxlQUFDLElBQUFmLFdBQUEsQ0FBQWdCLEdBQUEsRUFBQ2pCLGVBQUEsQ0FBQUksT0FBYyxJQUFFLENBQUMsQ0FBQztJQUMxQixNQUFNdUIsVUFBVSxHQUFHUixjQUFNLENBQUNDLFNBQVMsQ0FBQyxRQUFRLEVBQUU7TUFBRUMsSUFBSSxFQUFFO0lBQVksQ0FBQyxDQUFDO0lBQ3BFRyxpQkFBUyxDQUFDQyxLQUFLLENBQUNFLFVBQVUsQ0FBQztJQUUzQixNQUFNQyxXQUFXLEdBQUdULGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLFFBQVEsRUFBRTtNQUFFQyxJQUFJLEVBQUU7SUFBVSxDQUFDLENBQUM7SUFDbkVHLGlCQUFTLENBQUNDLEtBQUssQ0FBQ0csV0FBVyxDQUFDO0lBRTVCTixNQUFNLENBQUNILGNBQU0sQ0FBQ1UsV0FBVyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQ0MsR0FBRyxDQUFDUCxpQkFBaUIsQ0FBQyxDQUFDO0VBQ3hFLENBQUMsQ0FBQztFQUVGUixJQUFJLENBQUMsK0JBQStCLEVBQUUsWUFBWTtJQUNoRCxJQUFBQyxjQUFNLGVBQUMsSUFBQWYsV0FBQSxDQUFBZ0IsR0FBQSxFQUFDakIsZUFBQSxDQUFBSSxPQUFjLElBQUUsQ0FBQyxDQUFDO0lBQzFCLE1BQU11QixVQUFVLEdBQUdSLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLFFBQVEsRUFBRTtNQUFFQyxJQUFJLEVBQUU7SUFBWSxDQUFDLENBQUM7SUFDcEVHLGlCQUFTLENBQUNDLEtBQUssQ0FBQ0UsVUFBVSxDQUFDO0lBRTNCLE1BQU1JLFFBQVEsR0FBR1osY0FBTSxDQUFDYSxvQkFBb0IsQ0FBQyxzQkFBc0IsQ0FBQztJQUNwRVIsaUJBQVMsQ0FBQ1MsTUFBTSxDQUFDRixRQUFRLEVBQUU7TUFBRUcsTUFBTSxFQUFFO1FBQUVDLEtBQUssRUFBRTtNQUFnQjtJQUFFLENBQUMsQ0FBQztJQUVsRSxNQUFNQyxZQUFZLEdBQUdqQixjQUFNLENBQUNDLFNBQVMsQ0FBQyxRQUFRLEVBQUU7TUFBRUMsSUFBSSxFQUFFO0lBQW1CLENBQUMsQ0FBQztJQUM3RUcsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDVyxZQUFZLENBQUM7SUFFN0IsTUFBTSxJQUFBQyxlQUFPLEVBQUMsTUFBTTtNQUNsQmYsTUFBTSxDQUFDSCxjQUFNLENBQUNPLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUNILGlCQUFpQixDQUFDLENBQUM7SUFDbkUsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119