{"version":3,"names":["SecurityValidator","constructor","blockedPatterns","destructive","credentials","malicious","criticalFiles","dangerousModifications","allowedExtensions","validateCode","code","filePath","results","isValid","errors","warnings","severity","details","codeLength","length","timestamp","Date","toISOString","isAllowedExtension","push","type","message","isCriticalFile","patternCheck","checkBlockedPatterns","found","join","patterns","credentialCheck","checkCredentials","syntaxCheck","checkSyntax","bestPracticesCheck","checkBestPractices","validateFiles","files","totalFiles","validFiles","invalidFiles","file","validation","content","path","ext","substring","lastIndexOf","includes","toLowerCase","some","critical","startsWith","category","Object","entries","pattern","matches","match","toString","slice","Set","RegExp","count","riskLevel","openBraces","closeBraces","openParens","closeParens","JSON","parse","error","suggestion","generateSecurityReport","validationResults","summary","totalChecks","passed","failed","overallStatus","recommendation","module","exports","_default","default"],"sources":["SecurityValidator.js"],"sourcesContent":["/**\n * SECURITY VALIDATOR\n * Validação rigorosa de código antes de commits automáticos\n * Previne: Malware, credenciais expostas, deletar arquivos críticos, etc\n */\n\nclass SecurityValidator {\n  constructor() {\n    this.blockedPatterns = {\n      // Comandos perigosos\n      destructive: [\n        /rm\\s+-rf\\s+\\//,\n        /rm\\s+-rf\\s+\\*/,\n        /del\\s+\\/s\\s+\\/q/,\n        /DROP\\s+TABLE/i,\n        /DELETE\\s+FROM/i,\n        /TRUNCATE\\s+TABLE/i,\n      ],\n\n      // Credenciais expostas\n      credentials: [\n        /process\\.env\\.[A-Z_]+/,\n        /GITHUB_TOKEN/,\n        /API_KEY/,\n        /SECRET_KEY/,\n        /PASSWORD/,\n        /aws_secret_access_key/i,\n        /private_key/i,\n        /bearer\\s+[a-z0-9]{40,}/i,\n      ],\n\n      // Código malicioso\n      malicious: [\n        /eval\\s*\\(/,\n        /Function\\s*\\(/,\n        /exec\\s*\\(/,\n        /spawn\\s*\\(/,\n        /require\\s*\\(\\s*['\"]child_process['\"]\\s*\\)/,\n        /import\\s+.*\\s+from\\s+['\"]child_process['\"]/,\n        /\\.shell\\s*\\(/,\n        /\\.exec\\s*\\(/,\n      ],\n\n      // Acesso a arquivos críticos\n      criticalFiles: [\n        /\\.git\\//,\n        /\\.env/,\n        /node_modules\\//,\n        /\\.github\\/workflows/,\n        /vercel\\.json/,\n        /package-lock\\.json/,\n        /yarn\\.lock/,\n      ],\n\n      // Modificações perigosas\n      dangerousModifications: [\n        /delete\\s+.*\\.git/i,\n        /remove\\s+.*package\\.json/i,\n        /truncate\\s+.*database/i,\n      ],\n    };\n\n    this.criticalFiles = [\n      \".git\",\n      \".github\",\n      \"node_modules\",\n      \".env\",\n      \".env.production\",\n      \".env.local\",\n      \"package-lock.json\",\n      \"yarn.lock\",\n      \"vercel.json\",\n      \"firebase.json\",\n    ];\n\n    this.allowedExtensions = [\n      \".js\",\n      \".jsx\",\n      \".ts\",\n      \".tsx\",\n      \".json\",\n      \".css\",\n      \".scss\",\n      \".html\",\n      \".md\",\n      \".py\",\n      \".go\",\n      \".java\",\n      \".rb\",\n      \".php\",\n      \".sql\",\n      \".yml\",\n      \".yaml\",\n    ];\n  }\n\n  /**\n   * Validação completa de código\n   */\n  async validateCode(code, filePath) {\n    const results = {\n      isValid: true,\n      errors: [],\n      warnings: [],\n      severity: \"none\", // none, low, medium, high, critical\n      details: {\n        codeLength: code.length,\n        filePath,\n        timestamp: new Date().toISOString(),\n      },\n    };\n\n    // 1. Verificar extensão do arquivo\n    if (!this.isAllowedExtension(filePath)) {\n      results.isValid = false;\n      results.severity = \"critical\";\n      results.errors.push({\n        type: \"INVALID_FILE_EXTENSION\",\n        message: `Extensão de arquivo não permitida: ${filePath}`,\n        severity: \"critical\",\n      });\n      return results;\n    }\n\n    // 2. Verificar se é arquivo crítico\n    if (this.isCriticalFile(filePath)) {\n      results.isValid = false;\n      results.severity = \"critical\";\n      results.errors.push({\n        type: \"CRITICAL_FILE_MODIFICATION\",\n        message: `Não é permitido modificar arquivo crítico: ${filePath}`,\n        severity: \"critical\",\n      });\n      return results;\n    }\n\n    // 3. Verificar padrões bloqueados\n    const patternCheck = this.checkBlockedPatterns(code);\n    if (patternCheck.found.length > 0) {\n      results.isValid = false;\n      results.severity = \"critical\";\n      results.errors.push({\n        type: \"BLOCKED_PATTERN_DETECTED\",\n        message: `Padrões perigosos detectados: ${patternCheck.found.join(\", \")}`,\n        severity: \"critical\",\n        patterns: patternCheck.details,\n      });\n      return results;\n    }\n\n    // 4. Verificar credenciais expostas\n    const credentialCheck = this.checkCredentials(code);\n    if (credentialCheck.found.length > 0) {\n      results.isValid = false;\n      results.severity = \"critical\";\n      results.errors.push({\n        type: \"CREDENTIALS_EXPOSED\",\n        message: `Credenciais potencialmente expostas: ${credentialCheck.found.join(\", \")}`,\n        severity: \"critical\",\n        credentials: credentialCheck.details,\n      });\n      return results;\n    }\n\n    // 5. Verificar sintaxe básica\n    const syntaxCheck = this.checkSyntax(code, filePath);\n    if (!syntaxCheck.isValid) {\n      results.warnings.push({\n        type: \"SYNTAX_WARNING\",\n        message: syntaxCheck.message,\n        severity: \"medium\",\n      });\n    }\n\n    // 6. Verificar tamanho do arquivo\n    if (code.length > 1000000) {\n      results.warnings.push({\n        type: \"FILE_TOO_LARGE\",\n        message: `Arquivo muito grande (${code.length} bytes)`,\n        severity: \"low\",\n      });\n    }\n\n    // 7. Verificar padrões de boas práticas\n    const bestPracticesCheck = this.checkBestPractices(code, filePath);\n    results.warnings.push(...bestPracticesCheck);\n\n    return results;\n  }\n\n  /**\n   * Validar múltiplos arquivos\n   */\n  async validateFiles(files) {\n    const results = {\n      totalFiles: files.length,\n      validFiles: 0,\n      invalidFiles: 0,\n      warnings: 0,\n      details: [],\n      isValid: true,\n    };\n\n    for (const file of files) {\n      const validation = await this.validateCode(file.content, file.path);\n\n      results.details.push({\n        path: file.path,\n        ...validation,\n      });\n\n      if (!validation.isValid) {\n        results.invalidFiles++;\n        results.isValid = false;\n      } else {\n        results.validFiles++;\n      }\n\n      if (validation.warnings.length > 0) {\n        results.warnings += validation.warnings.length;\n      }\n    }\n\n    return results;\n  }\n\n  /**\n   * Verificar extensão permitida\n   */\n  isAllowedExtension(filePath) {\n    const ext = filePath.substring(filePath.lastIndexOf(\".\"));\n    return this.allowedExtensions.includes(ext.toLowerCase());\n  }\n\n  /**\n   * Verificar se é arquivo crítico\n   */\n  isCriticalFile(filePath) {\n    return this.criticalFiles.some(\n      (critical) => filePath.includes(critical) || filePath.startsWith(critical)\n    );\n  }\n\n  /**\n   * Verificar padrões bloqueados\n   */\n  checkBlockedPatterns(code) {\n    const found = [];\n    const details = [];\n\n    for (const [category, patterns] of Object.entries(this.blockedPatterns)) {\n      for (const pattern of patterns) {\n        const matches = code.match(pattern);\n        if (matches) {\n          found.push(category);\n          details.push({\n            category,\n            pattern: pattern.toString(),\n            matches: matches.slice(0, 3), // Primeiras 3 ocorrências\n          });\n        }\n      }\n    }\n\n    return { found: [...new Set(found)], details };\n  }\n\n  /**\n   * Verificar credenciais expostas\n   */\n  checkCredentials(code) {\n    const found = [];\n    const details = [];\n\n    for (const pattern of this.blockedPatterns.credentials) {\n      const matches = code.match(new RegExp(pattern, \"g\"));\n      if (matches) {\n        found.push(...matches);\n        details.push({\n          pattern: pattern.toString(),\n          count: matches.length,\n        });\n      }\n    }\n\n    return {\n      found: [...new Set(found)],\n      details,\n      riskLevel: found.length > 0 ? \"CRITICAL\" : \"SAFE\",\n    };\n  }\n\n  /**\n   * Verificar sintaxe básica\n   */\n  checkSyntax(code, filePath) {\n    const ext = filePath.substring(filePath.lastIndexOf(\".\"));\n\n    // Verificações básicas por tipo de arquivo\n    if ([\".js\", \".jsx\", \".ts\", \".tsx\"].includes(ext)) {\n      // Verificar chaves balanceadas\n      const openBraces = (code.match(/{/g) || []).length;\n      const closeBraces = (code.match(/}/g) || []).length;\n\n      if (openBraces !== closeBraces) {\n        return {\n          isValid: false,\n          message: `Chaves desbalanceadas: ${openBraces} abertas, ${closeBraces} fechadas`,\n        };\n      }\n\n      // Verificar parênteses balanceados\n      const openParens = (code.match(/\\(/g) || []).length;\n      const closeParens = (code.match(/\\)/g) || []).length;\n\n      if (openParens !== closeParens) {\n        return {\n          isValid: false,\n          message: `Parênteses desbalanceados: ${openParens} abertos, ${closeParens} fechados`,\n        };\n      }\n    }\n\n    if ([\".json\"].includes(ext)) {\n      try {\n        JSON.parse(code);\n      } catch (error) {\n        return {\n          isValid: false,\n          message: `JSON inválido: ${error.message}`,\n        };\n      }\n    }\n\n    return { isValid: true };\n  }\n\n  /**\n   * Verificar boas práticas\n   */\n  checkBestPractices(code, filePath) {\n    const warnings = [];\n\n    // Verificar console.log em produção\n    if (code.includes(\"console.log\") && !filePath.includes(\"test\")) {\n      warnings.push({\n        type: \"CONSOLE_LOG_IN_PRODUCTION\",\n        message: \"console.log detectado em código de produção\",\n        severity: \"low\",\n        suggestion: \"Use logger apropriado em vez de console.log\",\n      });\n    }\n\n    // Verificar TODO/FIXME\n    if (code.includes(\"TODO\") || code.includes(\"FIXME\")) {\n      warnings.push({\n        type: \"UNFINISHED_CODE\",\n        message: \"Código com TODO/FIXME detectado\",\n        severity: \"low\",\n        suggestion: \"Remova comentários TODO/FIXME antes de fazer commit\",\n      });\n    }\n\n    // Verificar comentários de debug\n    if (code.includes(\"debugger\")) {\n      warnings.push({\n        type: \"DEBUG_STATEMENT\",\n        message: \"Declaração debugger detectada\",\n        severity: \"medium\",\n        suggestion: \"Remova debugger antes de fazer commit\",\n      });\n    }\n\n    return warnings;\n  }\n\n  /**\n   * Gerar relatório de segurança\n   */\n  generateSecurityReport(validationResults) {\n    return {\n      timestamp: new Date().toISOString(),\n      summary: {\n        totalChecks: validationResults.details.length,\n        passed: validationResults.validFiles,\n        failed: validationResults.invalidFiles,\n        warnings: validationResults.warnings,\n        overallStatus: validationResults.isValid ? \"SAFE\" : \"BLOCKED\",\n      },\n      details: validationResults.details,\n      recommendation: validationResults.isValid\n        ? \"✅ Código aprovado para commit\"\n        : \"❌ Código bloqueado - Corrija os erros antes de fazer commit\",\n    };\n  }\n}\n\n// Exportar\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports = SecurityValidator;\n}\n\nexport default SecurityValidator;\n"],"mappings":"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","ignoreList":[]}