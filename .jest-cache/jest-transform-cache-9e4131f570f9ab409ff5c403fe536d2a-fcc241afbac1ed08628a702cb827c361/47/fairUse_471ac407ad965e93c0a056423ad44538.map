{"version":3,"names":["cov_vfpl5nwab","actualCoverage","plans","s","free","id","name","price","currency","limits","messagesPerDay","messagesPerMonth","specialists","maxTokensPerMessage","features","studyLab","prioritySupport","advancedModels","basic","intermediate","premium","checkLimit","userPlan","usage","f","plan","b","dailyRemaining","messagesToday","monthlyRemaining","messagesThisMonth","canSendMessage","dailyLimit","monthlyLimit","softLimitReached","getLimitMessage","limitStatus","type","message","action","canUseSpecialist","specialistId","includes","getAIModel","messageType","estimateMessageCost","tokens","model","pricing","costPerToken","costUSD","costBRL"],"sources":["fairUse.js"],"sourcesContent":["// Sistema de Fair Use - Limites por Plano\n// Garante uso sustentável e controle de custos\n\nexport const plans = {\n  free: {\n    id: \"free\",\n    name: \"Gratuito\",\n    price: 0,\n    currency: \"BRL\",\n    limits: {\n      messagesPerDay: 10,\n      messagesPerMonth: 100,\n      specialists: [\"serginho\", \"didak\", \"edu\"], // Apenas 3 especialistas\n      maxTokensPerMessage: 1000,\n      features: {\n        studyLab: false,\n        prioritySupport: false,\n        advancedModels: false,\n      },\n    },\n  },\n  basic: {\n    id: \"basic\",\n    name: \"Básico\",\n    price: 14.9,\n    currency: \"BRL\",\n    limits: {\n      messagesPerDay: 100,\n      messagesPerMonth: 3000,\n      specialists: \"all\", // Todos os especialistas\n      maxTokensPerMessage: 2000,\n      features: {\n        studyLab: true,\n        prioritySupport: false,\n        advancedModels: false,\n      },\n    },\n  },\n  intermediate: {\n    id: \"intermediate\",\n    name: \"Intermediário\",\n    price: 50,\n    currency: \"BRL\",\n    limits: {\n      messagesPerDay: 300,\n      messagesPerMonth: 9000,\n      specialists: \"all\",\n      maxTokensPerMessage: 4000,\n      features: {\n        studyLab: true,\n        prioritySupport: true,\n        advancedModels: false,\n      },\n    },\n  },\n  premium: {\n    id: \"premium\",\n    name: \"Premium\",\n    price: 90,\n    currency: \"BRL\",\n    limits: {\n      messagesPerDay: 500,\n      messagesPerMonth: 15000,\n      specialists: \"all\",\n      maxTokensPerMessage: 8000,\n      features: {\n        studyLab: true,\n        prioritySupport: true,\n        advancedModels: true, // GPT-4.1 opcional\n      },\n    },\n  },\n};\n\n// Verificar se usuário atingiu limite\nexport const checkLimit = (userPlan, usage) => {\n  const plan = plans[userPlan] || plans.free;\n\n  const dailyRemaining = plan.limits.messagesPerDay - (usage.messagesToday || 0);\n  const monthlyRemaining = plan.limits.messagesPerMonth - (usage.messagesThisMonth || 0);\n\n  return {\n    canSendMessage: dailyRemaining > 0 && monthlyRemaining > 0,\n    dailyRemaining,\n    monthlyRemaining,\n    dailyLimit: plan.limits.messagesPerDay,\n    monthlyLimit: plan.limits.messagesPerMonth,\n    softLimitReached: dailyRemaining < 10 || monthlyRemaining < 50,\n  };\n};\n\n// Mensagens de aviso\nexport const getLimitMessage = (limitStatus) => {\n  if (!limitStatus.canSendMessage) {\n    if (limitStatus.dailyRemaining <= 0) {\n      return {\n        type: \"error\",\n        message:\n          \"Limite diário atingido. Você poderá enviar novas mensagens amanhã ou fazer upgrade do plano.\",\n        action: \"upgrade\",\n      };\n    }\n    if (limitStatus.monthlyRemaining <= 0) {\n      return {\n        type: \"error\",\n        message: \"Limite mensal atingido. Faça upgrade para continuar usando.\",\n        action: \"upgrade\",\n      };\n    }\n  }\n\n  if (limitStatus.softLimitReached) {\n    if (limitStatus.dailyRemaining < 10) {\n      return {\n        type: \"warning\",\n        message: `Você tem apenas ${limitStatus.dailyRemaining} mensagens restantes hoje. Considere fazer upgrade.`,\n        action: \"info\",\n      };\n    }\n    if (limitStatus.monthlyRemaining < 50) {\n      return {\n        type: \"warning\",\n        message: `Você tem apenas ${limitStatus.monthlyRemaining} mensagens restantes este mês. Considere fazer upgrade.`,\n        action: \"info\",\n      };\n    }\n  }\n\n  return null;\n};\n\n// Verificar se especialista está disponível no plano\nexport const canUseSpecialist = (userPlan, specialistId) => {\n  const plan = plans[userPlan] || plans.free;\n\n  if (plan.limits.specialists === \"all\") {\n    return true;\n  }\n\n  return plan.limits.specialists.includes(specialistId);\n};\n\n// Obter modelo de IA baseado no plano\nexport const getAIModel = (userPlan, messageType = \"standard\") => {\n  const plan = plans[userPlan] || plans.free;\n\n  // Premium pode escolher modelo avançado\n  if (plan.limits.features.advancedModels && messageType === \"advanced\") {\n    return \"gpt-4.1-mini\"; // Ou GPT-4.1 se usuário escolher\n  }\n\n  // Todos os outros usam Gemini Flash (mais barato)\n  return \"gemini-2.0-flash\";\n};\n\n// Calcular custo estimado por mensagem\nexport const estimateMessageCost = (userPlan, tokens) => {\n  const model = getAIModel(userPlan);\n\n  const pricing = {\n    \"gemini-2.0-flash\": 0.000000075, // $0.075 / 1M tokens\n    \"gpt-4.1-mini\": 0.0000008, // $0.80 / 1M tokens\n  };\n\n  const costPerToken = pricing[model] || pricing[\"gemini-2.0-flash\"];\n  const costUSD = tokens * costPerToken;\n  const costBRL = costUSD * 5; // Conversão aproximada\n\n  return {\n    model,\n    tokens,\n    costUSD,\n    costBRL,\n  };\n};\n"],"mappings":"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","ignoreList":[]}