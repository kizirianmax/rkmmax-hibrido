{"version":3,"names":["cov_27k0wv26io","actualCoverage","React","Navigate","useLocation","matchPath","useAuth","PUBLIC_ROUTES","s","isPublic","pathname","f","some","pattern","path","end","AuthGate","children","location","user","loading","b","createElement","style","display","placeItems","minHeight","opacity","Fragment","to","replace","state","from"],"sources":["AuthGate.jsx"],"sourcesContent":["// src/auth/AuthGate.jsx\nimport React from \"react\";\nimport { Navigate, useLocation, matchPath } from \"react-router-dom\";\n// IMPORTANTE: seu AuthProvider deve expor o hook useAuth.\n// Se no seu projeto for diferente, ajuste a importação abaixo.\nimport { useAuth } from \"./AuthProvider.jsx\";\n\n// Rotas que NÃO exigem login\nconst PUBLIC_ROUTES = [\"/\", \"/plans\", \"/login\", \"/reset-password\"];\n\nfunction isPublic(pathname) {\n  return PUBLIC_ROUTES.some((pattern) => matchPath({ path: pattern, end: true }, pathname));\n}\n\nexport default function AuthGate({ children }) {\n  const location = useLocation();\n  const { user, loading } = useAuth(); // { user: objeto|null, loading: boolean }\n\n  // Enquanto checa o estado de auth (evita flicker/redireciono precoce)\n  if (loading) {\n    return (\n      <div style={{ display: \"grid\", placeItems: \"center\", minHeight: \"60vh\" }}>\n        <span style={{ opacity: 0.7 }}>Carregando…</span>\n      </div>\n    );\n  }\n\n  // Se a rota é pública, sempre libera\n  if (isPublic(location.pathname)) {\n    return <>{children}</>;\n  }\n\n  // Se a rota é privada e não tem usuário autenticado, manda para login\n  if (!user) {\n    return <Navigate to=\"/login\" replace state={{ from: location }} />;\n  }\n\n  // Autenticado em rota privada\n  return <>{children}</>;\n}\n"],"mappings":"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","ignoreList":[]}