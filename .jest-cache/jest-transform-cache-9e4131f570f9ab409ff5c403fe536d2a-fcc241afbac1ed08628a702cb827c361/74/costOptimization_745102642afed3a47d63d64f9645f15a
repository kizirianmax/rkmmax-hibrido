124a7377fe5d9a3bb7b02e5d6c7a414c
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ResponseCache = void 0;
exports.cacheResponse = cacheResponse;
exports.compressPrompt = compressPrompt;
exports.deduplicateMessages = deduplicateMessages;
exports.default = void 0;
exports.estimateTokens = estimateTokens;
exports.getCostStats = getCostStats;
exports.limitContext = limitContext;
exports.optimizeRequest = optimizeRequest;
exports.responseCache = exports.requestBatcher = void 0;
var _crypto = _interopRequireDefault(require("crypto"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
/**
 * COST OPTIMIZATION SYSTEM
 * Sistema de otimiza√ß√£o de custo para RKMMAX
 *
 * T√©cnicas:
 * 1. Cache inteligente (Redis-like in-memory)
 * 2. Compress√£o de prompts
 * 3. Deduplica√ß√£o de mensagens
 * 4. Batching de requisi√ß√µes
 * 5. Token counting e limites
 *
 * Economia esperada: 40-60% em custos de API
 */

/**
 * CACHE IN-MEMORY
 * Cache simples mas efetivo para respostas similares
 */
class ResponseCache {
  constructor(maxSize = 1000, ttl = 3600000) {
    // 1 hora TTL
    this.cache = new Map();
    this.maxSize = maxSize;
    this.ttl = ttl;
  }

  /**
   * Gerar hash da mensagem para cache
   */
  generateHash(messages) {
    const content = JSON.stringify(messages);
    return _crypto.default.createHash("md5").update(content).digest("hex");
  }

  /**
   * Buscar no cache
   */
  get(messages) {
    const hash = this.generateHash(messages);
    const cached = this.cache.get(hash);
    if (!cached) return null;

    // Verificar se expirou
    if (Date.now() - cached.timestamp > this.ttl) {
      this.cache.delete(hash);
      return null;
    }
    console.log("üí∞ CACHE HIT! Economia de custo!");
    return cached.response;
  }

  /**
   * Salvar no cache
   */
  set(messages, response) {
    const hash = this.generateHash(messages);

    // Limpar cache se muito grande
    if (this.cache.size >= this.maxSize) {
      const firstKey = this.cache.keys().next().value;
      this.cache.delete(firstKey);
    }
    this.cache.set(hash, {
      response,
      timestamp: Date.now()
    });
  }

  /**
   * Limpar cache
   */
  clear() {
    this.cache.clear();
  }

  /**
   * Estat√≠sticas
   */
  stats() {
    return {
      size: this.cache.size,
      maxSize: this.maxSize,
      ttl: this.ttl
    };
  }
}

// Inst√¢ncia global do cache
exports.ResponseCache = ResponseCache;
const responseCache = exports.responseCache = new ResponseCache();
/**
 * COMPRESS√ÉO DE PROMPTS
 * Reduz tamanho de prompts sem perder qualidade
 */
function compressPrompt(prompt) {
  return prompt
  // Remover m√∫ltiplos espa√ßos
  .replace(/\s+/g, " ")
  // Remover quebras de linha desnecess√°rias
  .replace(/\n\s*\n\s*\n/g, "\n\n")
  // Trim
  .trim();
}

/**
 * DEDUPLICA√á√ÉO DE MENSAGENS
 * Remove mensagens duplicadas consecutivas
 */
function deduplicateMessages(messages) {
  const deduplicated = [];
  let lastContent = null;
  for (const msg of messages) {
    if (msg.content !== lastContent) {
      deduplicated.push(msg);
      lastContent = msg.content;
    }
  }
  return deduplicated;
}

/**
 * TOKEN COUNTING
 * Estima tokens para controlar custos
 */
function estimateTokens(text) {
  // Estimativa simples: ~4 caracteres = 1 token
  // Mais preciso seria usar tiktoken, mas adiciona depend√™ncia
  return Math.ceil(text.length / 4);
}

/**
 * LIMITAR CONTEXTO
 * Mant√©m apenas mensagens recentes para economizar
 */
function limitContext(messages, maxTokens = 4000) {
  let totalTokens = 0;
  const limited = [];

  // Iterar de tr√°s para frente (mais recentes primeiro)
  for (let i = messages.length - 1; i >= 0; i--) {
    const msg = messages[i];
    const tokens = estimateTokens(msg.content);
    if (totalTokens + tokens > maxTokens) {
      break;
    }
    limited.unshift(msg);
    totalTokens += tokens;
  }
  return limited;
}

/**
 * BATCHING DE REQUISI√á√ïES
 * Agrupa m√∫ltiplas requisi√ß√µes em uma
 */
class RequestBatcher {
  constructor(batchSize = 5, batchDelay = 100) {
    this.batchSize = batchSize;
    this.batchDelay = batchDelay;
    this.queue = [];
    this.timer = null;
  }

  /**
   * Adicionar requisi√ß√£o ao batch
   */
  add(request) {
    return new Promise((resolve, reject) => {
      this.queue.push({
        request,
        resolve,
        reject
      });

      // Se atingiu tamanho do batch, processar imediatamente
      if (this.queue.length >= this.batchSize) {
        this.flush();
      } else {
        // Sen√£o, agendar processamento
        if (this.timer) clearTimeout(this.timer);
        this.timer = setTimeout(() => this.flush(), this.batchDelay);
      }
    });
  }

  /**
   * Processar batch
   */
  async flush() {
    if (this.queue.length === 0) return;
    const batch = this.queue.splice(0, this.batchSize);
    console.log(`üîÑ Processando batch de ${batch.length} requisi√ß√µes`);

    // Processar em paralelo
    const results = await Promise.allSettled(batch.map(({
      request
    }) => request()));

    // Resolver promessas
    results.forEach((result, index) => {
      if (result.status === "fulfilled") {
        batch[index].resolve(result.value);
      } else {
        batch[index].reject(result.reason);
      }
    });
  }
}
const requestBatcher = exports.requestBatcher = new RequestBatcher();

/**
 * OTIMIZA√á√ÉO COMPLETA
 * Aplica todas as otimiza√ß√µes
 */
function optimizeRequest(messages, systemPrompt) {
  // 1. Verificar cache
  const cached = responseCache.get(messages);
  if (cached) {
    return {
      cached: true,
      response: cached
    };
  }

  // 2. Deduplicar mensagens
  const deduplicated = deduplicateMessages(messages);

  // 3. Limitar contexto
  const limited = limitContext(deduplicated);

  // 4. Comprimir prompt
  const compressedPrompt = compressPrompt(systemPrompt);

  // 5. Estimar custo
  const promptTokens = estimateTokens(compressedPrompt);
  const messagesTokens = limited.reduce((sum, msg) => sum + estimateTokens(msg.content), 0);
  const totalTokens = promptTokens + messagesTokens;
  const estimatedCost = totalTokens / 1000 * 0.00075; // Gemini Pro price

  console.log(`üí∞ Custo estimado: $${estimatedCost.toFixed(6)} (${totalTokens} tokens)`);
  return {
    cached: false,
    messages: limited,
    systemPrompt: compressedPrompt,
    stats: {
      originalMessages: messages.length,
      optimizedMessages: limited.length,
      totalTokens,
      estimatedCost
    }
  };
}

/**
 * SALVAR RESPOSTA NO CACHE
 */
function cacheResponse(messages, response) {
  responseCache.set(messages, response);
}

/**
 * ESTAT√çSTICAS DE ECONOMIA
 */
function getCostStats() {
  return {
    cache: responseCache.stats()
    // Adicionar mais estat√≠sticas conforme necess√°rio
  };
}

/**
 * Exportar tudo
 */
var _default = exports.default = {
  responseCache,
  compressPrompt,
  deduplicateMessages,
  estimateTokens,
  limitContext,
  requestBatcher,
  optimizeRequest,
  cacheResponse,
  getCostStats
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY3J5cHRvIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJSZXNwb25zZUNhY2hlIiwiY29uc3RydWN0b3IiLCJtYXhTaXplIiwidHRsIiwiY2FjaGUiLCJNYXAiLCJnZW5lcmF0ZUhhc2giLCJtZXNzYWdlcyIsImNvbnRlbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiY3J5cHRvIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsImdldCIsImhhc2giLCJjYWNoZWQiLCJEYXRlIiwibm93IiwidGltZXN0YW1wIiwiZGVsZXRlIiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlIiwic2V0Iiwic2l6ZSIsImZpcnN0S2V5Iiwia2V5cyIsIm5leHQiLCJ2YWx1ZSIsImNsZWFyIiwic3RhdHMiLCJleHBvcnRzIiwicmVzcG9uc2VDYWNoZSIsImNvbXByZXNzUHJvbXB0IiwicHJvbXB0IiwicmVwbGFjZSIsInRyaW0iLCJkZWR1cGxpY2F0ZU1lc3NhZ2VzIiwiZGVkdXBsaWNhdGVkIiwibGFzdENvbnRlbnQiLCJtc2ciLCJwdXNoIiwiZXN0aW1hdGVUb2tlbnMiLCJ0ZXh0IiwiTWF0aCIsImNlaWwiLCJsZW5ndGgiLCJsaW1pdENvbnRleHQiLCJtYXhUb2tlbnMiLCJ0b3RhbFRva2VucyIsImxpbWl0ZWQiLCJpIiwidG9rZW5zIiwidW5zaGlmdCIsIlJlcXVlc3RCYXRjaGVyIiwiYmF0Y2hTaXplIiwiYmF0Y2hEZWxheSIsInF1ZXVlIiwidGltZXIiLCJhZGQiLCJyZXF1ZXN0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmbHVzaCIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJiYXRjaCIsInNwbGljZSIsInJlc3VsdHMiLCJhbGxTZXR0bGVkIiwibWFwIiwiZm9yRWFjaCIsInJlc3VsdCIsImluZGV4Iiwic3RhdHVzIiwicmVhc29uIiwicmVxdWVzdEJhdGNoZXIiLCJvcHRpbWl6ZVJlcXVlc3QiLCJzeXN0ZW1Qcm9tcHQiLCJjb21wcmVzc2VkUHJvbXB0IiwicHJvbXB0VG9rZW5zIiwibWVzc2FnZXNUb2tlbnMiLCJyZWR1Y2UiLCJzdW0iLCJlc3RpbWF0ZWRDb3N0IiwidG9GaXhlZCIsIm9yaWdpbmFsTWVzc2FnZXMiLCJvcHRpbWl6ZWRNZXNzYWdlcyIsImNhY2hlUmVzcG9uc2UiLCJnZXRDb3N0U3RhdHMiLCJfZGVmYXVsdCJdLCJzb3VyY2VzIjpbImNvc3RPcHRpbWl6YXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDT1NUIE9QVElNSVpBVElPTiBTWVNURU1cbiAqIFNpc3RlbWEgZGUgb3RpbWl6YcOnw6NvIGRlIGN1c3RvIHBhcmEgUktNTUFYXG4gKlxuICogVMOpY25pY2FzOlxuICogMS4gQ2FjaGUgaW50ZWxpZ2VudGUgKFJlZGlzLWxpa2UgaW4tbWVtb3J5KVxuICogMi4gQ29tcHJlc3PDo28gZGUgcHJvbXB0c1xuICogMy4gRGVkdXBsaWNhw6fDo28gZGUgbWVuc2FnZW5zXG4gKiA0LiBCYXRjaGluZyBkZSByZXF1aXNpw6fDtWVzXG4gKiA1LiBUb2tlbiBjb3VudGluZyBlIGxpbWl0ZXNcbiAqXG4gKiBFY29ub21pYSBlc3BlcmFkYTogNDAtNjAlIGVtIGN1c3RvcyBkZSBBUElcbiAqL1xuXG5pbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIjtcblxuLyoqXG4gKiBDQUNIRSBJTi1NRU1PUllcbiAqIENhY2hlIHNpbXBsZXMgbWFzIGVmZXRpdm8gcGFyYSByZXNwb3N0YXMgc2ltaWxhcmVzXG4gKi9cbmNsYXNzIFJlc3BvbnNlQ2FjaGUge1xuICBjb25zdHJ1Y3RvcihtYXhTaXplID0gMTAwMCwgdHRsID0gMzYwMDAwMCkge1xuICAgIC8vIDEgaG9yYSBUVExcbiAgICB0aGlzLmNhY2hlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMubWF4U2l6ZSA9IG1heFNpemU7XG4gICAgdGhpcy50dGwgPSB0dGw7XG4gIH1cblxuICAvKipcbiAgICogR2VyYXIgaGFzaCBkYSBtZW5zYWdlbSBwYXJhIGNhY2hlXG4gICAqL1xuICBnZW5lcmF0ZUhhc2gobWVzc2FnZXMpIHtcbiAgICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkobWVzc2FnZXMpO1xuICAgIHJldHVybiBjcnlwdG8uY3JlYXRlSGFzaChcIm1kNVwiKS51cGRhdGUoY29udGVudCkuZGlnZXN0KFwiaGV4XCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1c2NhciBubyBjYWNoZVxuICAgKi9cbiAgZ2V0KG1lc3NhZ2VzKSB7XG4gICAgY29uc3QgaGFzaCA9IHRoaXMuZ2VuZXJhdGVIYXNoKG1lc3NhZ2VzKTtcbiAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmNhY2hlLmdldChoYXNoKTtcblxuICAgIGlmICghY2FjaGVkKSByZXR1cm4gbnVsbDtcblxuICAgIC8vIFZlcmlmaWNhciBzZSBleHBpcm91XG4gICAgaWYgKERhdGUubm93KCkgLSBjYWNoZWQudGltZXN0YW1wID4gdGhpcy50dGwpIHtcbiAgICAgIHRoaXMuY2FjaGUuZGVsZXRlKGhhc2gpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCLwn5KwIENBQ0hFIEhJVCEgRWNvbm9taWEgZGUgY3VzdG8hXCIpO1xuICAgIHJldHVybiBjYWNoZWQucmVzcG9uc2U7XG4gIH1cblxuICAvKipcbiAgICogU2FsdmFyIG5vIGNhY2hlXG4gICAqL1xuICBzZXQobWVzc2FnZXMsIHJlc3BvbnNlKSB7XG4gICAgY29uc3QgaGFzaCA9IHRoaXMuZ2VuZXJhdGVIYXNoKG1lc3NhZ2VzKTtcblxuICAgIC8vIExpbXBhciBjYWNoZSBzZSBtdWl0byBncmFuZGVcbiAgICBpZiAodGhpcy5jYWNoZS5zaXplID49IHRoaXMubWF4U2l6ZSkge1xuICAgICAgY29uc3QgZmlyc3RLZXkgPSB0aGlzLmNhY2hlLmtleXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICB0aGlzLmNhY2hlLmRlbGV0ZShmaXJzdEtleSk7XG4gICAgfVxuXG4gICAgdGhpcy5jYWNoZS5zZXQoaGFzaCwge1xuICAgICAgcmVzcG9uc2UsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTGltcGFyIGNhY2hlXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLmNhY2hlLmNsZWFyKCk7XG4gIH1cblxuICAvKipcbiAgICogRXN0YXTDrXN0aWNhc1xuICAgKi9cbiAgc3RhdHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNpemU6IHRoaXMuY2FjaGUuc2l6ZSxcbiAgICAgIG1heFNpemU6IHRoaXMubWF4U2l6ZSxcbiAgICAgIHR0bDogdGhpcy50dGwsXG4gICAgfTtcbiAgfVxufVxuXG4vLyBJbnN0w6JuY2lhIGdsb2JhbCBkbyBjYWNoZVxuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ2FjaGUgPSBuZXcgUmVzcG9uc2VDYWNoZSgpO1xuZXhwb3J0IHsgUmVzcG9uc2VDYWNoZSB9O1xuXG4vKipcbiAqIENPTVBSRVNTw4NPIERFIFBST01QVFNcbiAqIFJlZHV6IHRhbWFuaG8gZGUgcHJvbXB0cyBzZW0gcGVyZGVyIHF1YWxpZGFkZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcHJlc3NQcm9tcHQocHJvbXB0KSB7XG4gIHJldHVybiAoXG4gICAgcHJvbXB0XG4gICAgICAvLyBSZW1vdmVyIG3Dumx0aXBsb3MgZXNwYcOnb3NcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKVxuICAgICAgLy8gUmVtb3ZlciBxdWVicmFzIGRlIGxpbmhhIGRlc25lY2Vzc8Ohcmlhc1xuICAgICAgLnJlcGxhY2UoL1xcblxccypcXG5cXHMqXFxuL2csIFwiXFxuXFxuXCIpXG4gICAgICAvLyBUcmltXG4gICAgICAudHJpbSgpXG4gICk7XG59XG5cbi8qKlxuICogREVEVVBMSUNBw4fDg08gREUgTUVOU0FHRU5TXG4gKiBSZW1vdmUgbWVuc2FnZW5zIGR1cGxpY2FkYXMgY29uc2VjdXRpdmFzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWR1cGxpY2F0ZU1lc3NhZ2VzKG1lc3NhZ2VzKSB7XG4gIGNvbnN0IGRlZHVwbGljYXRlZCA9IFtdO1xuICBsZXQgbGFzdENvbnRlbnQgPSBudWxsO1xuXG4gIGZvciAoY29uc3QgbXNnIG9mIG1lc3NhZ2VzKSB7XG4gICAgaWYgKG1zZy5jb250ZW50ICE9PSBsYXN0Q29udGVudCkge1xuICAgICAgZGVkdXBsaWNhdGVkLnB1c2gobXNnKTtcbiAgICAgIGxhc3RDb250ZW50ID0gbXNnLmNvbnRlbnQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRlZHVwbGljYXRlZDtcbn1cblxuLyoqXG4gKiBUT0tFTiBDT1VOVElOR1xuICogRXN0aW1hIHRva2VucyBwYXJhIGNvbnRyb2xhciBjdXN0b3NcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVzdGltYXRlVG9rZW5zKHRleHQpIHtcbiAgLy8gRXN0aW1hdGl2YSBzaW1wbGVzOiB+NCBjYXJhY3RlcmVzID0gMSB0b2tlblxuICAvLyBNYWlzIHByZWNpc28gc2VyaWEgdXNhciB0aWt0b2tlbiwgbWFzIGFkaWNpb25hIGRlcGVuZMOqbmNpYVxuICByZXR1cm4gTWF0aC5jZWlsKHRleHQubGVuZ3RoIC8gNCk7XG59XG5cbi8qKlxuICogTElNSVRBUiBDT05URVhUT1xuICogTWFudMOpbSBhcGVuYXMgbWVuc2FnZW5zIHJlY2VudGVzIHBhcmEgZWNvbm9taXphclxuICovXG5leHBvcnQgZnVuY3Rpb24gbGltaXRDb250ZXh0KG1lc3NhZ2VzLCBtYXhUb2tlbnMgPSA0MDAwKSB7XG4gIGxldCB0b3RhbFRva2VucyA9IDA7XG4gIGNvbnN0IGxpbWl0ZWQgPSBbXTtcblxuICAvLyBJdGVyYXIgZGUgdHLDoXMgcGFyYSBmcmVudGUgKG1haXMgcmVjZW50ZXMgcHJpbWVpcm8pXG4gIGZvciAobGV0IGkgPSBtZXNzYWdlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGNvbnN0IG1zZyA9IG1lc3NhZ2VzW2ldO1xuICAgIGNvbnN0IHRva2VucyA9IGVzdGltYXRlVG9rZW5zKG1zZy5jb250ZW50KTtcblxuICAgIGlmICh0b3RhbFRva2VucyArIHRva2VucyA+IG1heFRva2Vucykge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgbGltaXRlZC51bnNoaWZ0KG1zZyk7XG4gICAgdG90YWxUb2tlbnMgKz0gdG9rZW5zO1xuICB9XG5cbiAgcmV0dXJuIGxpbWl0ZWQ7XG59XG5cbi8qKlxuICogQkFUQ0hJTkcgREUgUkVRVUlTScOHw5VFU1xuICogQWdydXBhIG3Dumx0aXBsYXMgcmVxdWlzacOnw7VlcyBlbSB1bWFcbiAqL1xuY2xhc3MgUmVxdWVzdEJhdGNoZXIge1xuICBjb25zdHJ1Y3RvcihiYXRjaFNpemUgPSA1LCBiYXRjaERlbGF5ID0gMTAwKSB7XG4gICAgdGhpcy5iYXRjaFNpemUgPSBiYXRjaFNpemU7XG4gICAgdGhpcy5iYXRjaERlbGF5ID0gYmF0Y2hEZWxheTtcbiAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgdGhpcy50aW1lciA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQWRpY2lvbmFyIHJlcXVpc2nDp8OjbyBhbyBiYXRjaFxuICAgKi9cbiAgYWRkKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5xdWV1ZS5wdXNoKHsgcmVxdWVzdCwgcmVzb2x2ZSwgcmVqZWN0IH0pO1xuXG4gICAgICAvLyBTZSBhdGluZ2l1IHRhbWFuaG8gZG8gYmF0Y2gsIHByb2Nlc3NhciBpbWVkaWF0YW1lbnRlXG4gICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPj0gdGhpcy5iYXRjaFNpemUpIHtcbiAgICAgICAgdGhpcy5mbHVzaCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2Vuw6NvLCBhZ2VuZGFyIHByb2Nlc3NhbWVudG9cbiAgICAgICAgaWYgKHRoaXMudGltZXIpIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcbiAgICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5mbHVzaCgpLCB0aGlzLmJhdGNoRGVsYXkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3NhciBiYXRjaFxuICAgKi9cbiAgYXN5bmMgZmx1c2goKSB7XG4gICAgaWYgKHRoaXMucXVldWUubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBjb25zdCBiYXRjaCA9IHRoaXMucXVldWUuc3BsaWNlKDAsIHRoaXMuYmF0Y2hTaXplKTtcblxuICAgIGNvbnNvbGUubG9nKGDwn5SEIFByb2Nlc3NhbmRvIGJhdGNoIGRlICR7YmF0Y2gubGVuZ3RofSByZXF1aXNpw6fDtWVzYCk7XG5cbiAgICAvLyBQcm9jZXNzYXIgZW0gcGFyYWxlbG9cbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGJhdGNoLm1hcCgoeyByZXF1ZXN0IH0pID0+IHJlcXVlc3QoKSkpO1xuXG4gICAgLy8gUmVzb2x2ZXIgcHJvbWVzc2FzXG4gICAgcmVzdWx0cy5mb3JFYWNoKChyZXN1bHQsIGluZGV4KSA9PiB7XG4gICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIikge1xuICAgICAgICBiYXRjaFtpbmRleF0ucmVzb2x2ZShyZXN1bHQudmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYmF0Y2hbaW5kZXhdLnJlamVjdChyZXN1bHQucmVhc29uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcmVxdWVzdEJhdGNoZXIgPSBuZXcgUmVxdWVzdEJhdGNoZXIoKTtcblxuLyoqXG4gKiBPVElNSVpBw4fDg08gQ09NUExFVEFcbiAqIEFwbGljYSB0b2RhcyBhcyBvdGltaXphw6fDtWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcHRpbWl6ZVJlcXVlc3QobWVzc2FnZXMsIHN5c3RlbVByb21wdCkge1xuICAvLyAxLiBWZXJpZmljYXIgY2FjaGVcbiAgY29uc3QgY2FjaGVkID0gcmVzcG9uc2VDYWNoZS5nZXQobWVzc2FnZXMpO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgcmV0dXJuIHsgY2FjaGVkOiB0cnVlLCByZXNwb25zZTogY2FjaGVkIH07XG4gIH1cblxuICAvLyAyLiBEZWR1cGxpY2FyIG1lbnNhZ2Vuc1xuICBjb25zdCBkZWR1cGxpY2F0ZWQgPSBkZWR1cGxpY2F0ZU1lc3NhZ2VzKG1lc3NhZ2VzKTtcblxuICAvLyAzLiBMaW1pdGFyIGNvbnRleHRvXG4gIGNvbnN0IGxpbWl0ZWQgPSBsaW1pdENvbnRleHQoZGVkdXBsaWNhdGVkKTtcblxuICAvLyA0LiBDb21wcmltaXIgcHJvbXB0XG4gIGNvbnN0IGNvbXByZXNzZWRQcm9tcHQgPSBjb21wcmVzc1Byb21wdChzeXN0ZW1Qcm9tcHQpO1xuXG4gIC8vIDUuIEVzdGltYXIgY3VzdG9cbiAgY29uc3QgcHJvbXB0VG9rZW5zID0gZXN0aW1hdGVUb2tlbnMoY29tcHJlc3NlZFByb21wdCk7XG4gIGNvbnN0IG1lc3NhZ2VzVG9rZW5zID0gbGltaXRlZC5yZWR1Y2UoKHN1bSwgbXNnKSA9PiBzdW0gKyBlc3RpbWF0ZVRva2Vucyhtc2cuY29udGVudCksIDApO1xuICBjb25zdCB0b3RhbFRva2VucyA9IHByb21wdFRva2VucyArIG1lc3NhZ2VzVG9rZW5zO1xuICBjb25zdCBlc3RpbWF0ZWRDb3N0ID0gKHRvdGFsVG9rZW5zIC8gMTAwMCkgKiAwLjAwMDc1OyAvLyBHZW1pbmkgUHJvIHByaWNlXG5cbiAgY29uc29sZS5sb2coYPCfkrAgQ3VzdG8gZXN0aW1hZG86ICQke2VzdGltYXRlZENvc3QudG9GaXhlZCg2KX0gKCR7dG90YWxUb2tlbnN9IHRva2VucylgKTtcblxuICByZXR1cm4ge1xuICAgIGNhY2hlZDogZmFsc2UsXG4gICAgbWVzc2FnZXM6IGxpbWl0ZWQsXG4gICAgc3lzdGVtUHJvbXB0OiBjb21wcmVzc2VkUHJvbXB0LFxuICAgIHN0YXRzOiB7XG4gICAgICBvcmlnaW5hbE1lc3NhZ2VzOiBtZXNzYWdlcy5sZW5ndGgsXG4gICAgICBvcHRpbWl6ZWRNZXNzYWdlczogbGltaXRlZC5sZW5ndGgsXG4gICAgICB0b3RhbFRva2VucyxcbiAgICAgIGVzdGltYXRlZENvc3QsXG4gICAgfSxcbiAgfTtcbn1cblxuLyoqXG4gKiBTQUxWQVIgUkVTUE9TVEEgTk8gQ0FDSEVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhY2hlUmVzcG9uc2UobWVzc2FnZXMsIHJlc3BvbnNlKSB7XG4gIHJlc3BvbnNlQ2FjaGUuc2V0KG1lc3NhZ2VzLCByZXNwb25zZSk7XG59XG5cbi8qKlxuICogRVNUQVTDjVNUSUNBUyBERSBFQ09OT01JQVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29zdFN0YXRzKCkge1xuICByZXR1cm4ge1xuICAgIGNhY2hlOiByZXNwb25zZUNhY2hlLnN0YXRzKCksXG4gICAgLy8gQWRpY2lvbmFyIG1haXMgZXN0YXTDrXN0aWNhcyBjb25mb3JtZSBuZWNlc3PDoXJpb1xuICB9O1xufVxuXG4vKipcbiAqIEV4cG9ydGFyIHR1ZG9cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICByZXNwb25zZUNhY2hlLFxuICBjb21wcmVzc1Byb21wdCxcbiAgZGVkdXBsaWNhdGVNZXNzYWdlcyxcbiAgZXN0aW1hdGVUb2tlbnMsXG4gIGxpbWl0Q29udGV4dCxcbiAgcmVxdWVzdEJhdGNoZXIsXG4gIG9wdGltaXplUmVxdWVzdCxcbiAgY2FjaGVSZXNwb25zZSxcbiAgZ2V0Q29zdFN0YXRzLFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBY0EsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQTRCLFNBQUFELHVCQUFBRSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBZDVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztB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bUIsQ0FBQ2hDLFFBQVEsQ0FBQzs7RUFFbEQ7RUFDQSxNQUFNNkMsT0FBTyxHQUFHSCxZQUFZLENBQUNULFlBQVksQ0FBQzs7RUFFMUM7RUFDQSxNQUFNMEMsZ0JBQWdCLEdBQUcvQyxjQUFjLENBQUM4QyxZQUFZLENBQUM7O0VBRXJEO0VBQ0EsTUFBTUUsWUFBWSxHQUFHdkMsY0FBYyxDQUFDc0MsZ0JBQWdCLENBQUM7RUFDckQsTUFBTUUsY0FBYyxHQUFHaEMsT0FBTyxDQUFDaUMsTUFBTSxDQUFDLENBQUNDLEdBQUcsRUFBRTVDLEdBQUcsS0FBSzRDLEdBQUcsR0FBRzFDLGNBQWMsQ0FBQ0YsR0FBRyxDQUFDbEMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQ3pGLE1BQU0yQyxXQUFXLEdBQUdnQyxZQUFZLEdBQUdDLGNBQWM7RUFDakQsTUFBTUcsYUFBYSxHQUFJcEMsV0FBVyxHQUFHLElBQUksR0FBSSxPQUFPLENBQUMsQ0FBQzs7RUFFdEQ3QixPQUFPLENBQUNDLEdBQUcsQ0FBQyx1QkFBdUJnRSxhQUFhLENBQUNDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBS3JDLFdBQVcsVUFBVSxDQUFDO0VBRXRGLE9BQU87SUFDTGxDLE1BQU0sRUFBRSxLQUFLO0lBQ2JWLFFBQVEsRUFBRTZDLE9BQU87SUFDakI2QixZQUFZLEVBQUVDLGdCQUFnQjtJQUM5QmxELEtBQUssRUFBRTtNQUNMeUQsZ0JBQWdCLEVBQUVsRixRQUFRLENBQUN5QyxNQUFNO01BQ2pDMEMsaUJBQWlCLEVBQUV0QyxPQUFPLENBQUNKLE1BQU07TUFDakNHLFdBQVc7TUFDWG9DO0lBQ0Y7RUFDRixDQUFDO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ08sU0FBU0ksYUFBYUEsQ0FBQ3BGLFFBQVEsRUFBRWlCLFFBQVEsRUFBRTtFQUNoRFUsYUFBYSxDQUFDVCxHQUFHLENBQUNsQixRQUFRLEVBQUVpQixRQUFRLENBQUM7QUFDdkM7O0FBRUE7QUFDQTtBQUNBO0FBQ08sU0FBU29FLFlBQVlBLENBQUEsRUFBRztFQUM3QixPQUFPO0lBQ0x4RixLQUFLLEVBQUU4QixhQUFhLENBQUNGLEtBQUssQ0FBQztJQUMzQjtFQUNGLENBQUM7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFGQSxJQUFBNkQsUUFBQSxHQUFBNUQsT0FBQSxDQUFBbEMsT0FBQSxHQUdlO0VBQ2JtQyxhQUFhO0VBQ2JDLGNBQWM7RUFDZEksbUJBQW1CO0VBQ25CSyxjQUFjO0VBQ2RLLFlBQVk7RUFDWjhCLGNBQWM7RUFDZEMsZUFBZTtFQUNmVyxhQUFhO0VBQ2JDO0FBQ0YsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==