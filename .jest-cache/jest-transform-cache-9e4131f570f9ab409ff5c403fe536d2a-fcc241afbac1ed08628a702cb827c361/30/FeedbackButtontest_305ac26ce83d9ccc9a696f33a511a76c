73f551297bad73e0d5f4206b9e640a7e
"use strict";

// Mock Sentry and Analytics
_getJestObj().mock("../lib/sentry.js", () => ({
  captureMessage: jest.fn()
}));
_getJestObj().mock("../lib/analytics.js", () => ({
  trackEvent: jest.fn(),
  Events: {
    FEEDBACK_SUBMITTED: "feedback_submitted"
  }
}));
var _react = _interopRequireDefault(require("react"));
var _react2 = require("@testing-library/react");
require("@testing-library/jest-dom");
var _FeedbackButton = _interopRequireDefault(require("./FeedbackButton.jsx"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
} // src/components/FeedbackButton.test.jsx
describe("FeedbackButton Component", () => {
  beforeEach(() => {
    global.fetch = jest.fn(() => Promise.resolve({
      ok: true,
      json: () => Promise.resolve({
        ok: true
      })
    }));
  });
  afterEach(() => {
    jest.clearAllMocks();
  });
  test("renders feedback button", () => {
    (0, _react2.render)(/*#__PURE__*/_react.default.createElement(_FeedbackButton.default, null));
    const button = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    expect(button).toBeInTheDocument();
  });
  test("opens feedback form when button is clicked", () => {
    (0, _react2.render)(/*#__PURE__*/_react.default.createElement(_FeedbackButton.default, null));
    const button = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    _react2.fireEvent.click(button);
    expect(_react2.screen.getByText(/enviar feedback/i)).toBeInTheDocument();
  });
  test("closes form when close button is clicked", () => {
    (0, _react2.render)(/*#__PURE__*/_react.default.createElement(_FeedbackButton.default, null));
    const openButton = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    _react2.fireEvent.click(openButton);
    const closeButton = _react2.screen.getByRole("button", {
      name: /fechar/i
    });
    _react2.fireEvent.click(closeButton);
    expect(_react2.screen.queryByText(/enviar feedback/i)).not.toBeInTheDocument();
  });
  test("submits feedback successfully", async () => {
    (0, _react2.render)(/*#__PURE__*/_react.default.createElement(_FeedbackButton.default, null));
    const openButton = _react2.screen.getByRole("button", {
      name: /feedback/i
    });
    _react2.fireEvent.click(openButton);
    const textarea = _react2.screen.getByPlaceholderText(/descreva o problema/i);
    _react2.fireEvent.change(textarea, {
      target: {
        value: "Test feedback"
      }
    });
    const submitButton = _react2.screen.getByRole("button", {
      name: /enviar feedback/i
    });
    _react2.fireEvent.click(submitButton);
    await (0, _react2.waitFor)(() => {
      expect(_react2.screen.getByText(/feedback enviado/i)).toBeInTheDocument();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJjYXB0dXJlTWVzc2FnZSIsImplc3QiLCJmbiIsInRyYWNrRXZlbnQiLCJFdmVudHMiLCJGRUVEQkFDS19TVUJNSVRURUQiLCJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdDIiLCJfRmVlZGJhY2tCdXR0b24iLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJnbG9iYWwiLCJmZXRjaCIsIlByb21pc2UiLCJyZXNvbHZlIiwib2siLCJqc29uIiwiYWZ0ZXJFYWNoIiwiY2xlYXJBbGxNb2NrcyIsInRlc3QiLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50IiwiYnV0dG9uIiwic2NyZWVuIiwiZ2V0QnlSb2xlIiwibmFtZSIsImV4cGVjdCIsInRvQmVJblRoZURvY3VtZW50IiwiZmlyZUV2ZW50IiwiY2xpY2siLCJnZXRCeVRleHQiLCJvcGVuQnV0dG9uIiwiY2xvc2VCdXR0b24iLCJxdWVyeUJ5VGV4dCIsIm5vdCIsInRleHRhcmVhIiwiZ2V0QnlQbGFjZWhvbGRlclRleHQiLCJjaGFuZ2UiLCJ0YXJnZXQiLCJ2YWx1ZSIsInN1Ym1pdEJ1dHRvbiIsIndhaXRGb3IiXSwic291cmNlcyI6WyJGZWVkYmFja0J1dHRvbi50ZXN0LmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29tcG9uZW50cy9GZWVkYmFja0J1dHRvbi50ZXN0LmpzeFxuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gXCJAdGVzdGluZy1saWJyYXJ5L3JlYWN0XCI7XG5pbXBvcnQgXCJAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tXCI7XG5pbXBvcnQgRmVlZGJhY2tCdXR0b24gZnJvbSBcIi4vRmVlZGJhY2tCdXR0b24uanN4XCI7XG5cbi8vIE1vY2sgU2VudHJ5IGFuZCBBbmFseXRpY3Ncbmplc3QubW9jayhcIi4uL2xpYi9zZW50cnkuanNcIiwgKCkgPT4gKHtcbiAgY2FwdHVyZU1lc3NhZ2U6IGplc3QuZm4oKSxcbn0pKTtcblxuamVzdC5tb2NrKFwiLi4vbGliL2FuYWx5dGljcy5qc1wiLCAoKSA9PiAoe1xuICB0cmFja0V2ZW50OiBqZXN0LmZuKCksXG4gIEV2ZW50czogeyBGRUVEQkFDS19TVUJNSVRURUQ6IFwiZmVlZGJhY2tfc3VibWl0dGVkXCIgfSxcbn0pKTtcblxuZGVzY3JpYmUoXCJGZWVkYmFja0J1dHRvbiBDb21wb25lbnRcIiwgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCgpID0+XG4gICAgICBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgb2s6IHRydWUgfSksXG4gICAgICB9KVxuICAgICk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIHRlc3QoXCJyZW5kZXJzIGZlZWRiYWNrIGJ1dHRvblwiLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxGZWVkYmFja0J1dHRvbiAvPik7XG4gICAgY29uc3QgYnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZShcImJ1dHRvblwiLCB7IG5hbWU6IC9mZWVkYmFjay9pIH0pO1xuICAgIGV4cGVjdChidXR0b24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIHRlc3QoXCJvcGVucyBmZWVkYmFjayBmb3JtIHdoZW4gYnV0dG9uIGlzIGNsaWNrZWRcIiwgKCkgPT4ge1xuICAgIHJlbmRlcig8RmVlZGJhY2tCdXR0b24gLz4pO1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNjcmVlbi5nZXRCeVJvbGUoXCJidXR0b25cIiwgeyBuYW1lOiAvZmVlZGJhY2svaSB9KTtcbiAgICBmaXJlRXZlbnQuY2xpY2soYnV0dG9uKTtcblxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9lbnZpYXIgZmVlZGJhY2svaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gIH0pO1xuXG4gIHRlc3QoXCJjbG9zZXMgZm9ybSB3aGVuIGNsb3NlIGJ1dHRvbiBpcyBjbGlja2VkXCIsICgpID0+IHtcbiAgICByZW5kZXIoPEZlZWRiYWNrQnV0dG9uIC8+KTtcbiAgICBjb25zdCBvcGVuQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZShcImJ1dHRvblwiLCB7IG5hbWU6IC9mZWVkYmFjay9pIH0pO1xuICAgIGZpcmVFdmVudC5jbGljayhvcGVuQnV0dG9uKTtcblxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZShcImJ1dHRvblwiLCB7IG5hbWU6IC9mZWNoYXIvaSB9KTtcbiAgICBmaXJlRXZlbnQuY2xpY2soY2xvc2VCdXR0b24pO1xuXG4gICAgZXhwZWN0KHNjcmVlbi5xdWVyeUJ5VGV4dCgvZW52aWFyIGZlZWRiYWNrL2kpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgfSk7XG5cbiAgdGVzdChcInN1Ym1pdHMgZmVlZGJhY2sgc3VjY2Vzc2Z1bGx5XCIsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoPEZlZWRiYWNrQnV0dG9uIC8+KTtcbiAgICBjb25zdCBvcGVuQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZShcImJ1dHRvblwiLCB7IG5hbWU6IC9mZWVkYmFjay9pIH0pO1xuICAgIGZpcmVFdmVudC5jbGljayhvcGVuQnV0dG9uKTtcblxuICAgIGNvbnN0IHRleHRhcmVhID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC9kZXNjcmV2YSBvIHByb2JsZW1hL2kpO1xuICAgIGZpcmVFdmVudC5jaGFuZ2UodGV4dGFyZWEsIHsgdGFyZ2V0OiB7IHZhbHVlOiBcIlRlc3QgZmVlZGJhY2tcIiB9IH0pO1xuXG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZShcImJ1dHRvblwiLCB7IG5hbWU6IC9lbnZpYXIgZmVlZGJhY2svaSB9KTtcbiAgICBmaXJlRXZlbnQuY2xpY2soc3VibWl0QnV0dG9uKTtcblxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2ZlZWRiYWNrIGVudmlhZG8vaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBTUE7QUFDQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsT0FBTztFQUNuQ0MsY0FBYyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQztBQUMxQixDQUFDLENBQUMsQ0FBQztBQUVISixXQUFBLEdBQUtDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxPQUFPO0VBQ3RDSSxVQUFVLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7RUFDckJFLE1BQU0sRUFBRTtJQUFFQyxrQkFBa0IsRUFBRTtFQUFxQjtBQUNyRCxDQUFDLENBQUMsQ0FBQztBQWJILElBQUFDLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUNBQSxPQUFBO0FBQ0EsSUFBQUUsZUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQWtELFNBQUFELHVCQUFBSSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBQUEsU0FBQWIsWUFBQTtFQUFBO0lBQUFHO0VBQUEsSUFBQU8sT0FBQTtFQUFBVixXQUFBLEdBQUFBLENBQUEsS0FBQUcsSUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQSxFQUpsRDtBQWdCQWEsUUFBUSxDQUFDLDBCQUEwQixFQUFFLE1BQU07RUFDekNDLFVBQVUsQ0FBQyxNQUFNO0lBQ2ZDLE1BQU0sQ0FBQ0MsS0FBSyxHQUFHaEIsSUFBSSxDQUFDQyxFQUFFLENBQUMsTUFDckJnQixPQUFPLENBQUNDLE9BQU8sQ0FBQztNQUNkQyxFQUFFLEVBQUUsSUFBSTtNQUNSQyxJQUFJLEVBQUVBLENBQUEsS0FBTUgsT0FBTyxDQUFDQyxPQUFPLENBQUM7UUFBRUMsRUFBRSxFQUFFO01BQUssQ0FBQztJQUMxQyxDQUFDLENBQ0gsQ0FBQztFQUNILENBQUMsQ0FBQztFQUVGRSxTQUFTLENBQUMsTUFBTTtJQUNkckIsSUFBSSxDQUFDc0IsYUFBYSxDQUFDLENBQUM7RUFDdEIsQ0FBQyxDQUFDO0VBRUZDLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxNQUFNO0lBQ3BDLElBQUFDLGNBQU0sZUFBQ25CLE1BQUEsQ0FBQU8sT0FBQSxDQUFBYSxhQUFBLENBQUNoQixlQUFBLENBQUFHLE9BQWMsTUFBRSxDQUFDLENBQUM7SUFDMUIsTUFBTWMsTUFBTSxHQUFHQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxRQUFRLEVBQUU7TUFBRUMsSUFBSSxFQUFFO0lBQVksQ0FBQyxDQUFDO0lBQ2hFQyxNQUFNLENBQUNKLE1BQU0sQ0FBQyxDQUFDSyxpQkFBaUIsQ0FBQyxDQUFDO0VBQ3BDLENBQUMsQ0FBQztFQUVGUixJQUFJLENBQUMsNENBQTRDLEVBQUUsTUFBTTtJQUN2RCxJQUFBQyxjQUFNLGVBQUNuQixNQUFBLENBQUFPLE9BQUEsQ0FBQWEsYUFBQSxDQUFDaEIsZUFBQSxDQUFBRyxPQUFjLE1BQUUsQ0FBQyxDQUFDO0lBQzFCLE1BQU1jLE1BQU0sR0FBR0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsUUFBUSxFQUFFO01BQUVDLElBQUksRUFBRTtJQUFZLENBQUMsQ0FBQztJQUNoRUcsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDUCxNQUFNLENBQUM7SUFFdkJJLE1BQU0sQ0FBQ0gsY0FBTSxDQUFDTyxTQUFTLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDSCxpQkFBaUIsQ0FBQyxDQUFDO0VBQ2xFLENBQUMsQ0FBQztFQUVGUixJQUFJLENBQUMsMENBQTBDLEVBQUUsTUFBTTtJQUNyRCxJQUFBQyxjQUFNLGVBQUNuQixNQUFBLENBQUFPLE9BQUEsQ0FBQWEsYUFBQSxDQUFDaEIsZUFBQSxDQUFBRyxPQUFjLE1BQUUsQ0FBQyxDQUFDO0lBQzFCLE1BQU11QixVQUFVLEdBQUdSLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLFFBQVEsRUFBRTtNQUFFQyxJQUFJLEVBQUU7SUFBWSxDQUFDLENBQUM7SUFDcEVHLGlCQUFTLENBQUNDLEtBQUssQ0FBQ0UsVUFBVSxDQUFDO0lBRTNCLE1BQU1DLFdBQVcsR0FBR1QsY0FBTSxDQUFDQyxTQUFTLENBQUMsUUFBUSxFQUFFO01BQUVDLElBQUksRUFBRTtJQUFVLENBQUMsQ0FBQztJQUNuRUcsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDRyxXQUFXLENBQUM7SUFFNUJOLE1BQU0sQ0FBQ0gsY0FBTSxDQUFDVSxXQUFXLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDQyxHQUFHLENBQUNQLGlCQUFpQixDQUFDLENBQUM7RUFDeEUsQ0FBQyxDQUFDO0VBRUZSLElBQUksQ0FBQywrQkFBK0IsRUFBRSxZQUFZO0lBQ2hELElBQUFDLGNBQU0sZUFBQ25CLE1BQUEsQ0FBQU8sT0FBQSxDQUFBYSxhQUFBLENBQUNoQixlQUFBLENBQUFHLE9BQWMsTUFBRSxDQUFDLENBQUM7SUFDMUIsTUFBTXVCLFVBQVUsR0FBR1IsY0FBTSxDQUFDQyxTQUFTLENBQUMsUUFBUSxFQUFFO01BQUVDLElBQUksRUFBRTtJQUFZLENBQUMsQ0FBQztJQUNwRUcsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDRSxVQUFVLENBQUM7SUFFM0IsTUFBTUksUUFBUSxHQUFHWixjQUFNLENBQUNhLG9CQUFvQixDQUFDLHNCQUFzQixDQUFDO0lBQ3BFUixpQkFBUyxDQUFDUyxNQUFNLENBQUNGLFFBQVEsRUFBRTtNQUFFRyxNQUFNLEVBQUU7UUFBRUMsS0FBSyxFQUFFO01BQWdCO0lBQUUsQ0FBQyxDQUFDO0lBRWxFLE1BQU1DLFlBQVksR0FBR2pCLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLFFBQVEsRUFBRTtNQUFFQyxJQUFJLEVBQUU7SUFBbUIsQ0FBQyxDQUFDO0lBQzdFRyxpQkFBUyxDQUFDQyxLQUFLLENBQUNXLFlBQVksQ0FBQztJQUU3QixNQUFNLElBQUFDLGVBQU8sRUFBQyxNQUFNO01BQ2xCZixNQUFNLENBQUNILGNBQU0sQ0FBQ08sU0FBUyxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQ0gsaUJBQWlCLENBQUMsQ0FBQztJQUNuRSxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=