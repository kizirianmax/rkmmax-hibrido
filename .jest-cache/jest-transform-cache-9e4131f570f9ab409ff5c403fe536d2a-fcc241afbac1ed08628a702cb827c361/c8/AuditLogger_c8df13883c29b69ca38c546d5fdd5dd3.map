{"version":3,"names":["AuditLogger","constructor","logs","maxLogs","logAutomationRequest","data","log","id","generateLogId","type","timestamp","Date","toISOString","userId","username","command","mode","selectedSpecialist","suggestedSpecialist","description","status","details","ipAddress","userAgent","sessionId","addLog","logCodeAnalysis","automationId","specialist","filesAnalyzed","codeGenerated","linesOfCode","analysisTime","model","temperature","logSecurityValidation","filesChecked","isValid","severity","errors","warnings","validationTime","blockedPatterns","credentialsFound","logGitCommit","commitHash","commitMessage","branch","filesChanged","insertions","deletions","author","pushedTo","prCreated","prNumber","logCreditDebit","creditsDeducted","creditsRemaining","breakdown","analysis","codeGeneration","securityValidation","gitOperations","logError","errorType","errorMessage","errorStack","phase","recoveryAttempted","recoverySuccessful","logAutomationCompletion","totalDuration","prUrl","summary","filesCreated","filesModified","filesDeleted","linesAdded","linesRemoved","creditsUsed","logManualAction","action","targetFile","logRepositoryAccess","repository","filesAccessed","push","length","slice","persistLog","catch","err","console","error","response","fetch","method","headers","body","JSON","stringify","ok","now","Math","random","toString","substr","searchLogs","filters","results","filter","startDate","start","endDate","end","generateAuditReport","report","generatedAt","totalLogs","byType","byStatus","byUser","forEach","exportLogs","exportLogsCSV","Object","keys","csv","join","row","map","header","value","replace","String","clearOldLogs","daysToKeep","cutoffDate","setDate","getDate","beforeCount","logsRemoved","logsRemaining","getStatistics","stats","logTypes","statusCounts","userActivity","timeRange","oldest","newest","module","exports","_default","default"],"sources":["AuditLogger.js"],"sourcesContent":["/**\n * AUDIT LOGGER\n * Registra todas as ações de automação para auditoria e compliance\n * Rastreia: Quem pediu, O que foi feito, Quando, Status, Detalhes\n */\n\nclass AuditLogger {\n  constructor() {\n    this.logs = [];\n    this.maxLogs = 10000; // Máximo de logs em memória\n  }\n\n  /**\n   * Log de requisição de automação\n   */\n  logAutomationRequest(data) {\n    const log = {\n      id: this.generateLogId(),\n      type: \"AUTOMATION_REQUEST\",\n      timestamp: new Date().toISOString(),\n      userId: data.userId,\n      username: data.username,\n      command: data.command,\n      mode: data.mode, // 'OPTIMIZED' ou 'HYBRID'\n      selectedSpecialist: data.selectedSpecialist,\n      suggestedSpecialist: data.suggestedSpecialist,\n      description: data.description,\n      status: \"INITIATED\",\n      details: {\n        ipAddress: data.ipAddress,\n        userAgent: data.userAgent,\n        sessionId: data.sessionId,\n      },\n    };\n\n    this.addLog(log);\n    return log.id;\n  }\n\n  /**\n   * Log de análise de código\n   */\n  logCodeAnalysis(data) {\n    const log = {\n      id: this.generateLogId(),\n      type: \"CODE_ANALYSIS\",\n      timestamp: new Date().toISOString(),\n      automationId: data.automationId,\n      specialist: data.specialist,\n      filesAnalyzed: data.filesAnalyzed,\n      codeGenerated: data.codeGenerated,\n      linesOfCode: data.linesOfCode,\n      status: \"COMPLETED\",\n      details: {\n        analysisTime: data.analysisTime,\n        model: data.model,\n        temperature: data.temperature,\n      },\n    };\n\n    this.addLog(log);\n    return log.id;\n  }\n\n  /**\n   * Log de validação de segurança\n   */\n  logSecurityValidation(data) {\n    const log = {\n      id: this.generateLogId(),\n      type: \"SECURITY_VALIDATION\",\n      timestamp: new Date().toISOString(),\n      automationId: data.automationId,\n      filesChecked: data.filesChecked,\n      status: data.isValid ? \"PASSED\" : \"BLOCKED\",\n      severity: data.severity,\n      errors: data.errors || [],\n      warnings: data.warnings || [],\n      details: {\n        validationTime: data.validationTime,\n        blockedPatterns: data.blockedPatterns || [],\n        credentialsFound: data.credentialsFound || [],\n      },\n    };\n\n    this.addLog(log);\n    return log.id;\n  }\n\n  /**\n   * Log de commit automático\n   */\n  logGitCommit(data) {\n    const log = {\n      id: this.generateLogId(),\n      type: \"GIT_COMMIT\",\n      timestamp: new Date().toISOString(),\n      automationId: data.automationId,\n      commitHash: data.commitHash,\n      commitMessage: data.commitMessage,\n      branch: data.branch,\n      filesChanged: data.filesChanged,\n      insertions: data.insertions,\n      deletions: data.deletions,\n      status: \"COMPLETED\",\n      details: {\n        author: data.author,\n        pushedTo: data.pushedTo,\n        prCreated: data.prCreated || false,\n        prNumber: data.prNumber || null,\n      },\n    };\n\n    this.addLog(log);\n    return log.id;\n  }\n\n  /**\n   * Log de créditos debitados\n   */\n  logCreditDebit(data) {\n    const log = {\n      id: this.generateLogId(),\n      type: \"CREDIT_DEBIT\",\n      timestamp: new Date().toISOString(),\n      userId: data.userId,\n      automationId: data.automationId,\n      creditsDeducted: data.creditsDeducted,\n      creditsRemaining: data.creditsRemaining,\n      mode: data.mode,\n      breakdown: {\n        analysis: data.breakdown?.analysis || 0,\n        codeGeneration: data.breakdown?.codeGeneration || 0,\n        securityValidation: data.breakdown?.securityValidation || 0,\n        gitOperations: data.breakdown?.gitOperations || 0,\n      },\n      status: \"COMPLETED\",\n    };\n\n    this.addLog(log);\n    return log.id;\n  }\n\n  /**\n   * Log de erro\n   */\n  logError(data) {\n    const log = {\n      id: this.generateLogId(),\n      type: \"ERROR\",\n      timestamp: new Date().toISOString(),\n      automationId: data.automationId,\n      userId: data.userId,\n      errorType: data.errorType,\n      errorMessage: data.errorMessage,\n      errorStack: data.errorStack,\n      phase: data.phase, // 'ANALYSIS', 'CODE_GENERATION', 'SECURITY', 'GIT', etc\n      status: \"FAILED\",\n      details: {\n        recoveryAttempted: data.recoveryAttempted || false,\n        recoverySuccessful: data.recoverySuccessful || false,\n      },\n    };\n\n    this.addLog(log);\n    return log.id;\n  }\n\n  /**\n   * Log de conclusão de automação\n   */\n  logAutomationCompletion(data) {\n    const log = {\n      id: this.generateLogId(),\n      type: \"AUTOMATION_COMPLETION\",\n      timestamp: new Date().toISOString(),\n      automationId: data.automationId,\n      userId: data.userId,\n      status: data.status, // 'SUCCESS' ou 'FAILED'\n      totalDuration: data.totalDuration,\n      commitHash: data.commitHash,\n      prUrl: data.prUrl,\n      summary: {\n        filesCreated: data.filesCreated || 0,\n        filesModified: data.filesModified || 0,\n        filesDeleted: data.filesDeleted || 0,\n        linesAdded: data.linesAdded || 0,\n        linesRemoved: data.linesRemoved || 0,\n      },\n      details: {\n        specialist: data.specialist,\n        mode: data.mode,\n        creditsUsed: data.creditsUsed,\n      },\n    };\n\n    this.addLog(log);\n    return log.id;\n  }\n\n  /**\n   * Log de ação manual do usuário\n   */\n  logManualAction(data) {\n    const log = {\n      id: this.generateLogId(),\n      type: \"MANUAL_ACTION\",\n      timestamp: new Date().toISOString(),\n      userId: data.userId,\n      username: data.username,\n      action: data.action, // 'EDIT', 'REVIEW', 'APPROVE', 'REJECT', etc\n      targetFile: data.targetFile,\n      description: data.description,\n      status: \"COMPLETED\",\n      details: {\n        ipAddress: data.ipAddress,\n        sessionId: data.sessionId,\n      },\n    };\n\n    this.addLog(log);\n    return log.id;\n  }\n\n  /**\n   * Log de acesso ao repositório\n   */\n  logRepositoryAccess(data) {\n    const log = {\n      id: this.generateLogId(),\n      type: \"REPOSITORY_ACCESS\",\n      timestamp: new Date().toISOString(),\n      userId: data.userId,\n      action: data.action, // 'READ', 'WRITE', 'DELETE', etc\n      repository: data.repository,\n      branch: data.branch,\n      filesAccessed: data.filesAccessed,\n      status: \"COMPLETED\",\n      details: {\n        ipAddress: data.ipAddress,\n        userAgent: data.userAgent,\n      },\n    };\n\n    this.addLog(log);\n    return log.id;\n  }\n\n  /**\n   * Adicionar log à fila\n   */\n  addLog(log) {\n    this.logs.push(log);\n\n    // Manter limite de logs em memória\n    if (this.logs.length > this.maxLogs) {\n      this.logs = this.logs.slice(-this.maxLogs);\n    }\n\n    // Enviar para servidor (async)\n    this.persistLog(log).catch((err) => console.error(\"Erro ao persistir log:\", err));\n  }\n\n  /**\n   * Persistir log no servidor\n   */\n  async persistLog(log) {\n    try {\n      const response = await fetch(\"/api/audit-log\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(log),\n      });\n\n      if (!response.ok) {\n        console.error(\"Erro ao persistir log:\", response.status);\n      }\n    } catch (error) {\n      console.error(\"Erro ao enviar log:\", error);\n    }\n  }\n\n  /**\n   * Gerar ID único para log\n   */\n  generateLogId() {\n    return `LOG_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Buscar logs por filtros\n   */\n  searchLogs(filters) {\n    let results = this.logs;\n\n    if (filters.type) {\n      results = results.filter((log) => log.type === filters.type);\n    }\n\n    if (filters.userId) {\n      results = results.filter((log) => log.userId === filters.userId);\n    }\n\n    if (filters.status) {\n      results = results.filter((log) => log.status === filters.status);\n    }\n\n    if (filters.startDate) {\n      const start = new Date(filters.startDate);\n      results = results.filter((log) => new Date(log.timestamp) >= start);\n    }\n\n    if (filters.endDate) {\n      const end = new Date(filters.endDate);\n      results = results.filter((log) => new Date(log.timestamp) <= end);\n    }\n\n    if (filters.automationId) {\n      results = results.filter((log) => log.automationId === filters.automationId);\n    }\n\n    return results;\n  }\n\n  /**\n   * Gerar relatório de auditoria\n   */\n  generateAuditReport(filters = {}) {\n    const logs = this.searchLogs(filters);\n\n    const report = {\n      generatedAt: new Date().toISOString(),\n      filters,\n      summary: {\n        totalLogs: logs.length,\n        byType: {},\n        byStatus: {},\n        byUser: {},\n      },\n      details: logs,\n    };\n\n    // Contar por tipo\n    logs.forEach((log) => {\n      report.summary.byType[log.type] = (report.summary.byType[log.type] || 0) + 1;\n      report.summary.byStatus[log.status] = (report.summary.byStatus[log.status] || 0) + 1;\n      report.summary.byUser[log.userId] = (report.summary.byUser[log.userId] || 0) + 1;\n    });\n\n    return report;\n  }\n\n  /**\n   * Exportar logs em JSON\n   */\n  exportLogs(filters = {}) {\n    const logs = this.searchLogs(filters);\n    return JSON.stringify(logs, null, 2);\n  }\n\n  /**\n   * Exportar logs em CSV\n   */\n  exportLogsCSV(filters = {}) {\n    const logs = this.searchLogs(filters);\n\n    if (logs.length === 0) return \"\";\n\n    // Headers\n    const headers = Object.keys(logs[0]);\n    const csv = [headers.join(\",\")];\n\n    // Rows\n    logs.forEach((log) => {\n      const row = headers.map((header) => {\n        const value = log[header];\n        if (typeof value === \"object\") {\n          return `\"${JSON.stringify(value).replace(/\"/g, '\"\"')}\"`;\n        }\n        return `\"${String(value).replace(/\"/g, '\"\"')}\"`;\n      });\n      csv.push(row.join(\",\"));\n    });\n\n    return csv.join(\"\\n\");\n  }\n\n  /**\n   * Limpar logs antigos\n   */\n  clearOldLogs(daysToKeep = 30) {\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - daysToKeep);\n\n    const beforeCount = this.logs.length;\n    this.logs = this.logs.filter((log) => new Date(log.timestamp) > cutoffDate);\n\n    return {\n      logsRemoved: beforeCount - this.logs.length,\n      logsRemaining: this.logs.length,\n    };\n  }\n\n  /**\n   * Obter estatísticas\n   */\n  getStatistics() {\n    const stats = {\n      totalLogs: this.logs.length,\n      logTypes: {},\n      statusCounts: {},\n      userActivity: {},\n      timeRange: {\n        oldest: this.logs.length > 0 ? this.logs[0].timestamp : null,\n        newest: this.logs.length > 0 ? this.logs[this.logs.length - 1].timestamp : null,\n      },\n    };\n\n    this.logs.forEach((log) => {\n      stats.logTypes[log.type] = (stats.logTypes[log.type] || 0) + 1;\n      stats.statusCounts[log.status] = (stats.statusCounts[log.status] || 0) + 1;\n\n      if (log.userId) {\n        stats.userActivity[log.userId] = (stats.userActivity[log.userId] || 0) + 1;\n      }\n    });\n\n    return stats;\n  }\n}\n\n// Exportar\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports = AuditLogger;\n}\n\nexport default AuditLogger;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,IAAI,GAAG,EAAE;IACd,IAAI,CAACC,OAAO,GAAG,KAAK,CAAC,CAAC;EACxB;;EAEA;AACF;AACA;EACEC,oBAAoBA,CAACC,IAAI,EAAE;IACzB,MAAMC,GAAG,GAAG;MACVC,EAAE,EAAE,IAAI,CAACC,aAAa,CAAC,CAAC;MACxBC,IAAI,EAAE,oBAAoB;MAC1BC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACnCC,MAAM,EAAER,IAAI,CAACQ,MAAM;MACnBC,QAAQ,EAAET,IAAI,CAACS,QAAQ;MACvBC,OAAO,EAAEV,IAAI,CAACU,OAAO;MACrBC,IAAI,EAAEX,IAAI,CAACW,IAAI;MAAE;MACjBC,kBAAkB,EAAEZ,IAAI,CAACY,kBAAkB;MAC3CC,mBAAmB,EAAEb,IAAI,CAACa,mBAAmB;MAC7CC,WAAW,EAAEd,IAAI,CAACc,WAAW;MAC7BC,MAAM,EAAE,WAAW;MACnBC,OAAO,EAAE;QACPC,SAAS,EAAEjB,IAAI,CAACiB,SAAS;QACzBC,SAAS,EAAElB,IAAI,CAACkB,SAAS;QACzBC,SAAS,EAAEnB,IAAI,CAACmB;MAClB;IACF,CAAC;IAED,IAAI,CAACC,MAAM,CAACnB,GAAG,CAAC;IAChB,OAAOA,GAAG,CAACC,EAAE;EACf;;EAEA;AACF;AACA;EACEmB,eAAeA,CAACrB,IAAI,EAAE;IACpB,MAAMC,GAAG,GAAG;MACVC,EAAE,EAAE,IAAI,CAACC,aAAa,CAAC,CAAC;MACxBC,IAAI,EAAE,eAAe;MACrBC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACnCe,YAAY,EAAEtB,IAAI,CAACsB,YAAY;MAC/BC,UAAU,EAAEvB,IAAI,CAACuB,UAAU;MAC3BC,aAAa,EAAExB,IAAI,CAACwB,aAAa;MACjCC,aAAa,EAAEzB,IAAI,CAACyB,aAAa;MACjCC,WAAW,EAAE1B,IAAI,CAAC0B,WAAW;MAC7BX,MAAM,EAAE,WAAW;MACnBC,OAAO,EAAE;QACPW,YAAY,EAAE3B,IAAI,CAAC2B,YAAY;QAC/BC,KAAK,EAAE5B,IAAI,CAAC4B,KAAK;QACjBC,WAAW,EAAE7B,IAAI,CAAC6B;MACpB;IACF,CAAC;IAED,IAAI,CAACT,MAAM,CAACnB,GAAG,CAAC;IAChB,OAAOA,GAAG,CAACC,EAAE;EACf;;EAEA;AACF;AACA;EACE4B,qBAAqBA,CAAC9B,IAAI,EAAE;IAC1B,MAAMC,GAAG,GAAG;MACVC,EAAE,EAAE,IAAI,CAACC,aAAa,CAAC,CAAC;MACxBC,IAAI,EAAE,qBAAqB;MAC3BC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACnCe,YAAY,EAAEtB,IAAI,CAACsB,YAAY;MAC/BS,YAAY,EAAE/B,IAAI,CAAC+B,YAAY;MAC/BhB,MAAM,EAAEf,IAAI,CAACgC,OAAO,GAAG,QAAQ,GAAG,SAAS;MAC3CC,QAAQ,EAAEjC,IAAI,CAACiC,QAAQ;MACvBC,MAAM,EAAElC,IAAI,CAACkC,MAAM,IAAI,EAAE;MACzBC,QAAQ,EAAEnC,IAAI,CAACmC,QAAQ,IAAI,EAAE;MAC7BnB,OAAO,EAAE;QACPoB,cAAc,EAAEpC,IAAI,CAACoC,cAAc;QACnCC,eAAe,EAAErC,IAAI,CAACqC,eAAe,IAAI,EAAE;QAC3CC,gBAAgB,EAAEtC,IAAI,CAACsC,gBAAgB,IAAI;MAC7C;IACF,CAAC;IAED,IAAI,CAAClB,MAAM,CAACnB,GAAG,CAAC;IAChB,OAAOA,GAAG,CAACC,EAAE;EACf;;EAEA;AACF;AACA;EACEqC,YAAYA,CAACvC,IAAI,EAAE;IACjB,MAAMC,GAAG,GAAG;MACVC,EAAE,EAAE,IAAI,CAACC,aAAa,CAAC,CAAC;MACxBC,IAAI,EAAE,YAAY;MAClBC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACnCe,YAAY,EAAEtB,IAAI,CAACsB,YAAY;MAC/BkB,UAAU,EAAExC,IAAI,CAACwC,UAAU;MAC3BC,aAAa,EAAEzC,IAAI,CAACyC,aAAa;MACjCC,MAAM,EAAE1C,IAAI,CAAC0C,MAAM;MACnBC,YAAY,EAAE3C,IAAI,CAAC2C,YAAY;MAC/BC,UAAU,EAAE5C,IAAI,CAAC4C,UAAU;MAC3BC,SAAS,EAAE7C,IAAI,CAAC6C,SAAS;MACzB9B,MAAM,EAAE,WAAW;MACnBC,OAAO,EAAE;QACP8B,MAAM,EAAE9C,IAAI,CAAC8C,MAAM;QACnBC,QAAQ,EAAE/C,IAAI,CAAC+C,QAAQ;QACvBC,SAAS,EAAEhD,IAAI,CAACgD,SAAS,IAAI,KAAK;QAClCC,QAAQ,EAAEjD,IAAI,CAACiD,QAAQ,IAAI;MAC7B;IACF,CAAC;IAED,IAAI,CAAC7B,MAAM,CAACnB,GAAG,CAAC;IAChB,OAAOA,GAAG,CAACC,EAAE;EACf;;EAEA;AACF;AACA;EACEgD,cAAcA,CAAClD,IAAI,EAAE;IACnB,MAAMC,GAAG,GAAG;MACVC,EAAE,EAAE,IAAI,CAACC,aAAa,CAAC,CAAC;MACxBC,IAAI,EAAE,cAAc;MACpBC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACnCC,MAAM,EAAER,IAAI,CAACQ,MAAM;MACnBc,YAAY,EAAEtB,IAAI,CAACsB,YAAY;MAC/B6B,eAAe,EAAEnD,IAAI,CAACmD,eAAe;MACrCC,gBAAgB,EAAEpD,IAAI,CAACoD,gBAAgB;MACvCzC,IAAI,EAAEX,IAAI,CAACW,IAAI;MACf0C,SAAS,EAAE;QACTC,QAAQ,EAAEtD,IAAI,CAACqD,SAAS,EAAEC,QAAQ,IAAI,CAAC;QACvCC,cAAc,EAAEvD,IAAI,CAACqD,SAAS,EAAEE,cAAc,IAAI,CAAC;QACnDC,kBAAkB,EAAExD,IAAI,CAACqD,SAAS,EAAEG,kBAAkB,IAAI,CAAC;QAC3DC,aAAa,EAAEzD,IAAI,CAACqD,SAAS,EAAEI,aAAa,IAAI;MAClD,CAAC;MACD1C,MAAM,EAAE;IACV,CAAC;IAED,IAAI,CAACK,MAAM,CAACnB,GAAG,CAAC;IAChB,OAAOA,GAAG,CAACC,EAAE;EACf;;EAEA;AACF;AACA;EACEwD,QAAQA,CAAC1D,IAAI,EAAE;IACb,MAAMC,GAAG,GAAG;MACVC,EAAE,EAAE,IAAI,CAACC,aAAa,CAAC,CAAC;MACxBC,IAAI,EAAE,OAAO;MACbC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACnCe,YAAY,EAAEtB,IAAI,CAACsB,YAAY;MAC/Bd,MAAM,EAAER,IAAI,CAACQ,MAAM;MACnBmD,SAAS,EAAE3D,IAAI,CAAC2D,SAAS;MACzBC,YAAY,EAAE5D,IAAI,CAAC4D,YAAY;MAC/BC,UAAU,EAAE7D,IAAI,CAAC6D,UAAU;MAC3BC,KAAK,EAAE9D,IAAI,CAAC8D,KAAK;MAAE;MACnB/C,MAAM,EAAE,QAAQ;MAChBC,OAAO,EAAE;QACP+C,iBAAiB,EAAE/D,IAAI,CAAC+D,iBAAiB,IAAI,KAAK;QAClDC,kBAAkB,EAAEhE,IAAI,CAACgE,kBAAkB,IAAI;MACjD;IACF,CAAC;IAED,IAAI,CAAC5C,MAAM,CAACnB,GAAG,CAAC;IAChB,OAAOA,GAAG,CAACC,EAAE;EACf;;EAEA;AACF;AACA;EACE+D,uBAAuBA,CAACjE,IAAI,EAAE;IAC5B,MAAMC,GAAG,GAAG;MACVC,EAAE,EAAE,IAAI,CAACC,aAAa,CAAC,CAAC;MACxBC,IAAI,EAAE,uBAAuB;MAC7BC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACnCe,YAAY,EAAEtB,IAAI,CAACsB,YAAY;MAC/Bd,MAAM,EAAER,IAAI,CAACQ,MAAM;MACnBO,MAAM,EAAEf,IAAI,CAACe,MAAM;MAAE;MACrBmD,aAAa,EAAElE,IAAI,CAACkE,aAAa;MACjC1B,UAAU,EAAExC,IAAI,CAACwC,UAAU;MAC3B2B,KAAK,EAAEnE,IAAI,CAACmE,KAAK;MACjBC,OAAO,EAAE;QACPC,YAAY,EAAErE,IAAI,CAACqE,YAAY,IAAI,CAAC;QACpCC,aAAa,EAAEtE,IAAI,CAACsE,aAAa,IAAI,CAAC;QACtCC,YAAY,EAAEvE,IAAI,CAACuE,YAAY,IAAI,CAAC;QACpCC,UAAU,EAAExE,IAAI,CAACwE,UAAU,IAAI,CAAC;QAChCC,YAAY,EAAEzE,IAAI,CAACyE,YAAY,IAAI;MACrC,CAAC;MACDzD,OAAO,EAAE;QACPO,UAAU,EAAEvB,IAAI,CAACuB,UAAU;QAC3BZ,IAAI,EAAEX,IAAI,CAACW,IAAI;QACf+D,WAAW,EAAE1E,IAAI,CAAC0E;MACpB;IACF,CAAC;IAED,IAAI,CAACtD,MAAM,CAACnB,GAAG,CAAC;IAChB,OAAOA,GAAG,CAACC,EAAE;EACf;;EAEA;AACF;AACA;EACEyE,eAAeA,CAAC3E,IAAI,EAAE;IACpB,MAAMC,GAAG,GAAG;MACVC,EAAE,EAAE,IAAI,CAACC,aAAa,CAAC,CAAC;MACxBC,IAAI,EAAE,eAAe;MACrBC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACnCC,MAAM,EAAER,IAAI,CAACQ,MAAM;MACnBC,QAAQ,EAAET,IAAI,CAACS,QAAQ;MACvBmE,MAAM,EAAE5E,IAAI,CAAC4E,MAAM;MAAE;MACrBC,UAAU,EAAE7E,IAAI,CAAC6E,UAAU;MAC3B/D,WAAW,EAAEd,IAAI,CAACc,WAAW;MAC7BC,MAAM,EAAE,WAAW;MACnBC,OAAO,EAAE;QACPC,SAAS,EAAEjB,IAAI,CAACiB,SAAS;QACzBE,SAAS,EAAEnB,IAAI,CAACmB;MAClB;IACF,CAAC;IAED,IAAI,CAACC,MAAM,CAACnB,GAAG,CAAC;IAChB,OAAOA,GAAG,CAACC,EAAE;EACf;;EAEA;AACF;AACA;EACE4E,mBAAmBA,CAAC9E,IAAI,EAAE;IACxB,MAAMC,GAAG,GAAG;MACVC,EAAE,EAAE,IAAI,CAACC,aAAa,CAAC,CAAC;MACxBC,IAAI,EAAE,mBAAmB;MACzBC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACnCC,MAAM,EAAER,IAAI,CAACQ,MAAM;MACnBoE,MAAM,EAAE5E,IAAI,CAAC4E,MAAM;MAAE;MACrBG,UAAU,EAAE/E,IAAI,CAAC+E,UAAU;MAC3BrC,MAAM,EAAE1C,IAAI,CAAC0C,MAAM;MACnBsC,aAAa,EAAEhF,IAAI,CAACgF,aAAa;MACjCjE,MAAM,EAAE,WAAW;MACnBC,OAAO,EAAE;QACPC,SAAS,EAAEjB,IAAI,CAACiB,SAAS;QACzBC,SAAS,EAAElB,IAAI,CAACkB;MAClB;IACF,CAAC;IAED,IAAI,CAACE,MAAM,CAACnB,GAAG,CAAC;IAChB,OAAOA,GAAG,CAACC,EAAE;EACf;;EAEA;AACF;AACA;EACEkB,MAAMA,CAACnB,GAAG,EAAE;IACV,IAAI,CAACJ,IAAI,CAACoF,IAAI,CAAChF,GAAG,CAAC;;IAEnB;IACA,IAAI,IAAI,CAACJ,IAAI,CAACqF,MAAM,GAAG,IAAI,CAACpF,OAAO,EAAE;MACnC,IAAI,CAACD,IAAI,GAAG,IAAI,CAACA,IAAI,CAACsF,KAAK,CAAC,CAAC,IAAI,CAACrF,OAAO,CAAC;IAC5C;;IAEA;IACA,IAAI,CAACsF,UAAU,CAACnF,GAAG,CAAC,CAACoF,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC,CAAC;EACnF;;EAEA;AACF;AACA;EACE,MAAMF,UAAUA,CAACnF,GAAG,EAAE;IACpB,IAAI;MACF,MAAMwF,QAAQ,GAAG,MAAMC,KAAK,CAAC,gBAAgB,EAAE;QAC7CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC9F,GAAG;MAC1B,CAAC,CAAC;MAEF,IAAI,CAACwF,QAAQ,CAACO,EAAE,EAAE;QAChBT,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEC,QAAQ,CAAC1E,MAAM,CAAC;MAC1D;IACF,CAAC,CAAC,OAAOyE,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC7C;EACF;;EAEA;AACF;AACA;EACErF,aAAaA,CAAA,EAAG;IACd,OAAO,OAAOG,IAAI,CAAC2F,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;EACvE;;EAEA;AACF;AACA;EACEC,UAAUA,CAACC,OAAO,EAAE;IAClB,IAAIC,OAAO,GAAG,IAAI,CAAC3G,IAAI;IAEvB,IAAI0G,OAAO,CAACnG,IAAI,EAAE;MAChBoG,OAAO,GAAGA,OAAO,CAACC,MAAM,CAAExG,GAAG,IAAKA,GAAG,CAACG,IAAI,KAAKmG,OAAO,CAACnG,IAAI,CAAC;IAC9D;IAEA,IAAImG,OAAO,CAAC/F,MAAM,EAAE;MAClBgG,OAAO,GAAGA,OAAO,CAACC,MAAM,CAAExG,GAAG,IAAKA,GAAG,CAACO,MAAM,KAAK+F,OAAO,CAAC/F,MAAM,CAAC;IAClE;IAEA,IAAI+F,OAAO,CAACxF,MAAM,EAAE;MAClByF,OAAO,GAAGA,OAAO,CAACC,MAAM,CAAExG,GAAG,IAAKA,GAAG,CAACc,MAAM,KAAKwF,OAAO,CAACxF,MAAM,CAAC;IAClE;IAEA,IAAIwF,OAAO,CAACG,SAAS,EAAE;MACrB,MAAMC,KAAK,GAAG,IAAIrG,IAAI,CAACiG,OAAO,CAACG,SAAS,CAAC;MACzCF,OAAO,GAAGA,OAAO,CAACC,MAAM,CAAExG,GAAG,IAAK,IAAIK,IAAI,CAACL,GAAG,CAACI,SAAS,CAAC,IAAIsG,KAAK,CAAC;IACrE;IAEA,IAAIJ,OAAO,CAACK,OAAO,EAAE;MACnB,MAAMC,GAAG,GAAG,IAAIvG,IAAI,CAACiG,OAAO,CAACK,OAAO,CAAC;MACrCJ,OAAO,GAAGA,OAAO,CAACC,MAAM,CAAExG,GAAG,IAAK,IAAIK,IAAI,CAACL,GAAG,CAACI,SAAS,CAAC,IAAIwG,GAAG,CAAC;IACnE;IAEA,IAAIN,OAAO,CAACjF,YAAY,EAAE;MACxBkF,OAAO,GAAGA,OAAO,CAACC,MAAM,CAAExG,GAAG,IAAKA,GAAG,CAACqB,YAAY,KAAKiF,OAAO,CAACjF,YAAY,CAAC;IAC9E;IAEA,OAAOkF,OAAO;EAChB;;EAEA;AACF;AACA;EACEM,mBAAmBA,CAACP,OAAO,GAAG,CAAC,CAAC,EAAE;IAChC,MAAM1G,IAAI,GAAG,IAAI,CAACyG,UAAU,CAACC,OAAO,CAAC;IAErC,MAAMQ,MAAM,GAAG;MACbC,WAAW,EAAE,IAAI1G,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;MACrCgG,OAAO;MACPnC,OAAO,EAAE;QACP6C,SAAS,EAAEpH,IAAI,CAACqF,MAAM;QACtBgC,MAAM,EAAE,CAAC,CAAC;QACVC,QAAQ,EAAE,CAAC,CAAC;QACZC,MAAM,EAAE,CAAC;MACX,CAAC;MACDpG,OAAO,EAAEnB;IACX,CAAC;;IAED;IACAA,IAAI,CAACwH,OAAO,CAAEpH,GAAG,IAAK;MACpB8G,MAAM,CAAC3C,OAAO,CAAC8C,MAAM,CAACjH,GAAG,CAACG,IAAI,CAAC,GAAG,CAAC2G,MAAM,CAAC3C,OAAO,CAAC8C,MAAM,CAACjH,GAAG,CAACG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;MAC5E2G,MAAM,CAAC3C,OAAO,CAAC+C,QAAQ,CAAClH,GAAG,CAACc,MAAM,CAAC,GAAG,CAACgG,MAAM,CAAC3C,OAAO,CAAC+C,QAAQ,CAAClH,GAAG,CAACc,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;MACpFgG,MAAM,CAAC3C,OAAO,CAACgD,MAAM,CAACnH,GAAG,CAACO,MAAM,CAAC,GAAG,CAACuG,MAAM,CAAC3C,OAAO,CAACgD,MAAM,CAACnH,GAAG,CAACO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;IAClF,CAAC,CAAC;IAEF,OAAOuG,MAAM;EACf;;EAEA;AACF;AACA;EACEO,UAAUA,CAACf,OAAO,GAAG,CAAC,CAAC,EAAE;IACvB,MAAM1G,IAAI,GAAG,IAAI,CAACyG,UAAU,CAACC,OAAO,CAAC;IACrC,OAAOT,IAAI,CAACC,SAAS,CAAClG,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;EACtC;;EAEA;AACF;AACA;EACE0H,aAAaA,CAAChB,OAAO,GAAG,CAAC,CAAC,EAAE;IAC1B,MAAM1G,IAAI,GAAG,IAAI,CAACyG,UAAU,CAACC,OAAO,CAAC;IAErC,IAAI1G,IAAI,CAACqF,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE;;IAEhC;IACA,MAAMU,OAAO,GAAG4B,MAAM,CAACC,IAAI,CAAC5H,IAAI,CAAC,CAAC,CAAC,CAAC;IACpC,MAAM6H,GAAG,GAAG,CAAC9B,OAAO,CAAC+B,IAAI,CAAC,GAAG,CAAC,CAAC;;IAE/B;IACA9H,IAAI,CAACwH,OAAO,CAAEpH,GAAG,IAAK;MACpB,MAAM2H,GAAG,GAAGhC,OAAO,CAACiC,GAAG,CAAEC,MAAM,IAAK;QAClC,MAAMC,KAAK,GAAG9H,GAAG,CAAC6H,MAAM,CAAC;QACzB,IAAI,OAAOC,KAAK,KAAK,QAAQ,EAAE;UAC7B,OAAO,IAAIjC,IAAI,CAACC,SAAS,CAACgC,KAAK,CAAC,CAACC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG;QACzD;QACA,OAAO,IAAIC,MAAM,CAACF,KAAK,CAAC,CAACC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,GAAG;MACjD,CAAC,CAAC;MACFN,GAAG,CAACzC,IAAI,CAAC2C,GAAG,CAACD,IAAI,CAAC,GAAG,CAAC,CAAC;IACzB,CAAC,CAAC;IAEF,OAAOD,GAAG,CAACC,IAAI,CAAC,IAAI,CAAC;EACvB;;EAEA;AACF;AACA;EACEO,YAAYA,CAACC,UAAU,GAAG,EAAE,EAAE;IAC5B,MAAMC,UAAU,GAAG,IAAI9H,IAAI,CAAC,CAAC;IAC7B8H,UAAU,CAACC,OAAO,CAACD,UAAU,CAACE,OAAO,CAAC,CAAC,GAAGH,UAAU,CAAC;IAErD,MAAMI,WAAW,GAAG,IAAI,CAAC1I,IAAI,CAACqF,MAAM;IACpC,IAAI,CAACrF,IAAI,GAAG,IAAI,CAACA,IAAI,CAAC4G,MAAM,CAAExG,GAAG,IAAK,IAAIK,IAAI,CAACL,GAAG,CAACI,SAAS,CAAC,GAAG+H,UAAU,CAAC;IAE3E,OAAO;MACLI,WAAW,EAAED,WAAW,GAAG,IAAI,CAAC1I,IAAI,CAACqF,MAAM;MAC3CuD,aAAa,EAAE,IAAI,CAAC5I,IAAI,CAACqF;IAC3B,CAAC;EACH;;EAEA;AACF;AACA;EACEwD,aAAaA,CAAA,EAAG;IACd,MAAMC,KAAK,GAAG;MACZ1B,SAAS,EAAE,IAAI,CAACpH,IAAI,CAACqF,MAAM;MAC3B0D,QAAQ,EAAE,CAAC,CAAC;MACZC,YAAY,EAAE,CAAC,CAAC;MAChBC,YAAY,EAAE,CAAC,CAAC;MAChBC,SAAS,EAAE;QACTC,MAAM,EAAE,IAAI,CAACnJ,IAAI,CAACqF,MAAM,GAAG,CAAC,GAAG,IAAI,CAACrF,IAAI,CAAC,CAAC,CAAC,CAACQ,SAAS,GAAG,IAAI;QAC5D4I,MAAM,EAAE,IAAI,CAACpJ,IAAI,CAACqF,MAAM,GAAG,CAAC,GAAG,IAAI,CAACrF,IAAI,CAAC,IAAI,CAACA,IAAI,CAACqF,MAAM,GAAG,CAAC,CAAC,CAAC7E,SAAS,GAAG;MAC7E;IACF,CAAC;IAED,IAAI,CAACR,IAAI,CAACwH,OAAO,CAAEpH,GAAG,IAAK;MACzB0I,KAAK,CAACC,QAAQ,CAAC3I,GAAG,CAACG,IAAI,CAAC,GAAG,CAACuI,KAAK,CAACC,QAAQ,CAAC3I,GAAG,CAACG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;MAC9DuI,KAAK,CAACE,YAAY,CAAC5I,GAAG,CAACc,MAAM,CAAC,GAAG,CAAC4H,KAAK,CAACE,YAAY,CAAC5I,GAAG,CAACc,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;MAE1E,IAAId,GAAG,CAACO,MAAM,EAAE;QACdmI,KAAK,CAACG,YAAY,CAAC7I,GAAG,CAACO,MAAM,CAAC,GAAG,CAACmI,KAAK,CAACG,YAAY,CAAC7I,GAAG,CAACO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;MAC5E;IACF,CAAC,CAAC;IAEF,OAAOmI,KAAK;EACd;AACF;;AAEA;AACA,IAAI,OAAOO,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACC,OAAO,EAAE;EACnDD,MAAM,CAACC,OAAO,GAAGxJ,WAAW;AAC9B;AAAC,IAAAyJ,QAAA,GAAAD,OAAA,CAAAE,OAAA,GAEc1J,WAAW","ignoreList":[]}