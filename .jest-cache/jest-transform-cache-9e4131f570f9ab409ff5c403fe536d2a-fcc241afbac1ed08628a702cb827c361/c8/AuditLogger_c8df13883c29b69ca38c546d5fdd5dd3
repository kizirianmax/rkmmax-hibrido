dee0ffb2e8d4850d4d472119d31aa30b
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
/**
 * AUDIT LOGGER
 * Registra todas as ações de automação para auditoria e compliance
 * Rastreia: Quem pediu, O que foi feito, Quando, Status, Detalhes
 */

class AuditLogger {
  constructor() {
    this.logs = [];
    this.maxLogs = 10000; // Máximo de logs em memória
  }

  /**
   * Log de requisição de automação
   */
  logAutomationRequest(data) {
    const log = {
      id: this.generateLogId(),
      type: "AUTOMATION_REQUEST",
      timestamp: new Date().toISOString(),
      userId: data.userId,
      username: data.username,
      command: data.command,
      mode: data.mode,
      // 'OPTIMIZED' ou 'HYBRID'
      selectedSpecialist: data.selectedSpecialist,
      suggestedSpecialist: data.suggestedSpecialist,
      description: data.description,
      status: "INITIATED",
      details: {
        ipAddress: data.ipAddress,
        userAgent: data.userAgent,
        sessionId: data.sessionId
      }
    };
    this.addLog(log);
    return log.id;
  }

  /**
   * Log de análise de código
   */
  logCodeAnalysis(data) {
    const log = {
      id: this.generateLogId(),
      type: "CODE_ANALYSIS",
      timestamp: new Date().toISOString(),
      automationId: data.automationId,
      specialist: data.specialist,
      filesAnalyzed: data.filesAnalyzed,
      codeGenerated: data.codeGenerated,
      linesOfCode: data.linesOfCode,
      status: "COMPLETED",
      details: {
        analysisTime: data.analysisTime,
        model: data.model,
        temperature: data.temperature
      }
    };
    this.addLog(log);
    return log.id;
  }

  /**
   * Log de validação de segurança
   */
  logSecurityValidation(data) {
    const log = {
      id: this.generateLogId(),
      type: "SECURITY_VALIDATION",
      timestamp: new Date().toISOString(),
      automationId: data.automationId,
      filesChecked: data.filesChecked,
      status: data.isValid ? "PASSED" : "BLOCKED",
      severity: data.severity,
      errors: data.errors || [],
      warnings: data.warnings || [],
      details: {
        validationTime: data.validationTime,
        blockedPatterns: data.blockedPatterns || [],
        credentialsFound: data.credentialsFound || []
      }
    };
    this.addLog(log);
    return log.id;
  }

  /**
   * Log de commit automático
   */
  logGitCommit(data) {
    const log = {
      id: this.generateLogId(),
      type: "GIT_COMMIT",
      timestamp: new Date().toISOString(),
      automationId: data.automationId,
      commitHash: data.commitHash,
      commitMessage: data.commitMessage,
      branch: data.branch,
      filesChanged: data.filesChanged,
      insertions: data.insertions,
      deletions: data.deletions,
      status: "COMPLETED",
      details: {
        author: data.author,
        pushedTo: data.pushedTo,
        prCreated: data.prCreated || false,
        prNumber: data.prNumber || null
      }
    };
    this.addLog(log);
    return log.id;
  }

  /**
   * Log de créditos debitados
   */
  logCreditDebit(data) {
    const log = {
      id: this.generateLogId(),
      type: "CREDIT_DEBIT",
      timestamp: new Date().toISOString(),
      userId: data.userId,
      automationId: data.automationId,
      creditsDeducted: data.creditsDeducted,
      creditsRemaining: data.creditsRemaining,
      mode: data.mode,
      breakdown: {
        analysis: data.breakdown?.analysis || 0,
        codeGeneration: data.breakdown?.codeGeneration || 0,
        securityValidation: data.breakdown?.securityValidation || 0,
        gitOperations: data.breakdown?.gitOperations || 0
      },
      status: "COMPLETED"
    };
    this.addLog(log);
    return log.id;
  }

  /**
   * Log de erro
   */
  logError(data) {
    const log = {
      id: this.generateLogId(),
      type: "ERROR",
      timestamp: new Date().toISOString(),
      automationId: data.automationId,
      userId: data.userId,
      errorType: data.errorType,
      errorMessage: data.errorMessage,
      errorStack: data.errorStack,
      phase: data.phase,
      // 'ANALYSIS', 'CODE_GENERATION', 'SECURITY', 'GIT', etc
      status: "FAILED",
      details: {
        recoveryAttempted: data.recoveryAttempted || false,
        recoverySuccessful: data.recoverySuccessful || false
      }
    };
    this.addLog(log);
    return log.id;
  }

  /**
   * Log de conclusão de automação
   */
  logAutomationCompletion(data) {
    const log = {
      id: this.generateLogId(),
      type: "AUTOMATION_COMPLETION",
      timestamp: new Date().toISOString(),
      automationId: data.automationId,
      userId: data.userId,
      status: data.status,
      // 'SUCCESS' ou 'FAILED'
      totalDuration: data.totalDuration,
      commitHash: data.commitHash,
      prUrl: data.prUrl,
      summary: {
        filesCreated: data.filesCreated || 0,
        filesModified: data.filesModified || 0,
        filesDeleted: data.filesDeleted || 0,
        linesAdded: data.linesAdded || 0,
        linesRemoved: data.linesRemoved || 0
      },
      details: {
        specialist: data.specialist,
        mode: data.mode,
        creditsUsed: data.creditsUsed
      }
    };
    this.addLog(log);
    return log.id;
  }

  /**
   * Log de ação manual do usuário
   */
  logManualAction(data) {
    const log = {
      id: this.generateLogId(),
      type: "MANUAL_ACTION",
      timestamp: new Date().toISOString(),
      userId: data.userId,
      username: data.username,
      action: data.action,
      // 'EDIT', 'REVIEW', 'APPROVE', 'REJECT', etc
      targetFile: data.targetFile,
      description: data.description,
      status: "COMPLETED",
      details: {
        ipAddress: data.ipAddress,
        sessionId: data.sessionId
      }
    };
    this.addLog(log);
    return log.id;
  }

  /**
   * Log de acesso ao repositório
   */
  logRepositoryAccess(data) {
    const log = {
      id: this.generateLogId(),
      type: "REPOSITORY_ACCESS",
      timestamp: new Date().toISOString(),
      userId: data.userId,
      action: data.action,
      // 'READ', 'WRITE', 'DELETE', etc
      repository: data.repository,
      branch: data.branch,
      filesAccessed: data.filesAccessed,
      status: "COMPLETED",
      details: {
        ipAddress: data.ipAddress,
        userAgent: data.userAgent
      }
    };
    this.addLog(log);
    return log.id;
  }

  /**
   * Adicionar log à fila
   */
  addLog(log) {
    this.logs.push(log);

    // Manter limite de logs em memória
    if (this.logs.length > this.maxLogs) {
      this.logs = this.logs.slice(-this.maxLogs);
    }

    // Enviar para servidor (async)
    this.persistLog(log).catch(err => console.error("Erro ao persistir log:", err));
  }

  /**
   * Persistir log no servidor
   */
  async persistLog(log) {
    try {
      const response = await fetch("/api/audit-log", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(log)
      });
      if (!response.ok) {
        console.error("Erro ao persistir log:", response.status);
      }
    } catch (error) {
      console.error("Erro ao enviar log:", error);
    }
  }

  /**
   * Gerar ID único para log
   */
  generateLogId() {
    return `LOG_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }

  /**
   * Buscar logs por filtros
   */
  searchLogs(filters) {
    let results = this.logs;
    if (filters.type) {
      results = results.filter(log => log.type === filters.type);
    }
    if (filters.userId) {
      results = results.filter(log => log.userId === filters.userId);
    }
    if (filters.status) {
      results = results.filter(log => log.status === filters.status);
    }
    if (filters.startDate) {
      const start = new Date(filters.startDate);
      results = results.filter(log => new Date(log.timestamp) >= start);
    }
    if (filters.endDate) {
      const end = new Date(filters.endDate);
      results = results.filter(log => new Date(log.timestamp) <= end);
    }
    if (filters.automationId) {
      results = results.filter(log => log.automationId === filters.automationId);
    }
    return results;
  }

  /**
   * Gerar relatório de auditoria
   */
  generateAuditReport(filters = {}) {
    const logs = this.searchLogs(filters);
    const report = {
      generatedAt: new Date().toISOString(),
      filters,
      summary: {
        totalLogs: logs.length,
        byType: {},
        byStatus: {},
        byUser: {}
      },
      details: logs
    };

    // Contar por tipo
    logs.forEach(log => {
      report.summary.byType[log.type] = (report.summary.byType[log.type] || 0) + 1;
      report.summary.byStatus[log.status] = (report.summary.byStatus[log.status] || 0) + 1;
      report.summary.byUser[log.userId] = (report.summary.byUser[log.userId] || 0) + 1;
    });
    return report;
  }

  /**
   * Exportar logs em JSON
   */
  exportLogs(filters = {}) {
    const logs = this.searchLogs(filters);
    return JSON.stringify(logs, null, 2);
  }

  /**
   * Exportar logs em CSV
   */
  exportLogsCSV(filters = {}) {
    const logs = this.searchLogs(filters);
    if (logs.length === 0) return "";

    // Headers
    const headers = Object.keys(logs[0]);
    const csv = [headers.join(",")];

    // Rows
    logs.forEach(log => {
      const row = headers.map(header => {
        const value = log[header];
        if (typeof value === "object") {
          return `"${JSON.stringify(value).replace(/"/g, '""')}"`;
        }
        return `"${String(value).replace(/"/g, '""')}"`;
      });
      csv.push(row.join(","));
    });
    return csv.join("\n");
  }

  /**
   * Limpar logs antigos
   */
  clearOldLogs(daysToKeep = 30) {
    const cutoffDate = new Date();
    cutoffDate.setDate(cutoffDate.getDate() - daysToKeep);
    const beforeCount = this.logs.length;
    this.logs = this.logs.filter(log => new Date(log.timestamp) > cutoffDate);
    return {
      logsRemoved: beforeCount - this.logs.length,
      logsRemaining: this.logs.length
    };
  }

  /**
   * Obter estatísticas
   */
  getStatistics() {
    const stats = {
      totalLogs: this.logs.length,
      logTypes: {},
      statusCounts: {},
      userActivity: {},
      timeRange: {
        oldest: this.logs.length > 0 ? this.logs[0].timestamp : null,
        newest: this.logs.length > 0 ? this.logs[this.logs.length - 1].timestamp : null
      }
    };
    this.logs.forEach(log => {
      stats.logTypes[log.type] = (stats.logTypes[log.type] || 0) + 1;
      stats.statusCounts[log.status] = (stats.statusCounts[log.status] || 0) + 1;
      if (log.userId) {
        stats.userActivity[log.userId] = (stats.userActivity[log.userId] || 0) + 1;
      }
    });
    return stats;
  }
}

// Exportar
if (typeof module !== "undefined" && module.exports) {
  module.exports = AuditLogger;
}
var _default = exports.default = AuditLogger;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBdWRpdExvZ2dlciIsImNvbnN0cnVjdG9yIiwibG9ncyIsIm1heExvZ3MiLCJsb2dBdXRvbWF0aW9uUmVxdWVzdCIsImRhdGEiLCJsb2ciLCJpZCIsImdlbmVyYXRlTG9nSWQiLCJ0eXBlIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidXNlcklkIiwidXNlcm5hbWUiLCJjb21tYW5kIiwibW9kZSIsInNlbGVjdGVkU3BlY2lhbGlzdCIsInN1Z2dlc3RlZFNwZWNpYWxpc3QiLCJkZXNjcmlwdGlvbiIsInN0YXR1cyIsImRldGFpbHMiLCJpcEFkZHJlc3MiLCJ1c2VyQWdlbnQiLCJzZXNzaW9uSWQiLCJhZGRMb2ciLCJsb2dDb2RlQW5hbHlzaXMiLCJhdXRvbWF0aW9uSWQiLCJzcGVjaWFsaXN0IiwiZmlsZXNBbmFseXplZCIsImNvZGVHZW5lcmF0ZWQiLCJsaW5lc09mQ29kZSIsImFuYWx5c2lzVGltZSIsIm1vZGVsIiwidGVtcGVyYXR1cmUiLCJsb2dTZWN1cml0eVZhbGlkYXRpb24iLCJmaWxlc0NoZWNrZWQiLCJpc1ZhbGlkIiwic2V2ZXJpdHkiLCJlcnJvcnMiLCJ3YXJuaW5ncyIsInZhbGlkYXRpb25UaW1lIiwiYmxvY2tlZFBhdHRlcm5zIiwiY3JlZGVudGlhbHNGb3VuZCIsImxvZ0dpdENvbW1pdCIsImNvbW1pdEhhc2giLCJjb21taXRNZXNzYWdlIiwiYnJhbmNoIiwiZmlsZXNDaGFuZ2VkIiwiaW5zZXJ0aW9ucyIsImRlbGV0aW9ucyIsImF1dGhvciIsInB1c2hlZFRvIiwicHJDcmVhdGVkIiwicHJOdW1iZXIiLCJsb2dDcmVkaXREZWJpdCIsImNyZWRpdHNEZWR1Y3RlZCIsImNyZWRpdHNSZW1haW5pbmciLCJicmVha2Rvd24iLCJhbmFseXNpcyIsImNvZGVHZW5lcmF0aW9uIiwic2VjdXJpdHlWYWxpZGF0aW9uIiwiZ2l0T3BlcmF0aW9ucyIsImxvZ0Vycm9yIiwiZXJyb3JUeXBlIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JTdGFjayIsInBoYXNlIiwicmVjb3ZlcnlBdHRlbXB0ZWQiLCJyZWNvdmVyeVN1Y2Nlc3NmdWwiLCJsb2dBdXRvbWF0aW9uQ29tcGxldGlvbiIsInRvdGFsRHVyYXRpb24iLCJwclVybCIsInN1bW1hcnkiLCJmaWxlc0NyZWF0ZWQiLCJmaWxlc01vZGlmaWVkIiwiZmlsZXNEZWxldGVkIiwibGluZXNBZGRlZCIsImxpbmVzUmVtb3ZlZCIsImNyZWRpdHNVc2VkIiwibG9nTWFudWFsQWN0aW9uIiwiYWN0aW9uIiwidGFyZ2V0RmlsZSIsImxvZ1JlcG9zaXRvcnlBY2Nlc3MiLCJyZXBvc2l0b3J5IiwiZmlsZXNBY2Nlc3NlZCIsInB1c2giLCJsZW5ndGgiLCJzbGljZSIsInBlcnNpc3RMb2ciLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInNlYXJjaExvZ3MiLCJmaWx0ZXJzIiwicmVzdWx0cyIsImZpbHRlciIsInN0YXJ0RGF0ZSIsInN0YXJ0IiwiZW5kRGF0ZSIsImVuZCIsImdlbmVyYXRlQXVkaXRSZXBvcnQiLCJyZXBvcnQiLCJnZW5lcmF0ZWRBdCIsInRvdGFsTG9ncyIsImJ5VHlwZSIsImJ5U3RhdHVzIiwiYnlVc2VyIiwiZm9yRWFjaCIsImV4cG9ydExvZ3MiLCJleHBvcnRMb2dzQ1NWIiwiT2JqZWN0Iiwia2V5cyIsImNzdiIsImpvaW4iLCJyb3ciLCJtYXAiLCJoZWFkZXIiLCJ2YWx1ZSIsInJlcGxhY2UiLCJTdHJpbmciLCJjbGVhck9sZExvZ3MiLCJkYXlzVG9LZWVwIiwiY3V0b2ZmRGF0ZSIsInNldERhdGUiLCJnZXREYXRlIiwiYmVmb3JlQ291bnQiLCJsb2dzUmVtb3ZlZCIsImxvZ3NSZW1haW5pbmciLCJnZXRTdGF0aXN0aWNzIiwic3RhdHMiLCJsb2dUeXBlcyIsInN0YXR1c0NvdW50cyIsInVzZXJBY3Rpdml0eSIsInRpbWVSYW5nZSIsIm9sZGVzdCIsIm5ld2VzdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJfZGVmYXVsdCIsImRlZmF1bHQiXSwic291cmNlcyI6WyJBdWRpdExvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFVRElUIExPR0dFUlxuICogUmVnaXN0cmEgdG9kYXMgYXMgYcOnw7VlcyBkZSBhdXRvbWHDp8OjbyBwYXJhIGF1ZGl0b3JpYSBlIGNvbXBsaWFuY2VcbiAqIFJhc3RyZWlhOiBRdWVtIHBlZGl1LCBPIHF1ZSBmb2kgZmVpdG8sIFF1YW5kbywgU3RhdHVzLCBEZXRhbGhlc1xuICovXG5cbmNsYXNzIEF1ZGl0TG9nZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5sb2dzID0gW107XG4gICAgdGhpcy5tYXhMb2dzID0gMTAwMDA7IC8vIE3DoXhpbW8gZGUgbG9ncyBlbSBtZW3Ds3JpYVxuICB9XG5cbiAgLyoqXG4gICAqIExvZyBkZSByZXF1aXNpw6fDo28gZGUgYXV0b21hw6fDo29cbiAgICovXG4gIGxvZ0F1dG9tYXRpb25SZXF1ZXN0KGRhdGEpIHtcbiAgICBjb25zdCBsb2cgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUxvZ0lkKCksXG4gICAgICB0eXBlOiBcIkFVVE9NQVRJT05fUkVRVUVTVFwiLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxuICAgICAgdXNlcm5hbWU6IGRhdGEudXNlcm5hbWUsXG4gICAgICBjb21tYW5kOiBkYXRhLmNvbW1hbmQsXG4gICAgICBtb2RlOiBkYXRhLm1vZGUsIC8vICdPUFRJTUlaRUQnIG91ICdIWUJSSUQnXG4gICAgICBzZWxlY3RlZFNwZWNpYWxpc3Q6IGRhdGEuc2VsZWN0ZWRTcGVjaWFsaXN0LFxuICAgICAgc3VnZ2VzdGVkU3BlY2lhbGlzdDogZGF0YS5zdWdnZXN0ZWRTcGVjaWFsaXN0LFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICBzdGF0dXM6IFwiSU5JVElBVEVEXCIsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIGlwQWRkcmVzczogZGF0YS5pcEFkZHJlc3MsXG4gICAgICAgIHVzZXJBZ2VudDogZGF0YS51c2VyQWdlbnQsXG4gICAgICAgIHNlc3Npb25JZDogZGF0YS5zZXNzaW9uSWQsXG4gICAgICB9LFxuICAgIH07XG5cbiAgICB0aGlzLmFkZExvZyhsb2cpO1xuICAgIHJldHVybiBsb2cuaWQ7XG4gIH1cblxuICAvKipcbiAgICogTG9nIGRlIGFuw6FsaXNlIGRlIGPDs2RpZ29cbiAgICovXG4gIGxvZ0NvZGVBbmFseXNpcyhkYXRhKSB7XG4gICAgY29uc3QgbG9nID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVMb2dJZCgpLFxuICAgICAgdHlwZTogXCJDT0RFX0FOQUxZU0lTXCIsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGF1dG9tYXRpb25JZDogZGF0YS5hdXRvbWF0aW9uSWQsXG4gICAgICBzcGVjaWFsaXN0OiBkYXRhLnNwZWNpYWxpc3QsXG4gICAgICBmaWxlc0FuYWx5emVkOiBkYXRhLmZpbGVzQW5hbHl6ZWQsXG4gICAgICBjb2RlR2VuZXJhdGVkOiBkYXRhLmNvZGVHZW5lcmF0ZWQsXG4gICAgICBsaW5lc09mQ29kZTogZGF0YS5saW5lc09mQ29kZSxcbiAgICAgIHN0YXR1czogXCJDT01QTEVURURcIixcbiAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgYW5hbHlzaXNUaW1lOiBkYXRhLmFuYWx5c2lzVGltZSxcbiAgICAgICAgbW9kZWw6IGRhdGEubW9kZWwsXG4gICAgICAgIHRlbXBlcmF0dXJlOiBkYXRhLnRlbXBlcmF0dXJlLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgdGhpcy5hZGRMb2cobG9nKTtcbiAgICByZXR1cm4gbG9nLmlkO1xuICB9XG5cbiAgLyoqXG4gICAqIExvZyBkZSB2YWxpZGHDp8OjbyBkZSBzZWd1cmFuw6dhXG4gICAqL1xuICBsb2dTZWN1cml0eVZhbGlkYXRpb24oZGF0YSkge1xuICAgIGNvbnN0IGxvZyA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlTG9nSWQoKSxcbiAgICAgIHR5cGU6IFwiU0VDVVJJVFlfVkFMSURBVElPTlwiLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBhdXRvbWF0aW9uSWQ6IGRhdGEuYXV0b21hdGlvbklkLFxuICAgICAgZmlsZXNDaGVja2VkOiBkYXRhLmZpbGVzQ2hlY2tlZCxcbiAgICAgIHN0YXR1czogZGF0YS5pc1ZhbGlkID8gXCJQQVNTRURcIiA6IFwiQkxPQ0tFRFwiLFxuICAgICAgc2V2ZXJpdHk6IGRhdGEuc2V2ZXJpdHksXG4gICAgICBlcnJvcnM6IGRhdGEuZXJyb3JzIHx8IFtdLFxuICAgICAgd2FybmluZ3M6IGRhdGEud2FybmluZ3MgfHwgW10sXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIHZhbGlkYXRpb25UaW1lOiBkYXRhLnZhbGlkYXRpb25UaW1lLFxuICAgICAgICBibG9ja2VkUGF0dGVybnM6IGRhdGEuYmxvY2tlZFBhdHRlcm5zIHx8IFtdLFxuICAgICAgICBjcmVkZW50aWFsc0ZvdW5kOiBkYXRhLmNyZWRlbnRpYWxzRm91bmQgfHwgW10sXG4gICAgICB9LFxuICAgIH07XG5cbiAgICB0aGlzLmFkZExvZyhsb2cpO1xuICAgIHJldHVybiBsb2cuaWQ7XG4gIH1cblxuICAvKipcbiAgICogTG9nIGRlIGNvbW1pdCBhdXRvbcOhdGljb1xuICAgKi9cbiAgbG9nR2l0Q29tbWl0KGRhdGEpIHtcbiAgICBjb25zdCBsb2cgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUxvZ0lkKCksXG4gICAgICB0eXBlOiBcIkdJVF9DT01NSVRcIixcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgYXV0b21hdGlvbklkOiBkYXRhLmF1dG9tYXRpb25JZCxcbiAgICAgIGNvbW1pdEhhc2g6IGRhdGEuY29tbWl0SGFzaCxcbiAgICAgIGNvbW1pdE1lc3NhZ2U6IGRhdGEuY29tbWl0TWVzc2FnZSxcbiAgICAgIGJyYW5jaDogZGF0YS5icmFuY2gsXG4gICAgICBmaWxlc0NoYW5nZWQ6IGRhdGEuZmlsZXNDaGFuZ2VkLFxuICAgICAgaW5zZXJ0aW9uczogZGF0YS5pbnNlcnRpb25zLFxuICAgICAgZGVsZXRpb25zOiBkYXRhLmRlbGV0aW9ucyxcbiAgICAgIHN0YXR1czogXCJDT01QTEVURURcIixcbiAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgYXV0aG9yOiBkYXRhLmF1dGhvcixcbiAgICAgICAgcHVzaGVkVG86IGRhdGEucHVzaGVkVG8sXG4gICAgICAgIHByQ3JlYXRlZDogZGF0YS5wckNyZWF0ZWQgfHwgZmFsc2UsXG4gICAgICAgIHByTnVtYmVyOiBkYXRhLnByTnVtYmVyIHx8IG51bGwsXG4gICAgICB9LFxuICAgIH07XG5cbiAgICB0aGlzLmFkZExvZyhsb2cpO1xuICAgIHJldHVybiBsb2cuaWQ7XG4gIH1cblxuICAvKipcbiAgICogTG9nIGRlIGNyw6lkaXRvcyBkZWJpdGFkb3NcbiAgICovXG4gIGxvZ0NyZWRpdERlYml0KGRhdGEpIHtcbiAgICBjb25zdCBsb2cgPSB7XG4gICAgICBpZDogdGhpcy5nZW5lcmF0ZUxvZ0lkKCksXG4gICAgICB0eXBlOiBcIkNSRURJVF9ERUJJVFwiLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxuICAgICAgYXV0b21hdGlvbklkOiBkYXRhLmF1dG9tYXRpb25JZCxcbiAgICAgIGNyZWRpdHNEZWR1Y3RlZDogZGF0YS5jcmVkaXRzRGVkdWN0ZWQsXG4gICAgICBjcmVkaXRzUmVtYWluaW5nOiBkYXRhLmNyZWRpdHNSZW1haW5pbmcsXG4gICAgICBtb2RlOiBkYXRhLm1vZGUsXG4gICAgICBicmVha2Rvd246IHtcbiAgICAgICAgYW5hbHlzaXM6IGRhdGEuYnJlYWtkb3duPy5hbmFseXNpcyB8fCAwLFxuICAgICAgICBjb2RlR2VuZXJhdGlvbjogZGF0YS5icmVha2Rvd24/LmNvZGVHZW5lcmF0aW9uIHx8IDAsXG4gICAgICAgIHNlY3VyaXR5VmFsaWRhdGlvbjogZGF0YS5icmVha2Rvd24/LnNlY3VyaXR5VmFsaWRhdGlvbiB8fCAwLFxuICAgICAgICBnaXRPcGVyYXRpb25zOiBkYXRhLmJyZWFrZG93bj8uZ2l0T3BlcmF0aW9ucyB8fCAwLFxuICAgICAgfSxcbiAgICAgIHN0YXR1czogXCJDT01QTEVURURcIixcbiAgICB9O1xuXG4gICAgdGhpcy5hZGRMb2cobG9nKTtcbiAgICByZXR1cm4gbG9nLmlkO1xuICB9XG5cbiAgLyoqXG4gICAqIExvZyBkZSBlcnJvXG4gICAqL1xuICBsb2dFcnJvcihkYXRhKSB7XG4gICAgY29uc3QgbG9nID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVMb2dJZCgpLFxuICAgICAgdHlwZTogXCJFUlJPUlwiLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBhdXRvbWF0aW9uSWQ6IGRhdGEuYXV0b21hdGlvbklkLFxuICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcbiAgICAgIGVycm9yVHlwZTogZGF0YS5lcnJvclR5cGUsXG4gICAgICBlcnJvck1lc3NhZ2U6IGRhdGEuZXJyb3JNZXNzYWdlLFxuICAgICAgZXJyb3JTdGFjazogZGF0YS5lcnJvclN0YWNrLFxuICAgICAgcGhhc2U6IGRhdGEucGhhc2UsIC8vICdBTkFMWVNJUycsICdDT0RFX0dFTkVSQVRJT04nLCAnU0VDVVJJVFknLCAnR0lUJywgZXRjXG4gICAgICBzdGF0dXM6IFwiRkFJTEVEXCIsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIHJlY292ZXJ5QXR0ZW1wdGVkOiBkYXRhLnJlY292ZXJ5QXR0ZW1wdGVkIHx8IGZhbHNlLFxuICAgICAgICByZWNvdmVyeVN1Y2Nlc3NmdWw6IGRhdGEucmVjb3ZlcnlTdWNjZXNzZnVsIHx8IGZhbHNlLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgdGhpcy5hZGRMb2cobG9nKTtcbiAgICByZXR1cm4gbG9nLmlkO1xuICB9XG5cbiAgLyoqXG4gICAqIExvZyBkZSBjb25jbHVzw6NvIGRlIGF1dG9tYcOnw6NvXG4gICAqL1xuICBsb2dBdXRvbWF0aW9uQ29tcGxldGlvbihkYXRhKSB7XG4gICAgY29uc3QgbG9nID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVMb2dJZCgpLFxuICAgICAgdHlwZTogXCJBVVRPTUFUSU9OX0NPTVBMRVRJT05cIixcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgYXV0b21hdGlvbklkOiBkYXRhLmF1dG9tYXRpb25JZCxcbiAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXG4gICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLCAvLyAnU1VDQ0VTUycgb3UgJ0ZBSUxFRCdcbiAgICAgIHRvdGFsRHVyYXRpb246IGRhdGEudG90YWxEdXJhdGlvbixcbiAgICAgIGNvbW1pdEhhc2g6IGRhdGEuY29tbWl0SGFzaCxcbiAgICAgIHByVXJsOiBkYXRhLnByVXJsLFxuICAgICAgc3VtbWFyeToge1xuICAgICAgICBmaWxlc0NyZWF0ZWQ6IGRhdGEuZmlsZXNDcmVhdGVkIHx8IDAsXG4gICAgICAgIGZpbGVzTW9kaWZpZWQ6IGRhdGEuZmlsZXNNb2RpZmllZCB8fCAwLFxuICAgICAgICBmaWxlc0RlbGV0ZWQ6IGRhdGEuZmlsZXNEZWxldGVkIHx8IDAsXG4gICAgICAgIGxpbmVzQWRkZWQ6IGRhdGEubGluZXNBZGRlZCB8fCAwLFxuICAgICAgICBsaW5lc1JlbW92ZWQ6IGRhdGEubGluZXNSZW1vdmVkIHx8IDAsXG4gICAgICB9LFxuICAgICAgZGV0YWlsczoge1xuICAgICAgICBzcGVjaWFsaXN0OiBkYXRhLnNwZWNpYWxpc3QsXG4gICAgICAgIG1vZGU6IGRhdGEubW9kZSxcbiAgICAgICAgY3JlZGl0c1VzZWQ6IGRhdGEuY3JlZGl0c1VzZWQsXG4gICAgICB9LFxuICAgIH07XG5cbiAgICB0aGlzLmFkZExvZyhsb2cpO1xuICAgIHJldHVybiBsb2cuaWQ7XG4gIH1cblxuICAvKipcbiAgICogTG9nIGRlIGHDp8OjbyBtYW51YWwgZG8gdXN1w6FyaW9cbiAgICovXG4gIGxvZ01hbnVhbEFjdGlvbihkYXRhKSB7XG4gICAgY29uc3QgbG9nID0ge1xuICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVMb2dJZCgpLFxuICAgICAgdHlwZTogXCJNQU5VQUxfQUNUSU9OXCIsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXG4gICAgICB1c2VybmFtZTogZGF0YS51c2VybmFtZSxcbiAgICAgIGFjdGlvbjogZGF0YS5hY3Rpb24sIC8vICdFRElUJywgJ1JFVklFVycsICdBUFBST1ZFJywgJ1JFSkVDVCcsIGV0Y1xuICAgICAgdGFyZ2V0RmlsZTogZGF0YS50YXJnZXRGaWxlLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICBzdGF0dXM6IFwiQ09NUExFVEVEXCIsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIGlwQWRkcmVzczogZGF0YS5pcEFkZHJlc3MsXG4gICAgICAgIHNlc3Npb25JZDogZGF0YS5zZXNzaW9uSWQsXG4gICAgICB9LFxuICAgIH07XG5cbiAgICB0aGlzLmFkZExvZyhsb2cpO1xuICAgIHJldHVybiBsb2cuaWQ7XG4gIH1cblxuICAvKipcbiAgICogTG9nIGRlIGFjZXNzbyBhbyByZXBvc2l0w7NyaW9cbiAgICovXG4gIGxvZ1JlcG9zaXRvcnlBY2Nlc3MoZGF0YSkge1xuICAgIGNvbnN0IGxvZyA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlTG9nSWQoKSxcbiAgICAgIHR5cGU6IFwiUkVQT1NJVE9SWV9BQ0NFU1NcIixcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcbiAgICAgIGFjdGlvbjogZGF0YS5hY3Rpb24sIC8vICdSRUFEJywgJ1dSSVRFJywgJ0RFTEVURScsIGV0Y1xuICAgICAgcmVwb3NpdG9yeTogZGF0YS5yZXBvc2l0b3J5LFxuICAgICAgYnJhbmNoOiBkYXRhLmJyYW5jaCxcbiAgICAgIGZpbGVzQWNjZXNzZWQ6IGRhdGEuZmlsZXNBY2Nlc3NlZCxcbiAgICAgIHN0YXR1czogXCJDT01QTEVURURcIixcbiAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgaXBBZGRyZXNzOiBkYXRhLmlwQWRkcmVzcyxcbiAgICAgICAgdXNlckFnZW50OiBkYXRhLnVzZXJBZ2VudCxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIHRoaXMuYWRkTG9nKGxvZyk7XG4gICAgcmV0dXJuIGxvZy5pZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGljaW9uYXIgbG9nIMOgIGZpbGFcbiAgICovXG4gIGFkZExvZyhsb2cpIHtcbiAgICB0aGlzLmxvZ3MucHVzaChsb2cpO1xuXG4gICAgLy8gTWFudGVyIGxpbWl0ZSBkZSBsb2dzIGVtIG1lbcOzcmlhXG4gICAgaWYgKHRoaXMubG9ncy5sZW5ndGggPiB0aGlzLm1heExvZ3MpIHtcbiAgICAgIHRoaXMubG9ncyA9IHRoaXMubG9ncy5zbGljZSgtdGhpcy5tYXhMb2dzKTtcbiAgICB9XG5cbiAgICAvLyBFbnZpYXIgcGFyYSBzZXJ2aWRvciAoYXN5bmMpXG4gICAgdGhpcy5wZXJzaXN0TG9nKGxvZykuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihcIkVycm8gYW8gcGVyc2lzdGlyIGxvZzpcIiwgZXJyKSk7XG4gIH1cblxuICAvKipcbiAgICogUGVyc2lzdGlyIGxvZyBubyBzZXJ2aWRvclxuICAgKi9cbiAgYXN5bmMgcGVyc2lzdExvZyhsb2cpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9hcGkvYXVkaXQtbG9nXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShsb2cpLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gcGVyc2lzdGlyIGxvZzpcIiwgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gZW52aWFyIGxvZzpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXJhciBJRCDDum5pY28gcGFyYSBsb2dcbiAgICovXG4gIGdlbmVyYXRlTG9nSWQoKSB7XG4gICAgcmV0dXJuIGBMT0dfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1c2NhciBsb2dzIHBvciBmaWx0cm9zXG4gICAqL1xuICBzZWFyY2hMb2dzKGZpbHRlcnMpIHtcbiAgICBsZXQgcmVzdWx0cyA9IHRoaXMubG9ncztcblxuICAgIGlmIChmaWx0ZXJzLnR5cGUpIHtcbiAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcigobG9nKSA9PiBsb2cudHlwZSA9PT0gZmlsdGVycy50eXBlKTtcbiAgICB9XG5cbiAgICBpZiAoZmlsdGVycy51c2VySWQpIHtcbiAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcigobG9nKSA9PiBsb2cudXNlcklkID09PSBmaWx0ZXJzLnVzZXJJZCk7XG4gICAgfVxuXG4gICAgaWYgKGZpbHRlcnMuc3RhdHVzKSB7XG4gICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoKGxvZykgPT4gbG9nLnN0YXR1cyA9PT0gZmlsdGVycy5zdGF0dXMpO1xuICAgIH1cblxuICAgIGlmIChmaWx0ZXJzLnN0YXJ0RGF0ZSkge1xuICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShmaWx0ZXJzLnN0YXJ0RGF0ZSk7XG4gICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoKGxvZykgPT4gbmV3IERhdGUobG9nLnRpbWVzdGFtcCkgPj0gc3RhcnQpO1xuICAgIH1cblxuICAgIGlmIChmaWx0ZXJzLmVuZERhdGUpIHtcbiAgICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKGZpbHRlcnMuZW5kRGF0ZSk7XG4gICAgICByZXN1bHRzID0gcmVzdWx0cy5maWx0ZXIoKGxvZykgPT4gbmV3IERhdGUobG9nLnRpbWVzdGFtcCkgPD0gZW5kKTtcbiAgICB9XG5cbiAgICBpZiAoZmlsdGVycy5hdXRvbWF0aW9uSWQpIHtcbiAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcigobG9nKSA9PiBsb2cuYXV0b21hdGlvbklkID09PSBmaWx0ZXJzLmF1dG9tYXRpb25JZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICAvKipcbiAgICogR2VyYXIgcmVsYXTDs3JpbyBkZSBhdWRpdG9yaWFcbiAgICovXG4gIGdlbmVyYXRlQXVkaXRSZXBvcnQoZmlsdGVycyA9IHt9KSB7XG4gICAgY29uc3QgbG9ncyA9IHRoaXMuc2VhcmNoTG9ncyhmaWx0ZXJzKTtcblxuICAgIGNvbnN0IHJlcG9ydCA9IHtcbiAgICAgIGdlbmVyYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBmaWx0ZXJzLFxuICAgICAgc3VtbWFyeToge1xuICAgICAgICB0b3RhbExvZ3M6IGxvZ3MubGVuZ3RoLFxuICAgICAgICBieVR5cGU6IHt9LFxuICAgICAgICBieVN0YXR1czoge30sXG4gICAgICAgIGJ5VXNlcjoge30sXG4gICAgICB9LFxuICAgICAgZGV0YWlsczogbG9ncyxcbiAgICB9O1xuXG4gICAgLy8gQ29udGFyIHBvciB0aXBvXG4gICAgbG9ncy5mb3JFYWNoKChsb2cpID0+IHtcbiAgICAgIHJlcG9ydC5zdW1tYXJ5LmJ5VHlwZVtsb2cudHlwZV0gPSAocmVwb3J0LnN1bW1hcnkuYnlUeXBlW2xvZy50eXBlXSB8fCAwKSArIDE7XG4gICAgICByZXBvcnQuc3VtbWFyeS5ieVN0YXR1c1tsb2cuc3RhdHVzXSA9IChyZXBvcnQuc3VtbWFyeS5ieVN0YXR1c1tsb2cuc3RhdHVzXSB8fCAwKSArIDE7XG4gICAgICByZXBvcnQuc3VtbWFyeS5ieVVzZXJbbG9nLnVzZXJJZF0gPSAocmVwb3J0LnN1bW1hcnkuYnlVc2VyW2xvZy51c2VySWRdIHx8IDApICsgMTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXBvcnQ7XG4gIH1cblxuICAvKipcbiAgICogRXhwb3J0YXIgbG9ncyBlbSBKU09OXG4gICAqL1xuICBleHBvcnRMb2dzKGZpbHRlcnMgPSB7fSkge1xuICAgIGNvbnN0IGxvZ3MgPSB0aGlzLnNlYXJjaExvZ3MoZmlsdGVycyk7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGxvZ3MsIG51bGwsIDIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9ydGFyIGxvZ3MgZW0gQ1NWXG4gICAqL1xuICBleHBvcnRMb2dzQ1NWKGZpbHRlcnMgPSB7fSkge1xuICAgIGNvbnN0IGxvZ3MgPSB0aGlzLnNlYXJjaExvZ3MoZmlsdGVycyk7XG5cbiAgICBpZiAobG9ncy5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xuXG4gICAgLy8gSGVhZGVyc1xuICAgIGNvbnN0IGhlYWRlcnMgPSBPYmplY3Qua2V5cyhsb2dzWzBdKTtcbiAgICBjb25zdCBjc3YgPSBbaGVhZGVycy5qb2luKFwiLFwiKV07XG5cbiAgICAvLyBSb3dzXG4gICAgbG9ncy5mb3JFYWNoKChsb2cpID0+IHtcbiAgICAgIGNvbnN0IHJvdyA9IGhlYWRlcnMubWFwKChoZWFkZXIpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBsb2dbaGVhZGVyXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIHJldHVybiBgXCIke0pTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9cIi9nLCAnXCJcIicpfVwiYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYFwiJHtTdHJpbmcodmFsdWUpLnJlcGxhY2UoL1wiL2csICdcIlwiJyl9XCJgO1xuICAgICAgfSk7XG4gICAgICBjc3YucHVzaChyb3cuam9pbihcIixcIikpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNzdi5qb2luKFwiXFxuXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpbXBhciBsb2dzIGFudGlnb3NcbiAgICovXG4gIGNsZWFyT2xkTG9ncyhkYXlzVG9LZWVwID0gMzApIHtcbiAgICBjb25zdCBjdXRvZmZEYXRlID0gbmV3IERhdGUoKTtcbiAgICBjdXRvZmZEYXRlLnNldERhdGUoY3V0b2ZmRGF0ZS5nZXREYXRlKCkgLSBkYXlzVG9LZWVwKTtcblxuICAgIGNvbnN0IGJlZm9yZUNvdW50ID0gdGhpcy5sb2dzLmxlbmd0aDtcbiAgICB0aGlzLmxvZ3MgPSB0aGlzLmxvZ3MuZmlsdGVyKChsb2cpID0+IG5ldyBEYXRlKGxvZy50aW1lc3RhbXApID4gY3V0b2ZmRGF0ZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbG9nc1JlbW92ZWQ6IGJlZm9yZUNvdW50IC0gdGhpcy5sb2dzLmxlbmd0aCxcbiAgICAgIGxvZ3NSZW1haW5pbmc6IHRoaXMubG9ncy5sZW5ndGgsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnRlciBlc3RhdMOtc3RpY2FzXG4gICAqL1xuICBnZXRTdGF0aXN0aWNzKCkge1xuICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgdG90YWxMb2dzOiB0aGlzLmxvZ3MubGVuZ3RoLFxuICAgICAgbG9nVHlwZXM6IHt9LFxuICAgICAgc3RhdHVzQ291bnRzOiB7fSxcbiAgICAgIHVzZXJBY3Rpdml0eToge30sXG4gICAgICB0aW1lUmFuZ2U6IHtcbiAgICAgICAgb2xkZXN0OiB0aGlzLmxvZ3MubGVuZ3RoID4gMCA/IHRoaXMubG9nc1swXS50aW1lc3RhbXAgOiBudWxsLFxuICAgICAgICBuZXdlc3Q6IHRoaXMubG9ncy5sZW5ndGggPiAwID8gdGhpcy5sb2dzW3RoaXMubG9ncy5sZW5ndGggLSAxXS50aW1lc3RhbXAgOiBudWxsLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgdGhpcy5sb2dzLmZvckVhY2goKGxvZykgPT4ge1xuICAgICAgc3RhdHMubG9nVHlwZXNbbG9nLnR5cGVdID0gKHN0YXRzLmxvZ1R5cGVzW2xvZy50eXBlXSB8fCAwKSArIDE7XG4gICAgICBzdGF0cy5zdGF0dXNDb3VudHNbbG9nLnN0YXR1c10gPSAoc3RhdHMuc3RhdHVzQ291bnRzW2xvZy5zdGF0dXNdIHx8IDApICsgMTtcblxuICAgICAgaWYgKGxvZy51c2VySWQpIHtcbiAgICAgICAgc3RhdHMudXNlckFjdGl2aXR5W2xvZy51c2VySWRdID0gKHN0YXRzLnVzZXJBY3Rpdml0eVtsb2cudXNlcklkXSB8fCAwKSArIDE7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3RhdHM7XG4gIH1cbn1cblxuLy8gRXhwb3J0YXJcbmlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gQXVkaXRMb2dnZXI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1ZGl0TG9nZ2VyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLFdBQVcsQ0FBQztFQUNoQkMsV0FBV0EsQ0FBQSxFQUFHO0lBQ1osSUFBSSxDQUFDQyxJQUFJLEdBQUcsRUFBRTtJQUNkLElBQUksQ0FBQ0MsT0FBTyxHQUFHLEtBQUssQ0FBQyxDQUFDO0VBQ3hCOztFQUVBO0FBQ0Y7QUFDQTtFQUNFQyxv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