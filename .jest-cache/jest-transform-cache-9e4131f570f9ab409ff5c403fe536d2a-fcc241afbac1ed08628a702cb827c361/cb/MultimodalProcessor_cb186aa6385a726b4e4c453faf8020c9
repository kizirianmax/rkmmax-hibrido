7f2a398759f13b0679ea95eeb84b6db2
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
/**
 * MULTIMODAL PROCESSOR
 * Processa entrada multimodal: Voz (Speech-to-Text) e Imagem (Vision)
 * Suporta: MP3, WAV, MP4, WebM, PNG, JPG, GIF, WebP
 */

class MultimodalProcessor {
  constructor() {
    this.supportedAudioFormats = ["mp3", "wav", "mp4", "webm", "ogg", "m4a"];
    this.supportedImageFormats = ["png", "jpg", "jpeg", "gif", "webp", "bmp"];
    this.maxAudioSize = 25 * 1024 * 1024; // 25MB
    this.maxImageSize = 20 * 1024 * 1024; // 20MB
  }

  /**
   * Processar √°udio (Speech-to-Text)
   */
  async processAudio(audioBuffer, format = "mp3") {
    console.log(`üé§ Processando √°udio (${format})...`);

    // Validar formato
    if (!this.supportedAudioFormats.includes(format.toLowerCase())) {
      throw new Error(`Formato de √°udio n√£o suportado: ${format}`);
    }

    // Validar tamanho
    if (audioBuffer.length > this.maxAudioSize) {
      throw new Error(`Arquivo de √°udio muito grande: ${audioBuffer.length} bytes`);
    }
    try {
      // Chamar API de Speech-to-Text (Google Cloud Speech-to-Text)
      const transcript = await this.transcribeAudio(audioBuffer, format);
      console.log(`‚úÖ √Åudio transcrito: "${transcript.substring(0, 50)}..."`);
      return {
        type: "audio",
        format,
        transcript,
        confidence: 0.95,
        // Confian√ßa estimada
        duration: await this.estimateAudioDuration(audioBuffer, format)
      };
    } catch (error) {
      throw new Error(`Erro ao processar √°udio: ${error.message}`);
    }
  }

  /**
   * Transcrever √°udio via API
   */
  async transcribeAudio(audioBuffer, format) {
    try {
      // Converter buffer para base64
      const base64Audio = audioBuffer.toString("base64");

      // Chamar API de transcription (simulado)
      // Em produ√ß√£o, usar Google Cloud Speech-to-Text ou similar

      const response = await fetch("/api/transcribe", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          audio: base64Audio,
          format,
          language: "pt-BR"
        })
      });
      if (!response.ok) {
        throw new Error(`Erro na transcri√ß√£o: ${response.status}`);
      }
      const data = await response.json();
      return data.transcript;
    } catch (error) {
      // Fallback: retornar mensagem de erro
      throw error;
    }
  }

  /**
   * Estimar dura√ß√£o do √°udio
   */
  async estimateAudioDuration(audioBuffer, format) {
    // Estimativa simples baseada no tamanho
    // Em produ√ß√£o, usar biblioteca de √°udio
    const bitrate = 128; // kbps
    const durationSeconds = audioBuffer.length * 8 / (bitrate * 1000);
    return Math.round(durationSeconds);
  }

  /**
   * Processar imagem (Vision)
   */
  async processImage(imageBuffer, format = "png") {
    console.log(`üì∏ Processando imagem (${format})...`);

    // Validar formato
    if (!this.supportedImageFormats.includes(format.toLowerCase())) {
      throw new Error(`Formato de imagem n√£o suportado: ${format}`);
    }

    // Validar tamanho
    if (imageBuffer.length > this.maxImageSize) {
      throw new Error(`Arquivo de imagem muito grande: ${imageBuffer.length} bytes`);
    }
    try {
      // Analisar imagem
      const analysis = await this.analyzeImage(imageBuffer, format);
      console.log(`‚úÖ Imagem analisada: ${analysis.description}`);
      return {
        type: "image",
        format,
        analysis,
        size: imageBuffer.length
      };
    } catch (error) {
      throw new Error(`Erro ao processar imagem: ${error.message}`);
    }
  }

  /**
   * Analisar imagem via API
   */
  async analyzeImage(imageBuffer, format) {
    try {
      // Converter buffer para base64
      const base64Image = imageBuffer.toString("base64");

      // Chamar API de Vision (simulado)
      // Em produ√ß√£o, usar Google Cloud Vision ou similar

      const response = await fetch("/api/vision-analyze", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          image: base64Image,
          format,
          features: ["LABEL_DETECTION", "TEXT_DETECTION", "OBJECT_LOCALIZATION", "SAFE_SEARCH_DETECTION"]
        })
      });
      if (!response.ok) {
        throw new Error(`Erro na an√°lise: ${response.status}`);
      }
      const data = await response.json();
      return data.analysis;
    } catch (error) {
      throw error;
    }
  }

  /**
   * Processar entrada multimodal (√°udio + imagem)
   */
  async processMultimodal(inputs) {
    console.log(`üé¨ Processando entrada multimodal...`);
    const results = {
      audio: null,
      image: null,
      combined: null
    };

    // Processar √°udio se fornecido
    if (inputs.audio) {
      results.audio = await this.processAudio(inputs.audio.buffer, inputs.audio.format);
    }

    // Processar imagem se fornecida
    if (inputs.image) {
      results.image = await this.processImage(inputs.image.buffer, inputs.image.format);
    }

    // Combinar resultados
    if (results.audio && results.image) {
      results.combined = this.combineResults(results.audio, results.image);
    }
    return results;
  }

  /**
   * Combinar resultados de √°udio e imagem
   */
  combineResults(audioResult, imageResult) {
    return {
      transcript: audioResult.transcript,
      imageAnalysis: imageResult.analysis,
      combinedContext: `√Åudio: "${audioResult.transcript}"\n\nImagem: ${imageResult.analysis.description}`,
      confidence: {
        audio: audioResult.confidence,
        image: imageResult.analysis.confidence || 0.9
      }
    };
  }

  /**
   * Extrair texto de imagem (OCR)
   */
  async extractTextFromImage(imageBuffer, format = "png") {
    console.log(`üìÑ Extraindo texto da imagem...`);
    const analysis = await this.analyzeImage(imageBuffer, format);
    if (analysis.textDetection && analysis.textDetection.length > 0) {
      const extractedText = analysis.textDetection.map(item => item.text).join("\n");
      return {
        success: true,
        text: extractedText,
        confidence: analysis.textDetection[0].confidence || 0.9
      };
    }
    return {
      success: false,
      text: "",
      message: "Nenhum texto encontrado na imagem"
    };
  }

  /**
   * Descrever imagem
   */
  async describeImage(imageBuffer, format = "png") {
    console.log(`üì∏ Descrevendo imagem...`);
    const analysis = await this.analyzeImage(imageBuffer, format);
    return {
      description: analysis.description,
      labels: analysis.labels || [],
      objects: analysis.objects || [],
      confidence: analysis.confidence || 0.9
    };
  }

  /**
   * Detectar c√≥digo em imagem
   */
  async detectCodeInImage(imageBuffer, format = "png") {
    console.log(`üíª Detectando c√≥digo na imagem...`);
    const textResult = await this.extractTextFromImage(imageBuffer, format);
    if (!textResult.success) {
      return {
        success: false,
        code: "",
        language: null
      };
    }

    // Detectar linguagem de programa√ß√£o
    const language = this.detectProgrammingLanguage(textResult.text);
    return {
      success: true,
      code: textResult.text,
      language,
      confidence: textResult.confidence
    };
  }

  /**
   * Detectar linguagem de programa√ß√£o
   */
  detectProgrammingLanguage(code) {
    const patterns = {
      javascript: /const|let|var|function|=>|async|await/,
      python: /def|import|class|if __name__|print\(/,
      java: /public class|public static|import java/,
      cpp: /#include|std::|int main/,
      csharp: /using|namespace|public class|async Task/,
      go: /package main|func|import/,
      rust: /fn |let |pub |impl /,
      sql: /SELECT|INSERT|UPDATE|DELETE|FROM|WHERE/,
      html: /<!DOCTYPE|<html|<body|<div/,
      css: /@media|\.class|#id|{.*:.*;}/
    };
    for (const [lang, pattern] of Object.entries(patterns)) {
      if (pattern.test(code)) {
        return lang;
      }
    }
    return null;
  }

  /**
   * Validar arquivo de √°udio
   */
  validateAudioFile(filename, size) {
    const ext = filename.split(".").pop().toLowerCase();
    if (!this.supportedAudioFormats.includes(ext)) {
      return {
        valid: false,
        error: `Formato n√£o suportado: ${ext}`
      };
    }
    if (size > this.maxAudioSize) {
      return {
        valid: false,
        error: `Arquivo muito grande: ${size} bytes (m√°ximo: ${this.maxAudioSize})`
      };
    }
    return {
      valid: true
    };
  }

  /**
   * Validar arquivo de imagem
   */
  validateImageFile(filename, size) {
    const ext = filename.split(".").pop().toLowerCase();
    if (!this.supportedImageFormats.includes(ext)) {
      return {
        valid: false,
        error: `Formato n√£o suportado: ${ext}`
      };
    }
    if (size > this.maxImageSize) {
      return {
        valid: false,
        error: `Arquivo muito grande: ${size} bytes (m√°ximo: ${this.maxImageSize})`
      };
    }
    return {
      valid: true
    };
  }

  /**
   * Obter informa√ß√µes de suporte
   */
  getSupportInfo() {
    return {
      audio: {
        formats: this.supportedAudioFormats,
        maxSize: this.maxAudioSize,
        features: ["Speech-to-Text", "Transcription", "Language Detection"]
      },
      image: {
        formats: this.supportedImageFormats,
        maxSize: this.maxImageSize,
        features: ["OCR", "Object Detection", "Label Detection", "Code Detection"]
      }
    };
  }
}
var _default = exports.default = MultimodalProcessor;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNdWx0aW1vZGFsUHJvY2Vzc29yIiwiY29uc3RydWN0b3IiLCJzdXBwb3J0ZWRBdWRpb0Zvcm1hdHMiLCJzdXBwb3J0ZWRJbWFnZUZvcm1hdHMiLCJtYXhBdWRpb1NpemUiLCJtYXhJbWFnZVNpemUiLCJwcm9jZXNzQXVkaW8iLCJhdWRpb0J1ZmZlciIsImZvcm1hdCIsImNvbnNvbGUiLCJsb2ciLCJpbmNsdWRlcyIsInRvTG93ZXJDYXNlIiwiRXJyb3IiLCJsZW5ndGgiLCJ0cmFuc2NyaXB0IiwidHJhbnNjcmliZUF1ZGlvIiwic3Vic3RyaW5nIiwidHlwZSIsImNvbmZpZGVuY2UiLCJkdXJhdGlvbiIsImVzdGltYXRlQXVkaW9EdXJhdGlvbiIsImVycm9yIiwibWVzc2FnZSIsImJhc2U2NEF1ZGlvIiwidG9TdHJpbmciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXVkaW8iLCJsYW5ndWFnZSIsIm9rIiwic3RhdHVzIiwiZGF0YSIsImpzb24iLCJiaXRyYXRlIiwiZHVyYXRpb25TZWNvbmRzIiwiTWF0aCIsInJvdW5kIiwicHJvY2Vzc0ltYWdlIiwiaW1hZ2VCdWZmZXIiLCJhbmFseXNpcyIsImFuYWx5emVJbWFnZSIsImRlc2NyaXB0aW9uIiwic2l6ZSIsImJhc2U2NEltYWdlIiwiaW1hZ2UiLCJmZWF0dXJlcyIsInByb2Nlc3NNdWx0aW1vZGFsIiwiaW5wdXRzIiwicmVzdWx0cyIsImNvbWJpbmVkIiwiYnVmZmVyIiwiY29tYmluZVJlc3VsdHMiLCJhdWRpb1Jlc3VsdCIsImltYWdlUmVzdWx0IiwiaW1hZ2VBbmFseXNpcyIsImNvbWJpbmVkQ29udGV4dCIsImV4dHJhY3RUZXh0RnJvbUltYWdlIiwidGV4dERldGVjdGlvbiIsImV4dHJhY3RlZFRleHQiLCJtYXAiLCJpdGVtIiwidGV4dCIsImpvaW4iLCJzdWNjZXNzIiwiZGVzY3JpYmVJbWFnZSIsImxhYmVscyIsIm9iamVjdHMiLCJkZXRlY3RDb2RlSW5JbWFnZSIsInRleHRSZXN1bHQiLCJjb2RlIiwiZGV0ZWN0UHJvZ3JhbW1pbmdMYW5ndWFnZSIsInBhdHRlcm5zIiwiamF2YXNjcmlwdCIsInB5dGhvbiIsImphdmEiLCJjcHAiLCJjc2hhcnAiLCJnbyIsInJ1c3QiLCJzcWwiLCJodG1sIiwiY3NzIiwibGFuZyIsInBhdHRlcm4iLCJPYmplY3QiLCJlbnRyaWVzIiwidGVzdCIsInZhbGlkYXRlQXVkaW9GaWxlIiwiZmlsZW5hbWUiLCJleHQiLCJzcGxpdCIsInBvcCIsInZhbGlkIiwidmFsaWRhdGVJbWFnZUZpbGUiLCJnZXRTdXBwb3J0SW5mbyIsImZvcm1hdHMiLCJtYXhTaXplIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbIk11bHRpbW9kYWxQcm9jZXNzb3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNVUxUSU1PREFMIFBST0NFU1NPUlxuICogUHJvY2Vzc2EgZW50cmFkYSBtdWx0aW1vZGFsOiBWb3ogKFNwZWVjaC10by1UZXh0KSBlIEltYWdlbSAoVmlzaW9uKVxuICogU3Vwb3J0YTogTVAzLCBXQVYsIE1QNCwgV2ViTSwgUE5HLCBKUEcsIEdJRiwgV2ViUFxuICovXG5cbmNsYXNzIE11bHRpbW9kYWxQcm9jZXNzb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN1cHBvcnRlZEF1ZGlvRm9ybWF0cyA9IFtcIm1wM1wiLCBcIndhdlwiLCBcIm1wNFwiLCBcIndlYm1cIiwgXCJvZ2dcIiwgXCJtNGFcIl07XG4gICAgdGhpcy5zdXBwb3J0ZWRJbWFnZUZvcm1hdHMgPSBbXCJwbmdcIiwgXCJqcGdcIiwgXCJqcGVnXCIsIFwiZ2lmXCIsIFwid2VicFwiLCBcImJtcFwiXTtcbiAgICB0aGlzLm1heEF1ZGlvU2l6ZSA9IDI1ICogMTAyNCAqIDEwMjQ7IC8vIDI1TUJcbiAgICB0aGlzLm1heEltYWdlU2l6ZSA9IDIwICogMTAyNCAqIDEwMjQ7IC8vIDIwTUJcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzYXIgw6F1ZGlvIChTcGVlY2gtdG8tVGV4dClcbiAgICovXG4gIGFzeW5jIHByb2Nlc3NBdWRpbyhhdWRpb0J1ZmZlciwgZm9ybWF0ID0gXCJtcDNcIikge1xuICAgIGNvbnNvbGUubG9nKGDwn46kIFByb2Nlc3NhbmRvIMOhdWRpbyAoJHtmb3JtYXR9KS4uLmApO1xuXG4gICAgLy8gVmFsaWRhciBmb3JtYXRvXG4gICAgaWYgKCF0aGlzLnN1cHBvcnRlZEF1ZGlvRm9ybWF0cy5pbmNsdWRlcyhmb3JtYXQudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRm9ybWF0byBkZSDDoXVkaW8gbsOjbyBzdXBvcnRhZG86ICR7Zm9ybWF0fWApO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXIgdGFtYW5ob1xuICAgIGlmIChhdWRpb0J1ZmZlci5sZW5ndGggPiB0aGlzLm1heEF1ZGlvU2l6ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBcnF1aXZvIGRlIMOhdWRpbyBtdWl0byBncmFuZGU6ICR7YXVkaW9CdWZmZXIubGVuZ3RofSBieXRlc2ApO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBDaGFtYXIgQVBJIGRlIFNwZWVjaC10by1UZXh0IChHb29nbGUgQ2xvdWQgU3BlZWNoLXRvLVRleHQpXG4gICAgICBjb25zdCB0cmFuc2NyaXB0ID0gYXdhaXQgdGhpcy50cmFuc2NyaWJlQXVkaW8oYXVkaW9CdWZmZXIsIGZvcm1hdCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDinIUgw4F1ZGlvIHRyYW5zY3JpdG86IFwiJHt0cmFuc2NyaXB0LnN1YnN0cmluZygwLCA1MCl9Li4uXCJgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJhdWRpb1wiLFxuICAgICAgICBmb3JtYXQsXG4gICAgICAgIHRyYW5zY3JpcHQsXG4gICAgICAgIGNvbmZpZGVuY2U6IDAuOTUsIC8vIENvbmZpYW7Dp2EgZXN0aW1hZGFcbiAgICAgICAgZHVyYXRpb246IGF3YWl0IHRoaXMuZXN0aW1hdGVBdWRpb0R1cmF0aW9uKGF1ZGlvQnVmZmVyLCBmb3JtYXQpLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvIGFvIHByb2Nlc3NhciDDoXVkaW86ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNjcmV2ZXIgw6F1ZGlvIHZpYSBBUElcbiAgICovXG4gIGFzeW5jIHRyYW5zY3JpYmVBdWRpbyhhdWRpb0J1ZmZlciwgZm9ybWF0KSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENvbnZlcnRlciBidWZmZXIgcGFyYSBiYXNlNjRcbiAgICAgIGNvbnN0IGJhc2U2NEF1ZGlvID0gYXVkaW9CdWZmZXIudG9TdHJpbmcoXCJiYXNlNjRcIik7XG5cbiAgICAgIC8vIENoYW1hciBBUEkgZGUgdHJhbnNjcmlwdGlvbiAoc2ltdWxhZG8pXG4gICAgICAvLyBFbSBwcm9kdcOnw6NvLCB1c2FyIEdvb2dsZSBDbG91ZCBTcGVlY2gtdG8tVGV4dCBvdSBzaW1pbGFyXG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvYXBpL3RyYW5zY3JpYmVcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhdWRpbzogYmFzZTY0QXVkaW8sXG4gICAgICAgICAgZm9ybWF0LFxuICAgICAgICAgIGxhbmd1YWdlOiBcInB0LUJSXCIsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvIG5hIHRyYW5zY3Jpw6fDo286ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIGRhdGEudHJhbnNjcmlwdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gRmFsbGJhY2s6IHJldG9ybmFyIG1lbnNhZ2VtIGRlIGVycm9cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFc3RpbWFyIGR1cmHDp8OjbyBkbyDDoXVkaW9cbiAgICovXG4gIGFzeW5jIGVzdGltYXRlQXVkaW9EdXJhdGlvbihhdWRpb0J1ZmZlciwgZm9ybWF0KSB7XG4gICAgLy8gRXN0aW1hdGl2YSBzaW1wbGVzIGJhc2VhZGEgbm8gdGFtYW5ob1xuICAgIC8vIEVtIHByb2R1w6fDo28sIHVzYXIgYmlibGlvdGVjYSBkZSDDoXVkaW9cbiAgICBjb25zdCBiaXRyYXRlID0gMTI4OyAvLyBrYnBzXG4gICAgY29uc3QgZHVyYXRpb25TZWNvbmRzID0gKGF1ZGlvQnVmZmVyLmxlbmd0aCAqIDgpIC8gKGJpdHJhdGUgKiAxMDAwKTtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChkdXJhdGlvblNlY29uZHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3NhciBpbWFnZW0gKFZpc2lvbilcbiAgICovXG4gIGFzeW5jIHByb2Nlc3NJbWFnZShpbWFnZUJ1ZmZlciwgZm9ybWF0ID0gXCJwbmdcIikge1xuICAgIGNvbnNvbGUubG9nKGDwn5O4IFByb2Nlc3NhbmRvIGltYWdlbSAoJHtmb3JtYXR9KS4uLmApO1xuXG4gICAgLy8gVmFsaWRhciBmb3JtYXRvXG4gICAgaWYgKCF0aGlzLnN1cHBvcnRlZEltYWdlRm9ybWF0cy5pbmNsdWRlcyhmb3JtYXQudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRm9ybWF0byBkZSBpbWFnZW0gbsOjbyBzdXBvcnRhZG86ICR7Zm9ybWF0fWApO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXIgdGFtYW5ob1xuICAgIGlmIChpbWFnZUJ1ZmZlci5sZW5ndGggPiB0aGlzLm1heEltYWdlU2l6ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBcnF1aXZvIGRlIGltYWdlbSBtdWl0byBncmFuZGU6ICR7aW1hZ2VCdWZmZXIubGVuZ3RofSBieXRlc2ApO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBBbmFsaXNhciBpbWFnZW1cbiAgICAgIGNvbnN0IGFuYWx5c2lzID0gYXdhaXQgdGhpcy5hbmFseXplSW1hZ2UoaW1hZ2VCdWZmZXIsIGZvcm1hdCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGDinIUgSW1hZ2VtIGFuYWxpc2FkYTogJHthbmFseXNpcy5kZXNjcmlwdGlvbn1gKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJpbWFnZVwiLFxuICAgICAgICBmb3JtYXQsXG4gICAgICAgIGFuYWx5c2lzLFxuICAgICAgICBzaXplOiBpbWFnZUJ1ZmZlci5sZW5ndGgsXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm8gYW8gcHJvY2Vzc2FyIGltYWdlbTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbmFsaXNhciBpbWFnZW0gdmlhIEFQSVxuICAgKi9cbiAgYXN5bmMgYW5hbHl6ZUltYWdlKGltYWdlQnVmZmVyLCBmb3JtYXQpIHtcbiAgICB0cnkge1xuICAgICAgLy8gQ29udmVydGVyIGJ1ZmZlciBwYXJhIGJhc2U2NFxuICAgICAgY29uc3QgYmFzZTY0SW1hZ2UgPSBpbWFnZUJ1ZmZlci50b1N0cmluZyhcImJhc2U2NFwiKTtcblxuICAgICAgLy8gQ2hhbWFyIEFQSSBkZSBWaXNpb24gKHNpbXVsYWRvKVxuICAgICAgLy8gRW0gcHJvZHXDp8OjbywgdXNhciBHb29nbGUgQ2xvdWQgVmlzaW9uIG91IHNpbWlsYXJcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9hcGkvdmlzaW9uLWFuYWx5emVcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBpbWFnZTogYmFzZTY0SW1hZ2UsXG4gICAgICAgICAgZm9ybWF0LFxuICAgICAgICAgIGZlYXR1cmVzOiBbXG4gICAgICAgICAgICBcIkxBQkVMX0RFVEVDVElPTlwiLFxuICAgICAgICAgICAgXCJURVhUX0RFVEVDVElPTlwiLFxuICAgICAgICAgICAgXCJPQkpFQ1RfTE9DQUxJWkFUSU9OXCIsXG4gICAgICAgICAgICBcIlNBRkVfU0VBUkNIX0RFVEVDVElPTlwiLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvIG5hIGFuw6FsaXNlOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBkYXRhLmFuYWx5c2lzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvY2Vzc2FyIGVudHJhZGEgbXVsdGltb2RhbCAow6F1ZGlvICsgaW1hZ2VtKVxuICAgKi9cbiAgYXN5bmMgcHJvY2Vzc011bHRpbW9kYWwoaW5wdXRzKSB7XG4gICAgY29uc29sZS5sb2coYPCfjqwgUHJvY2Vzc2FuZG8gZW50cmFkYSBtdWx0aW1vZGFsLi4uYCk7XG5cbiAgICBjb25zdCByZXN1bHRzID0ge1xuICAgICAgYXVkaW86IG51bGwsXG4gICAgICBpbWFnZTogbnVsbCxcbiAgICAgIGNvbWJpbmVkOiBudWxsLFxuICAgIH07XG5cbiAgICAvLyBQcm9jZXNzYXIgw6F1ZGlvIHNlIGZvcm5lY2lkb1xuICAgIGlmIChpbnB1dHMuYXVkaW8pIHtcbiAgICAgIHJlc3VsdHMuYXVkaW8gPSBhd2FpdCB0aGlzLnByb2Nlc3NBdWRpbyhpbnB1dHMuYXVkaW8uYnVmZmVyLCBpbnB1dHMuYXVkaW8uZm9ybWF0KTtcbiAgICB9XG5cbiAgICAvLyBQcm9jZXNzYXIgaW1hZ2VtIHNlIGZvcm5lY2lkYVxuICAgIGlmIChpbnB1dHMuaW1hZ2UpIHtcbiAgICAgIHJlc3VsdHMuaW1hZ2UgPSBhd2FpdCB0aGlzLnByb2Nlc3NJbWFnZShpbnB1dHMuaW1hZ2UuYnVmZmVyLCBpbnB1dHMuaW1hZ2UuZm9ybWF0KTtcbiAgICB9XG5cbiAgICAvLyBDb21iaW5hciByZXN1bHRhZG9zXG4gICAgaWYgKHJlc3VsdHMuYXVkaW8gJiYgcmVzdWx0cy5pbWFnZSkge1xuICAgICAgcmVzdWx0cy5jb21iaW5lZCA9IHRoaXMuY29tYmluZVJlc3VsdHMocmVzdWx0cy5hdWRpbywgcmVzdWx0cy5pbWFnZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICAvKipcbiAgICogQ29tYmluYXIgcmVzdWx0YWRvcyBkZSDDoXVkaW8gZSBpbWFnZW1cbiAgICovXG4gIGNvbWJpbmVSZXN1bHRzKGF1ZGlvUmVzdWx0LCBpbWFnZVJlc3VsdCkge1xuICAgIHJldHVybiB7XG4gICAgICB0cmFuc2NyaXB0OiBhdWRpb1Jlc3VsdC50cmFuc2NyaXB0LFxuICAgICAgaW1hZ2VBbmFseXNpczogaW1hZ2VSZXN1bHQuYW5hbHlzaXMsXG4gICAgICBjb21iaW5lZENvbnRleHQ6IGDDgXVkaW86IFwiJHthdWRpb1Jlc3VsdC50cmFuc2NyaXB0fVwiXFxuXFxuSW1hZ2VtOiAke2ltYWdlUmVzdWx0LmFuYWx5c2lzLmRlc2NyaXB0aW9ufWAsXG4gICAgICBjb25maWRlbmNlOiB7XG4gICAgICAgIGF1ZGlvOiBhdWRpb1Jlc3VsdC5jb25maWRlbmNlLFxuICAgICAgICBpbWFnZTogaW1hZ2VSZXN1bHQuYW5hbHlzaXMuY29uZmlkZW5jZSB8fCAwLjksXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFpciB0ZXh0byBkZSBpbWFnZW0gKE9DUilcbiAgICovXG4gIGFzeW5jIGV4dHJhY3RUZXh0RnJvbUltYWdlKGltYWdlQnVmZmVyLCBmb3JtYXQgPSBcInBuZ1wiKSB7XG4gICAgY29uc29sZS5sb2coYPCfk4QgRXh0cmFpbmRvIHRleHRvIGRhIGltYWdlbS4uLmApO1xuXG4gICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCB0aGlzLmFuYWx5emVJbWFnZShpbWFnZUJ1ZmZlciwgZm9ybWF0KTtcblxuICAgIGlmIChhbmFseXNpcy50ZXh0RGV0ZWN0aW9uICYmIGFuYWx5c2lzLnRleHREZXRlY3Rpb24ubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgZXh0cmFjdGVkVGV4dCA9IGFuYWx5c2lzLnRleHREZXRlY3Rpb24ubWFwKChpdGVtKSA9PiBpdGVtLnRleHQpLmpvaW4oXCJcXG5cIik7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHRleHQ6IGV4dHJhY3RlZFRleHQsXG4gICAgICAgIGNvbmZpZGVuY2U6IGFuYWx5c2lzLnRleHREZXRlY3Rpb25bMF0uY29uZmlkZW5jZSB8fCAwLjksXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIHRleHQ6IFwiXCIsXG4gICAgICBtZXNzYWdlOiBcIk5lbmh1bSB0ZXh0byBlbmNvbnRyYWRvIG5hIGltYWdlbVwiLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRGVzY3JldmVyIGltYWdlbVxuICAgKi9cbiAgYXN5bmMgZGVzY3JpYmVJbWFnZShpbWFnZUJ1ZmZlciwgZm9ybWF0ID0gXCJwbmdcIikge1xuICAgIGNvbnNvbGUubG9nKGDwn5O4IERlc2NyZXZlbmRvIGltYWdlbS4uLmApO1xuXG4gICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCB0aGlzLmFuYWx5emVJbWFnZShpbWFnZUJ1ZmZlciwgZm9ybWF0KTtcblxuICAgIHJldHVybiB7XG4gICAgICBkZXNjcmlwdGlvbjogYW5hbHlzaXMuZGVzY3JpcHRpb24sXG4gICAgICBsYWJlbHM6IGFuYWx5c2lzLmxhYmVscyB8fCBbXSxcbiAgICAgIG9iamVjdHM6IGFuYWx5c2lzLm9iamVjdHMgfHwgW10sXG4gICAgICBjb25maWRlbmNlOiBhbmFseXNpcy5jb25maWRlbmNlIHx8IDAuOSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVjdGFyIGPDs2RpZ28gZW0gaW1hZ2VtXG4gICAqL1xuICBhc3luYyBkZXRlY3RDb2RlSW5JbWFnZShpbWFnZUJ1ZmZlciwgZm9ybWF0ID0gXCJwbmdcIikge1xuICAgIGNvbnNvbGUubG9nKGDwn5K7IERldGVjdGFuZG8gY8OzZGlnbyBuYSBpbWFnZW0uLi5gKTtcblxuICAgIGNvbnN0IHRleHRSZXN1bHQgPSBhd2FpdCB0aGlzLmV4dHJhY3RUZXh0RnJvbUltYWdlKGltYWdlQnVmZmVyLCBmb3JtYXQpO1xuXG4gICAgaWYgKCF0ZXh0UmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBjb2RlOiBcIlwiLFxuICAgICAgICBsYW5ndWFnZTogbnVsbCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gRGV0ZWN0YXIgbGluZ3VhZ2VtIGRlIHByb2dyYW1hw6fDo29cbiAgICBjb25zdCBsYW5ndWFnZSA9IHRoaXMuZGV0ZWN0UHJvZ3JhbW1pbmdMYW5ndWFnZSh0ZXh0UmVzdWx0LnRleHQpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjb2RlOiB0ZXh0UmVzdWx0LnRleHQsXG4gICAgICBsYW5ndWFnZSxcbiAgICAgIGNvbmZpZGVuY2U6IHRleHRSZXN1bHQuY29uZmlkZW5jZSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVjdGFyIGxpbmd1YWdlbSBkZSBwcm9ncmFtYcOnw6NvXG4gICAqL1xuICBkZXRlY3RQcm9ncmFtbWluZ0xhbmd1YWdlKGNvZGUpIHtcbiAgICBjb25zdCBwYXR0ZXJucyA9IHtcbiAgICAgIGphdmFzY3JpcHQ6IC9jb25zdHxsZXR8dmFyfGZ1bmN0aW9ufD0+fGFzeW5jfGF3YWl0LyxcbiAgICAgIHB5dGhvbjogL2RlZnxpbXBvcnR8Y2xhc3N8aWYgX19uYW1lX198cHJpbnRcXCgvLFxuICAgICAgamF2YTogL3B1YmxpYyBjbGFzc3xwdWJsaWMgc3RhdGljfGltcG9ydCBqYXZhLyxcbiAgICAgIGNwcDogLyNpbmNsdWRlfHN0ZDo6fGludCBtYWluLyxcbiAgICAgIGNzaGFycDogL3VzaW5nfG5hbWVzcGFjZXxwdWJsaWMgY2xhc3N8YXN5bmMgVGFzay8sXG4gICAgICBnbzogL3BhY2thZ2UgbWFpbnxmdW5jfGltcG9ydC8sXG4gICAgICBydXN0OiAvZm4gfGxldCB8cHViIHxpbXBsIC8sXG4gICAgICBzcWw6IC9TRUxFQ1R8SU5TRVJUfFVQREFURXxERUxFVEV8RlJPTXxXSEVSRS8sXG4gICAgICBodG1sOiAvPCFET0NUWVBFfDxodG1sfDxib2R5fDxkaXYvLFxuICAgICAgY3NzOiAvQG1lZGlhfFxcLmNsYXNzfCNpZHx7Lio6Lio7fS8sXG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgW2xhbmcsIHBhdHRlcm5dIG9mIE9iamVjdC5lbnRyaWVzKHBhdHRlcm5zKSkge1xuICAgICAgaWYgKHBhdHRlcm4udGVzdChjb2RlKSkge1xuICAgICAgICByZXR1cm4gbGFuZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGFyIGFycXVpdm8gZGUgw6F1ZGlvXG4gICAqL1xuICB2YWxpZGF0ZUF1ZGlvRmlsZShmaWxlbmFtZSwgc2l6ZSkge1xuICAgIGNvbnN0IGV4dCA9IGZpbGVuYW1lLnNwbGl0KFwiLlwiKS5wb3AoKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKCF0aGlzLnN1cHBvcnRlZEF1ZGlvRm9ybWF0cy5pbmNsdWRlcyhleHQpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiBgRm9ybWF0byBuw6NvIHN1cG9ydGFkbzogJHtleHR9YCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHNpemUgPiB0aGlzLm1heEF1ZGlvU2l6ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogYEFycXVpdm8gbXVpdG8gZ3JhbmRlOiAke3NpemV9IGJ5dGVzIChtw6F4aW1vOiAke3RoaXMubWF4QXVkaW9TaXplfSlgLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXIgYXJxdWl2byBkZSBpbWFnZW1cbiAgICovXG4gIHZhbGlkYXRlSW1hZ2VGaWxlKGZpbGVuYW1lLCBzaXplKSB7XG4gICAgY29uc3QgZXh0ID0gZmlsZW5hbWUuc3BsaXQoXCIuXCIpLnBvcCgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAoIXRoaXMuc3VwcG9ydGVkSW1hZ2VGb3JtYXRzLmluY2x1ZGVzKGV4dCkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGBGb3JtYXRvIG7Do28gc3Vwb3J0YWRvOiAke2V4dH1gLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoc2l6ZSA+IHRoaXMubWF4SW1hZ2VTaXplKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiBgQXJxdWl2byBtdWl0byBncmFuZGU6ICR7c2l6ZX0gYnl0ZXMgKG3DoXhpbW86ICR7dGhpcy5tYXhJbWFnZVNpemV9KWAsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG4gIH1cblxuICAvKipcbiAgICogT2J0ZXIgaW5mb3JtYcOnw7VlcyBkZSBzdXBvcnRlXG4gICAqL1xuICBnZXRTdXBwb3J0SW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXVkaW86IHtcbiAgICAgICAgZm9ybWF0czogdGhpcy5zdXBwb3J0ZWRBdWRpb0Zvcm1hdHMsXG4gICAgICAgIG1heFNpemU6IHRoaXMubWF4QXVkaW9TaXplLFxuICAgICAgICBmZWF0dXJlczogW1wiU3BlZWNoLXRvLVRleHRcIiwgXCJUcmFuc2NyaXB0aW9uXCIsIFwiTGFuZ3VhZ2UgRGV0ZWN0aW9uXCJdLFxuICAgICAgfSxcbiAgICAgIGltYWdlOiB7XG4gICAgICAgIGZvcm1hdHM6IHRoaXMuc3VwcG9ydGVkSW1hZ2VGb3JtYXRzLFxuICAgICAgICBtYXhTaXplOiB0aGlzLm1heEltYWdlU2l6ZSxcbiAgICAgICAgZmVhdHVyZXM6IFtcIk9DUlwiLCBcIk9iamVjdCBEZXRlY3Rpb25cIiwgXCJMYWJlbCBEZXRlY3Rpb25cIiwgXCJDb2RlIERldGVjdGlvblwiXSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNdWx0aW1vZGFsUHJvY2Vzc29yO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLG1CQUFtQixDQUFDO0VBQ3hCQyxXQUFXQSxDQUFBLEVBQUc7SUFDWixJQUFJLENBQUNDLHFCQUFxQixHQUFHLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUM7SUFDeEUsSUFBSSxDQUFDQyxxQkFBcUIsR0FBRyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDO0lBQ3pFLElBQUksQ0FBQ0MsWUFBWSxHQUFHLEVBQUUsR0FBRyxJQUFJLEdB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