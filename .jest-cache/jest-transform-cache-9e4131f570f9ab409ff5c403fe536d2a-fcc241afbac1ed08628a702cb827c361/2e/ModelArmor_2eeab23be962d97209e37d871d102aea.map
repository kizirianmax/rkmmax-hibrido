{"version":3,"names":["cov_btbpe47n7","actualCoverage","ModelArmor","constructor","f","s","filters","promptInjection","sensitiveData","sqlInjection","codeExecution","jailbreak","severityMap","severityWeights","CRITICAL","HIGH","MEDIUM","LOW","analyzePrompt","prompt","b","isClean","violations","category","severity","riskScore","recommendation","scores","patterns","Object","entries","pattern","matches","match","length","push","toString","substring","_calculateRiskScore","_getRecommendation","timestamp","Date","now","filterResponse","response","filtered","redactions","isModified","matchAll","original","preview","position","index","replace","validateComplete","promptAnalysis","responseFiltered","isValid","requiresApproval","reduce","score","v","critical","filter","high","generateReport","analysis","report","forEach","i","toISOString","module","exports"],"sources":["ModelArmor.js"],"sourcesContent":["/**\n * MODEL ARMOR - Filtros de Segurança de Alto Padrão\n * Análise multi-camada de prompts e respostas\n * Detecção de: Prompt Injection, Sensitive Data, SQL Injection, Code Execution, Jailbreak\n */\n\nclass ModelArmor {\n  constructor() {\n    this.filters = {\n      // PROMPT INJECTION DETECTION\n      promptInjection: [\n        /(?:ignore|forget|discard)[\\s\\n]*(?:previous|prior|above)[\\s\\n]*(?:instructions|rules|prompts)/gi,\n        /(?:system|admin|root)[\\s\\n]*(?:prompt|instruction|command)/gi,\n        /(?:reveal|show|display)[\\s\\n]*(?:system|hidden|secret)[\\s\\n]*(?:prompt|message)/gi,\n        /(?:what is|what's|tell me)[\\s\\n]*(?:your|the)[\\s\\n]*(?:system|hidden|secret)[\\s\\n]*(?:prompt|instruction)/gi,\n      ],\n\n      // SENSITIVE DATA PATTERNS\n      sensitiveData: [\n        /\\b(?:password|passwd|pwd|secret|token|api[_-]?key|auth|credential|bearer)\\b[\\s:=]*[^\\s\\n]*/gi,\n        /\\b(?:credit[\\s-]?card|cc|cvv|ssn|social[\\s-]?security|pii)\\b[\\s:=]*\\d+/gi,\n        /\\b(?:email|phone|address|cpf|cnpj|rg|passport)\\b[\\s:=]*[^\\s\\n]*/gi,\n        /\\b(?:private[\\s-]?key|secret[\\s-]?key|access[\\s-]?key)\\b[\\s:=]*[^\\s\\n]*/gi,\n      ],\n\n      // SQL INJECTION PATTERNS\n      sqlInjection: [\n        /(?:union|select|insert|update|delete|drop|create|alter|truncate)[\\s\\n]+(?:from|into|table|database|schema)/gi,\n        /(?:--|#|\\/\\*|\\*\\/)\\s*(?:comment|drop|delete|insert|union)/gi,\n        /(?:or|and)[\\s\\n]*['\"]?\\d+['\"]?[\\s\\n]*=[\\s\\n]*['\"]?\\d+['\"]?/gi,\n      ],\n\n      // CODE EXECUTION PATTERNS\n      codeExecution: [\n        /(?:eval|exec|system|shell|bash|cmd|powershell|spawn|fork)\\s*\\(/gi,\n        /(?:require|import|load|include)[\\s\\n]*\\([\\s\\n]*['\"]/gi,\n        /(?:process\\.env|process\\.argv|__dirname|__filename)/gi,\n      ],\n\n      // JAILBREAK ATTEMPTS\n      jailbreak: [\n        /(?:pretend|imagine|roleplay|assume|act as|be a)[\\s\\n]+(?:you are|you're|you have|you've)[\\s\\n]+(?:not|no longer|no more|without)/gi,\n        /(?:forget|ignore|disregard|override)[\\s\\n]+(?:your|the)[\\s\\n]+(?:guidelines|rules|restrictions|limitations|constraints)/gi,\n        /(?:DAN|do anything now|unrestricted|unfiltered|uncensored)/gi,\n      ],\n    };\n\n    this.severityMap = {\n      promptInjection: \"CRITICAL\",\n      sensitiveData: \"HIGH\",\n      sqlInjection: \"CRITICAL\",\n      codeExecution: \"CRITICAL\",\n      jailbreak: \"HIGH\",\n    };\n\n    this.severityWeights = {\n      CRITICAL: 100,\n      HIGH: 50,\n      MEDIUM: 25,\n      LOW: 5,\n    };\n  }\n\n  /**\n   * Análise Multi-Camada de Prompts\n   * @param {string} prompt - Prompt do usuário\n   * @returns {Object} Resultado da análise\n   */\n  analyzePrompt(prompt) {\n    if (!prompt || typeof prompt !== \"string\") {\n      return {\n        isClean: false,\n        violations: [{ category: \"invalid_input\", severity: \"HIGH\" }],\n        riskScore: 50,\n        recommendation: \"BLOCK\",\n      };\n    }\n\n    const violations = [];\n    const scores = {};\n\n    // Análise por categoria\n    for (const [category, patterns] of Object.entries(this.filters)) {\n      scores[category] = 0;\n\n      for (const pattern of patterns) {\n        const matches = (prompt.match(pattern) || []).length;\n        if (matches > 0) {\n          scores[category] += matches;\n          violations.push({\n            category,\n            pattern: pattern.toString().substring(0, 50),\n            matches,\n            severity: this.severityMap[category] || \"MEDIUM\",\n          });\n        }\n      }\n    }\n\n    const riskScore = this._calculateRiskScore(violations);\n    const recommendation = this._getRecommendation(violations, riskScore);\n\n    return {\n      isClean: violations.length === 0,\n      violations,\n      scores,\n      riskScore,\n      recommendation,\n      timestamp: Date.now(),\n    };\n  }\n\n  /**\n   * Filtragem de Respostas com Redação\n   * @param {string} response - Resposta do modelo\n   * @returns {Object} Resposta filtrada\n   */\n  filterResponse(response) {\n    if (!response || typeof response !== \"string\") {\n      return {\n        filtered: response,\n        redactions: [],\n        isModified: false,\n      };\n    }\n\n    let filtered = response;\n    const redactions = [];\n\n    // Redact sensitive data\n    for (const pattern of this.filters.sensitiveData) {\n      const matches = response.matchAll(pattern);\n      for (const match of matches) {\n        const original = match[0];\n        const preview = original.substring(0, 10) + \"...\";\n\n        redactions.push({\n          original: preview,\n          category: \"sensitive_data\",\n          position: match.index,\n        });\n\n        filtered = filtered.replace(original, \"[REDACTED_SENSITIVE_DATA]\");\n      }\n    }\n\n    return {\n      filtered,\n      redactions,\n      isModified: redactions.length > 0,\n      timestamp: Date.now(),\n    };\n  }\n\n  /**\n   * Validação Completa (Prompt + Response)\n   * @param {string} prompt - Prompt original\n   * @param {string} response - Resposta do modelo\n   * @returns {Object} Resultado da validação completa\n   */\n  validateComplete(prompt, response) {\n    const promptAnalysis = this.analyzePrompt(prompt);\n    const responseFiltered = this.filterResponse(response);\n\n    return {\n      prompt: promptAnalysis,\n      response: responseFiltered,\n      isValid: promptAnalysis.recommendation !== \"BLOCK\",\n      requiresApproval:\n        promptAnalysis.recommendation === \"REQUIRE_CONSENT\" || responseFiltered.isModified,\n      timestamp: Date.now(),\n    };\n  }\n\n  /**\n   * Cálculo de Score de Risco\n   * @param {Array} violations - Array de violações\n   * @returns {number} Score de risco (0-1000)\n   */\n  _calculateRiskScore(violations) {\n    return violations.reduce((score, v) => {\n      return score + (this.severityWeights[v.severity] || 0);\n    }, 0);\n  }\n\n  /**\n   * Recomendação Baseada em Análise\n   * @param {Array} violations - Array de violações\n   * @param {number} riskScore - Score de risco\n   * @returns {string} Recomendação (ALLOW, WARN, REQUIRE_CONSENT, BLOCK)\n   */\n  _getRecommendation(violations, riskScore) {\n    if (violations.length === 0) return \"ALLOW\";\n\n    const critical = violations.filter((v) => v.severity === \"CRITICAL\");\n    if (critical.length > 0) return \"BLOCK\";\n\n    const high = violations.filter((v) => v.severity === \"HIGH\");\n    if (high.length > 0) return \"REQUIRE_CONSENT\";\n\n    if (riskScore > 50) return \"WARN\";\n\n    return \"ALLOW\";\n  }\n\n  /**\n   * Gerar Relatório de Segurança\n   * @param {Object} analysis - Resultado da análise\n   * @returns {string} Relatório formatado\n   */\n  generateReport(analysis) {\n    const { isClean, violations, riskScore, recommendation } = analysis;\n\n    let report = `\n╔════════════════════════════════════════╗\n║     MODEL ARMOR - SECURITY REPORT      ║\n╚════════════════════════════════════════╝\n\nStatus: ${isClean ? \"✅ CLEAN\" : \"⚠️  VIOLATIONS DETECTED\"}\nRisk Score: ${riskScore}/1000\nRecommendation: ${recommendation}\n\nViolations: ${violations.length}\n`;\n\n    if (violations.length > 0) {\n      report += \"\\nDetailed Violations:\\n\";\n      violations.forEach((v, i) => {\n        report += `  ${i + 1}. [${v.severity}] ${v.category} (${v.matches} match${v.matches > 1 ? \"es\" : \"\"})\\n`;\n      });\n    }\n\n    report += `\\nTimestamp: ${new Date(analysis.timestamp).toISOString()}`;\n\n    return report;\n  }\n}\n\nmodule.exports = ModelArmor;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}