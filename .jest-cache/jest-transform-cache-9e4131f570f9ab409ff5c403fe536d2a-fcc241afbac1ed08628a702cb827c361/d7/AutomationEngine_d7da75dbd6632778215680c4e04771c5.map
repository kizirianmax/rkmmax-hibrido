{"version":3,"names":["_SecurityValidator","_interopRequireDefault","require","_AuditLogger","_GitHubAutomation","_SpecialistSelector","AutomationEngine","constructor","config","maxRetries","timeout","aiModel","temperature","validator","SecurityValidator","auditLogger","AuditLogger","specialistSelector","SpecialistSelector","gitHub","initializeGitHub","token","GitHubAutomation","error","console","executeAutomation","request","automationId","logAutomationRequest","userId","username","command","mode","selectedSpecialist","description","ipAddress","userAgent","sessionId","result","status","steps","errors","_commitResult","_prResult","_commitResult2","_prResult2","log","analysis","analyzeCommand","push","phase","details","specialist","selectSpecialist","taskType","keywords","codeGeneration","generateCode","repositoryInfo","filesGenerated","files","length","linesOfCode","totalLines","securityValidation","validateCode","isValid","message","logSecurityValidation","filesChecked","severity","warnings","commitResult","commitAndPush","commitMessage","commitHash","commit","sha","filesChanged","prResult","createPR","createPullRequest","prNumber","pr","number","prUrl","url","output","logAutomationCompletion","totalDuration","filesCreated","linesAdded","creditsUsed","_result$steps","stack","logError","errorType","name","errorMessage","errorStack","toLowerCase","split","includes","substring","path","Date","now","content","reduce","sum","f","validation","validateFiles","flatMap","d","Error","owner","repo","branch","email","branchName","getAutomationHistory","limit","searchLogs","type","slice","getAutomationStats","logs","stats","totalAutomations","successfulAutomations","filter","l","failedAutomations","blockedAutomations","byMode","bySpecialist","forEach","_default","exports","default"],"sources":["AutomationEngine.js"],"sourcesContent":["/**\n * AUTOMATION ENGINE\n * Motor central de automaÃ§Ã£o que orquestra todo o processo\n * Coordena: AnÃ¡lise â†’ SeleÃ§Ã£o de Especialista â†’ GeraÃ§Ã£o de CÃ³digo â†’ ValidaÃ§Ã£o â†’ Commit\n */\n\nimport SecurityValidator from \"./SecurityValidator.js\";\nimport AuditLogger from \"./AuditLogger.js\";\nimport GitHubAutomation from \"./GitHubAutomation.js\";\nimport SpecialistSelector from \"./SpecialistSelector.js\";\n\nclass AutomationEngine {\n  constructor(config = {}) {\n    this.config = {\n      maxRetries: config.maxRetries || 3,\n      timeout: config.timeout || 30000,\n      aiModel: config.aiModel || \"gemini-2.0-flash\",\n      temperature: config.temperature || 0.7,\n      ...config,\n    };\n\n    this.validator = new SecurityValidator();\n    this.auditLogger = new AuditLogger();\n    this.specialistSelector = new SpecialistSelector();\n\n    // GitHub serÃ¡ inicializado quando necessÃ¡rio\n    this.gitHub = null;\n  }\n\n  /**\n   * Inicializar GitHub Automation\n   */\n  initializeGitHub(token) {\n    try {\n      this.gitHub = new GitHubAutomation(token);\n      return true;\n    } catch (error) {\n      console.error(\"Erro ao inicializar GitHub:\", error);\n      return false;\n    }\n  }\n\n  /**\n   * Executar automaÃ§Ã£o completa\n   */\n  async executeAutomation(request) {\n    const automationId = this.auditLogger.logAutomationRequest({\n      userId: request.userId,\n      username: request.username,\n      command: request.command,\n      mode: request.mode || \"OPTIMIZED\",\n      selectedSpecialist: request.selectedSpecialist,\n      description: request.description,\n      ipAddress: request.ipAddress,\n      userAgent: request.userAgent,\n      sessionId: request.sessionId,\n    });\n\n    const result = {\n      automationId,\n      status: \"INITIATED\",\n      steps: [],\n      errors: [],\n    };\n\n    try {\n      // Fase 1: AnÃ¡lise do comando\n      console.log(`\\nðŸ“‹ FASE 1: AnÃ¡lise do comando`);\n      const analysis = await this.analyzeCommand(request.command);\n      result.steps.push({\n        phase: \"ANALYSIS\",\n        status: \"COMPLETED\",\n        details: analysis,\n      });\n\n      // Fase 2: SeleÃ§Ã£o de especialista\n      console.log(`\\nðŸŽ¯ FASE 2: SeleÃ§Ã£o de especialista`);\n      let specialist;\n\n      if (request.mode === \"HYBRID\" && request.selectedSpecialist) {\n        specialist = request.selectedSpecialist;\n        console.log(`âœ… Especialista selecionado manualmente: ${specialist}`);\n      } else {\n        specialist = await this.specialistSelector.selectSpecialist(\n          analysis.taskType,\n          analysis.keywords\n        );\n        console.log(`âœ… Especialista selecionado automaticamente: ${specialist}`);\n      }\n\n      result.steps.push({\n        phase: \"SPECIALIST_SELECTION\",\n        status: \"COMPLETED\",\n        specialist,\n        mode: request.mode,\n      });\n\n      // Fase 3: GeraÃ§Ã£o de cÃ³digo\n      console.log(`\\nðŸ’» FASE 3: GeraÃ§Ã£o de cÃ³digo`);\n      const codeGeneration = await this.generateCode(analysis, specialist, request.repositoryInfo);\n\n      result.steps.push({\n        phase: \"CODE_GENERATION\",\n        status: \"COMPLETED\",\n        filesGenerated: codeGeneration.files.length,\n        linesOfCode: codeGeneration.totalLines,\n      });\n\n      // Fase 4: ValidaÃ§Ã£o de seguranÃ§a\n      console.log(`\\nðŸ” FASE 4: ValidaÃ§Ã£o de seguranÃ§a`);\n      const securityValidation = await this.validateCode(codeGeneration.files);\n\n      if (!securityValidation.isValid) {\n        result.status = \"BLOCKED\";\n        result.errors.push({\n          phase: \"SECURITY_VALIDATION\",\n          message: \"CÃ³digo bloqueado por validaÃ§Ã£o de seguranÃ§a\",\n          details: securityValidation,\n        });\n\n        this.auditLogger.logSecurityValidation({\n          automationId,\n          filesChecked: codeGeneration.files.length,\n          isValid: false,\n          severity: securityValidation.severity,\n          errors: securityValidation.errors,\n          warnings: securityValidation.warnings,\n        });\n\n        return result;\n      }\n\n      result.steps.push({\n        phase: \"SECURITY_VALIDATION\",\n        status: \"COMPLETED\",\n        warnings: securityValidation.warnings.length,\n      });\n\n      // Fase 5: Commit + Push\n      console.log(`\\nðŸ“ FASE 5: Commit + Push`);\n      let commitResult = null;\n\n      if (request.repositoryInfo && this.gitHub) {\n        commitResult = await this.commitAndPush(\n          codeGeneration.files,\n          analysis.commitMessage,\n          request.repositoryInfo,\n          specialist\n        );\n\n        result.steps.push({\n          phase: \"GIT_COMMIT\",\n          status: \"COMPLETED\",\n          commitHash: commitResult.commit.sha,\n          filesChanged: commitResult.filesChanged,\n        });\n      }\n\n      // Fase 6: Criar PR (opcional)\n      console.log(`\\nðŸ”€ FASE 6: Criar Pull Request (opcional)`);\n      let prResult = null;\n\n      if (request.createPR && this.gitHub && commitResult) {\n        prResult = await this.createPullRequest(analysis, specialist, request.repositoryInfo);\n\n        result.steps.push({\n          phase: \"CREATE_PR\",\n          status: \"COMPLETED\",\n          prNumber: prResult.pr.number,\n          prUrl: prResult.pr.url,\n        });\n      }\n\n      // Sucesso!\n      result.status = \"SUCCESS\";\n      result.output = {\n        files: codeGeneration.files,\n        commit: commitResult?.commit,\n        pr: prResult?.pr,\n      };\n\n      // Log de conclusÃ£o\n      this.auditLogger.logAutomationCompletion({\n        automationId,\n        userId: request.userId,\n        status: \"SUCCESS\",\n        totalDuration: result.totalDuration,\n        commitHash: commitResult?.commit.sha,\n        prUrl: prResult?.pr.url,\n        filesCreated: codeGeneration.files.length,\n        linesAdded: codeGeneration.totalLines,\n        specialist,\n        mode: request.mode,\n        creditsUsed: request.creditsUsed,\n      });\n\n      return result;\n    } catch (error) {\n      console.error(`âŒ Erro na automaÃ§Ã£o: ${error.message}`);\n\n      result.status = \"FAILED\";\n      result.errors.push({\n        message: error.message,\n        stack: error.stack,\n      });\n\n      // Log de erro\n      this.auditLogger.logError({\n        automationId,\n        userId: request.userId,\n        errorType: error.constructor.name,\n        errorMessage: error.message,\n        errorStack: error.stack,\n        phase: result.steps[result.steps.length - 1]?.phase || \"UNKNOWN\",\n      });\n\n      return result;\n    }\n  }\n\n  /**\n   * Analisar comando do usuÃ¡rio\n   */\n  async analyzeCommand(command) {\n    // Aqui seria chamada uma IA para analisar o comando\n    // Por enquanto, anÃ¡lise simples\n\n    const keywords = command.toLowerCase().split(\" \");\n\n    let taskType = \"GENERAL\";\n    if (command.includes(\"componente\") || command.includes(\"component\")) taskType = \"COMPONENT\";\n    if (command.includes(\"funÃ§Ã£o\") || command.includes(\"function\")) taskType = \"FUNCTION\";\n    if (command.includes(\"teste\") || command.includes(\"test\")) taskType = \"TEST\";\n    if (command.includes(\"estilo\") || command.includes(\"style\")) taskType = \"STYLE\";\n    if (command.includes(\"documentaÃ§Ã£o\") || command.includes(\"documentation\"))\n      taskType = \"DOCUMENTATION\";\n    if (command.includes(\"refatorar\") || command.includes(\"refactor\")) taskType = \"REFACTOR\";\n\n    return {\n      command,\n      taskType,\n      keywords,\n      commitMessage: `feat: ${command.substring(0, 50)}`,\n      description: command,\n    };\n  }\n\n  /**\n   * Gerar cÃ³digo via IA\n   */\n  async generateCode(analysis, specialist, repositoryInfo) {\n    // Aqui seria chamada a IA (Gemini, GROQ, etc)\n    // Por enquanto, simulaÃ§Ã£o\n\n    console.log(`ðŸ¤– Gerando cÃ³digo com ${specialist}...`);\n\n    // Simular geraÃ§Ã£o de cÃ³digo\n    const files = [\n      {\n        path: `src/generated_${Date.now()}.js`,\n        content: `// Gerado automaticamente por ${specialist}\\n// Tarefa: ${analysis.description}\\n\\nexport default function generated() {\\n  // CÃ³digo gerado aqui\\n}\\n`,\n      },\n    ];\n\n    return {\n      files,\n      totalLines: files.reduce((sum, f) => sum + f.content.split(\"\\n\").length, 0),\n      specialist,\n    };\n  }\n\n  /**\n   * Validar cÃ³digo\n   */\n  async validateCode(files) {\n    console.log(`ðŸ” Validando ${files.length} arquivos...`);\n\n    const validation = await this.validator.validateFiles(files);\n\n    if (!validation.isValid) {\n      console.log(`âŒ ValidaÃ§Ã£o falhou!`);\n      return {\n        isValid: false,\n        severity: \"critical\",\n        errors: validation.details.flatMap((d) => d.errors),\n        warnings: validation.details.flatMap((d) => d.warnings),\n      };\n    }\n\n    console.log(`âœ… CÃ³digo validado com sucesso!`);\n    return {\n      isValid: true,\n      severity: \"none\",\n      errors: [],\n      warnings: validation.details.flatMap((d) => d.warnings),\n    };\n  }\n\n  /**\n   * Fazer commit + push\n   */\n  async commitAndPush(files, message, repositoryInfo, specialist) {\n    console.log(`ðŸ“ Fazendo commit + push...`);\n\n    if (!this.gitHub) {\n      throw new Error(\"GitHub nÃ£o inicializado\");\n    }\n\n    const result = await this.gitHub.commitAndPush(\n      repositoryInfo.owner,\n      repositoryInfo.repo,\n      files,\n      message,\n      repositoryInfo.branch || \"main\",\n      {\n        name: `${specialist} Bot`,\n        email: `${specialist.toLowerCase()}@rkmmax.com`,\n      }\n    );\n\n    console.log(`âœ… Commit realizado: ${result.commit.sha.substring(0, 7)}`);\n\n    return result;\n  }\n\n  /**\n   * Criar Pull Request\n   */\n  async createPullRequest(analysis, specialist, repositoryInfo) {\n    console.log(`ðŸ”€ Criando Pull Request...`);\n\n    if (!this.gitHub) {\n      throw new Error(\"GitHub nÃ£o inicializado\");\n    }\n\n    const branchName = `automation/${specialist.toLowerCase()}/${Date.now()}`;\n\n    const pr = await this.gitHub.createPullRequest(\n      repositoryInfo.owner,\n      repositoryInfo.repo,\n      `[${specialist}] ${analysis.commitMessage}`,\n      `AutomaÃ§Ã£o executada por ${specialist}\\n\\nTarefa: ${analysis.description}`,\n      branchName,\n      repositoryInfo.branch || \"main\"\n    );\n\n    console.log(`âœ… PR criado: ${pr.url}`);\n\n    return { pr };\n  }\n\n  /**\n   * Obter histÃ³rico de automaÃ§Ãµes\n   */\n  getAutomationHistory(userId, limit = 50) {\n    return this.auditLogger\n      .searchLogs({\n        type: \"AUTOMATION_REQUEST\",\n        userId,\n      })\n      .slice(-limit);\n  }\n\n  /**\n   * Obter estatÃ­sticas de automaÃ§Ã£o\n   */\n  getAutomationStats(userId) {\n    const logs = this.auditLogger.searchLogs({ userId });\n\n    const stats = {\n      totalAutomations: logs.length,\n      successfulAutomations: logs.filter((l) => l.status === \"SUCCESS\").length,\n      failedAutomations: logs.filter((l) => l.status === \"FAILED\").length,\n      blockedAutomations: logs.filter((l) => l.status === \"BLOCKED\").length,\n      byMode: {},\n      bySpecialist: {},\n    };\n\n    logs.forEach((log) => {\n      if (log.mode) {\n        stats.byMode[log.mode] = (stats.byMode[log.mode] || 0) + 1;\n      }\n      if (log.selectedSpecialist) {\n        stats.bySpecialist[log.selectedSpecialist] =\n          (stats.bySpecialist[log.selectedSpecialist] || 0) + 1;\n      }\n    });\n\n    return stats;\n  }\n}\n\nexport default AutomationEngine;\n"],"mappings":"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","ignoreList":[]}