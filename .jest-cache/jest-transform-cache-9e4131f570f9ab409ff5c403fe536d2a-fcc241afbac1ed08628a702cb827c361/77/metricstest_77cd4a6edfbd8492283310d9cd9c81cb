7cf623205b96c93616268889acef4f39
"use strict";

var _metrics = require("../lib/metrics.js");
/**
 * Tests for Performance Metrics
 */

describe('PerformanceMetrics', () => {
  let metrics;
  beforeEach(() => {
    metrics = new _metrics.PerformanceMetrics();
  });
  test('should record successful request', () => {
    metrics.recordRequest({
      success: true,
      responseTime: 1500,
      engine: 'gemini-pro',
      cached: false
    });
    const stats = metrics.getMetrics();
    expect(stats.requests.total).toBe(1);
    expect(stats.requests.successful).toBe(1);
    expect(stats.requests.failed).toBe(0);
  });
  test('should record failed request', () => {
    metrics.recordRequest({
      success: false,
      responseTime: 2000,
      engine: 'groq-speed',
      error: 'Timeout error',
      timeout: true
    });
    const stats = metrics.getMetrics();
    expect(stats.requests.total).toBe(1);
    expect(stats.requests.failed).toBe(1);
    expect(stats.performance.timeouts).toBe(1);
  });
  test('should track engine usage', () => {
    metrics.recordRequest({
      success: true,
      engine: 'gemini-pro'
    });
    metrics.recordRequest({
      success: true,
      engine: 'gemini-pro'
    });
    metrics.recordRequest({
      success: true,
      engine: 'groq-speed'
    });
    const stats = metrics.getMetrics();
    expect(stats.engines['gemini-pro']).toBe(2);
    expect(stats.engines['groq-speed']).toBe(1);
  });
  test('should calculate response time statistics', () => {
    const times = [1000, 1500, 2000, 2500, 3000];
    times.forEach(time => {
      metrics.recordRequest({
        success: true,
        responseTime: time
      });
    });
    const stats = metrics.getMetrics();
    expect(stats.performance.avgResponseTime).toBe('2000ms');
    expect(stats.performance.minResponseTime).toBe('1000ms');
    expect(stats.performance.maxResponseTime).toBe('3000ms');
  });
  test('should track cache statistics', () => {
    metrics.recordRequest({
      success: true,
      cached: true
    });
    metrics.recordRequest({
      success: true,
      cached: true
    });
    metrics.recordRequest({
      success: true,
      cached: false
    });
    const stats = metrics.getMetrics();
    expect(stats.cache.hits).toBe(2);
    expect(stats.cache.misses).toBe(1);
    expect(stats.cache.hitRate).toBe('66.67%');
  });
  test('should calculate success rate correctly', () => {
    metrics.recordRequest({
      success: true
    });
    metrics.recordRequest({
      success: true
    });
    metrics.recordRequest({
      success: false
    });
    metrics.recordRequest({
      success: true
    });
    const stats = metrics.getMetrics();
    expect(stats.requests.successRate).toBe('75.00%');
  });
  test('should track recent errors', () => {
    metrics.recordRequest({
      success: false,
      error: 'First error',
      engine: 'gemini-pro'
    });
    metrics.recordRequest({
      success: false,
      error: 'Second error',
      engine: 'groq-speed'
    });
    const stats = metrics.getMetrics();
    expect(stats.recentErrors).toHaveLength(2);
    expect(stats.recentErrors[0].message).toBe('First error');
    expect(stats.recentErrors[1].message).toBe('Second error');
  });
  test('should limit response time history to 1000', () => {
    // Add 1500 entries
    for (let i = 0; i < 1500; i++) {
      metrics.recordRequest({
        success: true,
        responseTime: 1000 + i
      });
    }
    expect(metrics.metrics.responseTimes).toHaveLength(1000);
  });
  test('should limit error history to 100', () => {
    // Add 150 errors
    for (let i = 0; i < 150; i++) {
      metrics.recordRequest({
        success: false,
        error: `Error ${i}`
      });
    }
    expect(metrics.metrics.errors).toHaveLength(100);
  });
  test('should calculate P95 and P99 correctly', () => {
    // Add 100 response times from 0 to 99ms
    for (let i = 0; i < 100; i++) {
      metrics.recordRequest({
        success: true,
        responseTime: i
      });
    }
    const stats = metrics.getMetrics();
    const p95 = parseInt(stats.performance.p95ResponseTime);
    const p99 = parseInt(stats.performance.p99ResponseTime);
    expect(p95).toBeGreaterThanOrEqual(90);
    expect(p99).toBeGreaterThanOrEqual(95);
  });
  test('should handle zero requests gracefully', () => {
    const stats = metrics.getMetrics();
    expect(stats.requests.total).toBe(0);
    expect(stats.requests.successRate).toBe('0%');
    expect(stats.cache.hitRate).toBe('0%');
    expect(stats.performance.avgResponseTime).toBe('0ms');
  });
  test('should reset metrics correctly', () => {
    metrics.recordRequest({
      success: true,
      responseTime: 1000,
      engine: 'gemini-pro'
    });
    metrics.recordRequest({
      success: false,
      error: 'Test error'
    });
    metrics.reset();
    const stats = metrics.getMetrics();
    expect(stats.requests.total).toBe(0);
    expect(stats.requests.successful).toBe(0);
    expect(stats.requests.failed).toBe(0);
    expect(stats.performance.timeouts).toBe(0);
    expect(Object.keys(stats.engines)).toHaveLength(0);
  });
  test('should export to Sentry format', () => {
    const mockSentry = {
      setContext: jest.fn()
    };
    metrics.recordRequest({
      success: true,
      responseTime: 1500,
      engine: 'gemini-pro'
    });
    metrics.exportToSentry(mockSentry);
    expect(mockSentry.setContext).toHaveBeenCalledWith('performance', expect.any(Object));
    expect(mockSentry.setContext).toHaveBeenCalledWith('engines', expect.any(Object));
    expect(mockSentry.setContext).toHaveBeenCalledWith('cache', expect.any(Object));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbWV0cmljcyIsInJlcXVpcmUiLCJkZXNjcmliZSIsIm1ldHJpY3MiLCJiZWZvcmVFYWNoIiwiUGVyZm9ybWFuY2VNZXRyaWNzIiwidGVzdCIsInJlY29yZFJlcXVlc3QiLCJzdWNjZXNzIiwicmVzcG9uc2VUaW1lIiwiZW5naW5lIiwiY2FjaGVkIiwic3RhdHMiLCJnZXRNZXRyaWNzIiwiZXhwZWN0IiwicmVxdWVzdHMiLCJ0b3RhbCIsInRvQmUiLCJzdWNjZXNzZnVsIiwiZmFpbGVkIiwiZXJyb3IiLCJ0aW1lb3V0IiwicGVyZm9ybWFuY2UiLCJ0aW1lb3V0cyIsImVuZ2luZXMiLCJ0aW1lcyIsImZvckVhY2giLCJ0aW1lIiwiYXZnUmVzcG9uc2VUaW1lIiwibWluUmVzcG9uc2VUaW1lIiwibWF4UmVzcG9uc2VUaW1lIiwiY2FjaGUiLCJoaXRzIiwibWlzc2VzIiwiaGl0UmF0ZSIsInN1Y2Nlc3NSYXRlIiwicmVjZW50RXJyb3JzIiwidG9IYXZlTGVuZ3RoIiwibWVzc2FnZSIsImkiLCJyZXNwb25zZVRpbWVzIiwiZXJyb3JzIiwicDk1IiwicGFyc2VJbnQiLCJwOTVSZXNwb25zZVRpbWUiLCJwOTkiLCJwOTlSZXNwb25zZVRpbWUiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwicmVzZXQiLCJPYmplY3QiLCJrZXlzIiwibW9ja1NlbnRyeSIsInNldENvbnRleHQiLCJqZXN0IiwiZm4iLCJleHBvcnRUb1NlbnRyeSIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiYW55Il0sInNvdXJjZXMiOlsibWV0cmljcy50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdHMgZm9yIFBlcmZvcm1hbmNlIE1ldHJpY3NcbiAqL1xuXG5pbXBvcnQgeyBQZXJmb3JtYW5jZU1ldHJpY3MgfSBmcm9tICcuLi9saWIvbWV0cmljcy5qcyc7XG5cbmRlc2NyaWJlKCdQZXJmb3JtYW5jZU1ldHJpY3MnLCAoKSA9PiB7XG4gIGxldCBtZXRyaWNzO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1ldHJpY3MgPSBuZXcgUGVyZm9ybWFuY2VNZXRyaWNzKCk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCByZWNvcmQgc3VjY2Vzc2Z1bCByZXF1ZXN0JywgKCkgPT4ge1xuICAgIG1ldHJpY3MucmVjb3JkUmVxdWVzdCh7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcmVzcG9uc2VUaW1lOiAxNTAwLFxuICAgICAgZW5naW5lOiAnZ2VtaW5pLXBybycsXG4gICAgICBjYWNoZWQ6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3RhdHMgPSBtZXRyaWNzLmdldE1ldHJpY3MoKTtcbiAgICBleHBlY3Qoc3RhdHMucmVxdWVzdHMudG90YWwpLnRvQmUoMSk7XG4gICAgZXhwZWN0KHN0YXRzLnJlcXVlc3RzLnN1Y2Nlc3NmdWwpLnRvQmUoMSk7XG4gICAgZXhwZWN0KHN0YXRzLnJlcXVlc3RzLmZhaWxlZCkudG9CZSgwKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIHJlY29yZCBmYWlsZWQgcmVxdWVzdCcsICgpID0+IHtcbiAgICBtZXRyaWNzLnJlY29yZFJlcXVlc3Qoe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICByZXNwb25zZVRpbWU6IDIwMDAsXG4gICAgICBlbmdpbmU6ICdncm9xLXNwZWVkJyxcbiAgICAgIGVycm9yOiAnVGltZW91dCBlcnJvcicsXG4gICAgICB0aW1lb3V0OiB0cnVlLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3RhdHMgPSBtZXRyaWNzLmdldE1ldHJpY3MoKTtcbiAgICBleHBlY3Qoc3RhdHMucmVxdWVzdHMudG90YWwpLnRvQmUoMSk7XG4gICAgZXhwZWN0KHN0YXRzLnJlcXVlc3RzLmZhaWxlZCkudG9CZSgxKTtcbiAgICBleHBlY3Qoc3RhdHMucGVyZm9ybWFuY2UudGltZW91dHMpLnRvQmUoMSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCB0cmFjayBlbmdpbmUgdXNhZ2UnLCAoKSA9PiB7XG4gICAgbWV0cmljcy5yZWNvcmRSZXF1ZXN0KHsgc3VjY2VzczogdHJ1ZSwgZW5naW5lOiAnZ2VtaW5pLXBybycgfSk7XG4gICAgbWV0cmljcy5yZWNvcmRSZXF1ZXN0KHsgc3VjY2VzczogdHJ1ZSwgZW5naW5lOiAnZ2VtaW5pLXBybycgfSk7XG4gICAgbWV0cmljcy5yZWNvcmRSZXF1ZXN0KHsgc3VjY2VzczogdHJ1ZSwgZW5naW5lOiAnZ3JvcS1zcGVlZCcgfSk7XG5cbiAgICBjb25zdCBzdGF0cyA9IG1ldHJpY3MuZ2V0TWV0cmljcygpO1xuICAgIGV4cGVjdChzdGF0cy5lbmdpbmVzWydnZW1pbmktcHJvJ10pLnRvQmUoMik7XG4gICAgZXhwZWN0KHN0YXRzLmVuZ2luZXNbJ2dyb3Etc3BlZWQnXSkudG9CZSgxKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIGNhbGN1bGF0ZSByZXNwb25zZSB0aW1lIHN0YXRpc3RpY3MnLCAoKSA9PiB7XG4gICAgY29uc3QgdGltZXMgPSBbMTAwMCwgMTUwMCwgMjAwMCwgMjUwMCwgMzAwMF07XG4gICAgXG4gICAgdGltZXMuZm9yRWFjaCh0aW1lID0+IHtcbiAgICAgIG1ldHJpY3MucmVjb3JkUmVxdWVzdCh7IHN1Y2Nlc3M6IHRydWUsIHJlc3BvbnNlVGltZTogdGltZSB9KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHN0YXRzID0gbWV0cmljcy5nZXRNZXRyaWNzKCk7XG4gICAgZXhwZWN0KHN0YXRzLnBlcmZvcm1hbmNlLmF2Z1Jlc3BvbnNlVGltZSkudG9CZSgnMjAwMG1zJyk7XG4gICAgZXhwZWN0KHN0YXRzLnBlcmZvcm1hbmNlLm1pblJlc3BvbnNlVGltZSkudG9CZSgnMTAwMG1zJyk7XG4gICAgZXhwZWN0KHN0YXRzLnBlcmZvcm1hbmNlLm1heFJlc3BvbnNlVGltZSkudG9CZSgnMzAwMG1zJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCB0cmFjayBjYWNoZSBzdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgIG1ldHJpY3MucmVjb3JkUmVxdWVzdCh7IHN1Y2Nlc3M6IHRydWUsIGNhY2hlZDogdHJ1ZSB9KTtcbiAgICBtZXRyaWNzLnJlY29yZFJlcXVlc3QoeyBzdWNjZXNzOiB0cnVlLCBjYWNoZWQ6IHRydWUgfSk7XG4gICAgbWV0cmljcy5yZWNvcmRSZXF1ZXN0KHsgc3VjY2VzczogdHJ1ZSwgY2FjaGVkOiBmYWxzZSB9KTtcblxuICAgIGNvbnN0IHN0YXRzID0gbWV0cmljcy5nZXRNZXRyaWNzKCk7XG4gICAgZXhwZWN0KHN0YXRzLmNhY2hlLmhpdHMpLnRvQmUoMik7XG4gICAgZXhwZWN0KHN0YXRzLmNhY2hlLm1pc3NlcykudG9CZSgxKTtcbiAgICBleHBlY3Qoc3RhdHMuY2FjaGUuaGl0UmF0ZSkudG9CZSgnNjYuNjclJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBjYWxjdWxhdGUgc3VjY2VzcyByYXRlIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBtZXRyaWNzLnJlY29yZFJlcXVlc3QoeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgIG1ldHJpY3MucmVjb3JkUmVxdWVzdCh7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgbWV0cmljcy5yZWNvcmRSZXF1ZXN0KHsgc3VjY2VzczogZmFsc2UgfSk7XG4gICAgbWV0cmljcy5yZWNvcmRSZXF1ZXN0KHsgc3VjY2VzczogdHJ1ZSB9KTtcblxuICAgIGNvbnN0IHN0YXRzID0gbWV0cmljcy5nZXRNZXRyaWNzKCk7XG4gICAgZXhwZWN0KHN0YXRzLnJlcXVlc3RzLnN1Y2Nlc3NSYXRlKS50b0JlKCc3NS4wMCUnKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIHRyYWNrIHJlY2VudCBlcnJvcnMnLCAoKSA9PiB7XG4gICAgbWV0cmljcy5yZWNvcmRSZXF1ZXN0KHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6ICdGaXJzdCBlcnJvcicsXG4gICAgICBlbmdpbmU6ICdnZW1pbmktcHJvJyxcbiAgICB9KTtcblxuICAgIG1ldHJpY3MucmVjb3JkUmVxdWVzdCh7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiAnU2Vjb25kIGVycm9yJyxcbiAgICAgIGVuZ2luZTogJ2dyb3Etc3BlZWQnLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3RhdHMgPSBtZXRyaWNzLmdldE1ldHJpY3MoKTtcbiAgICBleHBlY3Qoc3RhdHMucmVjZW50RXJyb3JzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgZXhwZWN0KHN0YXRzLnJlY2VudEVycm9yc1swXS5tZXNzYWdlKS50b0JlKCdGaXJzdCBlcnJvcicpO1xuICAgIGV4cGVjdChzdGF0cy5yZWNlbnRFcnJvcnNbMV0ubWVzc2FnZSkudG9CZSgnU2Vjb25kIGVycm9yJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBsaW1pdCByZXNwb25zZSB0aW1lIGhpc3RvcnkgdG8gMTAwMCcsICgpID0+IHtcbiAgICAvLyBBZGQgMTUwMCBlbnRyaWVzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNTAwOyBpKyspIHtcbiAgICAgIG1ldHJpY3MucmVjb3JkUmVxdWVzdCh7IHN1Y2Nlc3M6IHRydWUsIHJlc3BvbnNlVGltZTogMTAwMCArIGkgfSk7XG4gICAgfVxuXG4gICAgZXhwZWN0KG1ldHJpY3MubWV0cmljcy5yZXNwb25zZVRpbWVzKS50b0hhdmVMZW5ndGgoMTAwMCk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBsaW1pdCBlcnJvciBoaXN0b3J5IHRvIDEwMCcsICgpID0+IHtcbiAgICAvLyBBZGQgMTUwIGVycm9yc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTUwOyBpKyspIHtcbiAgICAgIG1ldHJpY3MucmVjb3JkUmVxdWVzdCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogYEVycm9yICR7aX1gLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZXhwZWN0KG1ldHJpY3MubWV0cmljcy5lcnJvcnMpLnRvSGF2ZUxlbmd0aCgxMDApO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgY2FsY3VsYXRlIFA5NSBhbmQgUDk5IGNvcnJlY3RseScsICgpID0+IHtcbiAgICAvLyBBZGQgMTAwIHJlc3BvbnNlIHRpbWVzIGZyb20gMCB0byA5OW1zXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgICAgbWV0cmljcy5yZWNvcmRSZXF1ZXN0KHsgc3VjY2VzczogdHJ1ZSwgcmVzcG9uc2VUaW1lOiBpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXRzID0gbWV0cmljcy5nZXRNZXRyaWNzKCk7XG4gICAgY29uc3QgcDk1ID0gcGFyc2VJbnQoc3RhdHMucGVyZm9ybWFuY2UucDk1UmVzcG9uc2VUaW1lKTtcbiAgICBjb25zdCBwOTkgPSBwYXJzZUludChzdGF0cy5wZXJmb3JtYW5jZS5wOTlSZXNwb25zZVRpbWUpO1xuICAgIFxuICAgIGV4cGVjdChwOTUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoOTApO1xuICAgIGV4cGVjdChwOTkpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoOTUpO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgaGFuZGxlIHplcm8gcmVxdWVzdHMgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICBjb25zdCBzdGF0cyA9IG1ldHJpY3MuZ2V0TWV0cmljcygpO1xuICAgIFxuICAgIGV4cGVjdChzdGF0cy5yZXF1ZXN0cy50b3RhbCkudG9CZSgwKTtcbiAgICBleHBlY3Qoc3RhdHMucmVxdWVzdHMuc3VjY2Vzc1JhdGUpLnRvQmUoJzAlJyk7XG4gICAgZXhwZWN0KHN0YXRzLmNhY2hlLmhpdFJhdGUpLnRvQmUoJzAlJyk7XG4gICAgZXhwZWN0KHN0YXRzLnBlcmZvcm1hbmNlLmF2Z1Jlc3BvbnNlVGltZSkudG9CZSgnMG1zJyk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCByZXNldCBtZXRyaWNzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBtZXRyaWNzLnJlY29yZFJlcXVlc3QoeyBzdWNjZXNzOiB0cnVlLCByZXNwb25zZVRpbWU6IDEwMDAsIGVuZ2luZTogJ2dlbWluaS1wcm8nIH0pO1xuICAgIG1ldHJpY3MucmVjb3JkUmVxdWVzdCh7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1Rlc3QgZXJyb3InIH0pO1xuXG4gICAgbWV0cmljcy5yZXNldCgpO1xuXG4gICAgY29uc3Qgc3RhdHMgPSBtZXRyaWNzLmdldE1ldHJpY3MoKTtcbiAgICBleHBlY3Qoc3RhdHMucmVxdWVzdHMudG90YWwpLnRvQmUoMCk7XG4gICAgZXhwZWN0KHN0YXRzLnJlcXVlc3RzLnN1Y2Nlc3NmdWwpLnRvQmUoMCk7XG4gICAgZXhwZWN0KHN0YXRzLnJlcXVlc3RzLmZhaWxlZCkudG9CZSgwKTtcbiAgICBleHBlY3Qoc3RhdHMucGVyZm9ybWFuY2UudGltZW91dHMpLnRvQmUoMCk7XG4gICAgZXhwZWN0KE9iamVjdC5rZXlzKHN0YXRzLmVuZ2luZXMpKS50b0hhdmVMZW5ndGgoMCk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBleHBvcnQgdG8gU2VudHJ5IGZvcm1hdCcsICgpID0+IHtcbiAgICBjb25zdCBtb2NrU2VudHJ5ID0ge1xuICAgICAgc2V0Q29udGV4dDogamVzdC5mbigpLFxuICAgIH07XG5cbiAgICBtZXRyaWNzLnJlY29yZFJlcXVlc3Qoe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHJlc3BvbnNlVGltZTogMTUwMCxcbiAgICAgIGVuZ2luZTogJ2dlbWluaS1wcm8nLFxuICAgIH0pO1xuXG4gICAgbWV0cmljcy5leHBvcnRUb1NlbnRyeShtb2NrU2VudHJ5KTtcblxuICAgIGV4cGVjdChtb2NrU2VudHJ5LnNldENvbnRleHQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwZXJmb3JtYW5jZScsIGV4cGVjdC5hbnkoT2JqZWN0KSk7XG4gICAgZXhwZWN0KG1vY2tTZW50cnkuc2V0Q29udGV4dCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2VuZ2luZXMnLCBleHBlY3QuYW55KE9iamVjdCkpO1xuICAgIGV4cGVjdChtb2NrU2VudHJ5LnNldENvbnRleHQpLnRvSGF2ZUJlZW5DYWxs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