{"version":3,"names":["cov_v7lkv8shj","actualCoverage","needsFullModel","prompt","b","opts","f","text","s","system","history","map","h","content","join","toLowerCase","hardSignals","long","length","hasCode","test","manyQuestions","match","hard","some","w","includes"],"sources":["complexity.js"],"sourcesContent":["// src/lib/complexity.js\n// Heurística simples: decide quando subir pro modelo \"full\"\nexport function needsFullModel(prompt = \"\", opts = {}) {\n  const text = `${prompt} ${opts?.system || \"\"} ${\n    (opts?.history || []).map((h) => h.content).join(\" \") || \"\"\n  }`.toLowerCase();\n\n  const hardSignals = [\n    \"análise jurídica\",\n    \"parecer jurídico\",\n    \"prova matemática\",\n    \"demonstre\",\n    \"complexidade\",\n    \"otimize este código\",\n    \"arquitetura\",\n    \"plano de negócios\",\n    \"projeção financeira\",\n    \"explica em detalhes\",\n    \"passo a passo avançado\",\n    \"pesquisa acadêmica\",\n    \"citar fontes\",\n    \"tese\",\n    \"modelagem estatística\",\n    \"derivada\",\n    \"integral\",\n    \"transformada\",\n    \"pseudocódigo\",\n    \"benchmark\",\n    \"segurança da informação\",\n    \"vulnerabilidade\",\n  ];\n\n  const long = text.length > 1200; // muito conteúdo\n  const hasCode = /```|function|class|import|SELECT |INSERT |UPDATE |curl |-H /.test(text);\n  const manyQuestions = (text.match(/\\?/g) || []).length >= 4;\n  const hard = hardSignals.some((w) => text.includes(w));\n\n  return long || hasCode || manyQuestions || hard;\n}\n"],"mappings":"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","ignoreList":[]}