{"version":3,"names":["cov_27k0wv26io","actualCoverage","React","Navigate","useLocation","matchPath","useAuth","jsx","_jsx","Fragment","_Fragment","PUBLIC_ROUTES","s","isPublic","pathname","f","some","pattern","path","end","AuthGate","children","location","user","loading","b","style","display","placeItems","minHeight","opacity","to","replace","state","from"],"sources":["AuthGate.jsx"],"sourcesContent":["// src/auth/AuthGate.jsx\nimport React from \"react\";\nimport { Navigate, useLocation, matchPath } from \"react-router-dom\";\n// IMPORTANTE: seu AuthProvider deve expor o hook useAuth.\n// Se no seu projeto for diferente, ajuste a importação abaixo.\nimport { useAuth } from \"./AuthProvider.jsx\";\n\n// Rotas que NÃO exigem login\nconst PUBLIC_ROUTES = [\"/\", \"/plans\", \"/login\", \"/reset-password\"];\n\nfunction isPublic(pathname) {\n  return PUBLIC_ROUTES.some((pattern) => matchPath({ path: pattern, end: true }, pathname));\n}\n\nexport default function AuthGate({ children }) {\n  const location = useLocation();\n  const { user, loading } = useAuth(); // { user: objeto|null, loading: boolean }\n\n  // Enquanto checa o estado de auth (evita flicker/redireciono precoce)\n  if (loading) {\n    return (\n      <div style={{ display: \"grid\", placeItems: \"center\", minHeight: \"60vh\" }}>\n        <span style={{ opacity: 0.7 }}>Carregando…</span>\n      </div>\n    );\n  }\n\n  // Se a rota é pública, sempre libera\n  if (isPublic(location.pathname)) {\n    return <>{children}</>;\n  }\n\n  // Se a rota é privada e não tem usuário autenticado, manda para login\n  if (!user) {\n    return <Navigate to=\"/login\" replace state={{ from: location }} />;\n  }\n\n  // Autenticado em rota privada\n  return <>{children}</>;\n}\n"],"mappings":"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","ignoreList":[]}