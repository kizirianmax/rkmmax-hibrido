{"version":3,"names":["os","require","fs","execSync","stdio","e","jest","setTimeout","originalWarn","console","warn","originalError","error","args","_args$","message","toString","includes","apply","_args$2","afterAll","clearAllTimers","global","agent","destroy","cache","clear","Promise","resolve","fetch","fn","localStorageMock","getItem","setItem","removeItem","localStorage","sessionStorageMock","sessionStorage","process","env","NODE_ENV","REACT_APP_API_URL","REACT_APP_GITHUB_TOKEN","REACT_APP_DEBUG_MODE","on","reason","promise","testStartTime","Date","now","duration","log","initialMemory","memoryUsage","finalMemory","heapUsed","toFixed","module","exports","testTimeout","forceExit"],"sources":["jest.setup.js"],"sourcesContent":["/**\n * JEST SETUP - CONFIGURAÃ‡ÃƒO INICIAL E LIMPEZA\n * \n * Executa antes de cada suite de testes para:\n * - Aumentar file descriptor limit\n * - Configurar timeouts\n * - Limpar recursos\n * - Configurar mocks globais\n */\n\n// ============================================\n// 1. AUMENTAR FILE DESCRIPTOR LIMIT\n// ============================================\nconst os = require('os');\nconst fs = require('fs');\n\ntry {\n  // Tentar aumentar limite (pode falhar em alguns ambientes)\n  const { execSync } = require('child_process');\n  execSync('ulimit -n 4096', { stdio: 'ignore' });\n} catch (e) {\n  // Ignorar erro se nÃ£o conseguir\n}\n\n// ============================================\n// 2. CONFIGURAR TIMEOUTS GLOBAIS\n// ============================================\njest.setTimeout(10000); // 10 segundos por teste\n\n// ============================================\n// 3. SUPRIMIR WARNINGS\n// ============================================\nconst originalWarn = console.warn;\nconst originalError = console.error;\n\n// Suprimir warnings nÃ£o crÃ­ticos\nconsole.warn = (...args) => {\n  const message = args[0]?.toString() || '';\n  \n  // Ignorar warnings conhecidos\n  if (\n    message.includes('ExperimentalWarning') ||\n    message.includes('DeprecationWarning') ||\n    message.includes('MaxListenersExceededWarning')\n  ) {\n    return;\n  }\n  \n  originalWarn.apply(console, args);\n};\n\nconsole.error = (...args) => {\n  const message = args[0]?.toString() || '';\n  \n  // Ignorar erros nÃ£o crÃ­ticos\n  if (\n    message.includes('ECONNREFUSED') ||\n    message.includes('ETIMEDOUT')\n  ) {\n    return;\n  }\n  \n  originalError.apply(console, args);\n};\n\n// ============================================\n// 4. CLEANUP GLOBAL APÃ“S TESTES\n// ============================================\nafterAll(async () => {\n  // Limpar timers pendentes\n  jest.clearAllTimers();\n  \n  // Fechar conexÃµes\n  if (global.agent) {\n    global.agent.destroy();\n  }\n  \n  // Limpar cache\n  if (global.cache) {\n    global.cache.clear();\n  }\n  \n  // Aguardar um pouco para limpeza\n  await new Promise(resolve => setTimeout(resolve, 100));\n});\n\n// ============================================\n// 5. CONFIGURAR MOCKS GLOBAIS\n// ============================================\n\n// Mock de fetch (se nÃ£o disponÃ­vel)\nif (typeof global.fetch === 'undefined') {\n  global.fetch = jest.fn();\n}\n\n// Mock de localStorage\nconst localStorageMock = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nglobal.localStorage = localStorageMock;\n\n// Mock de sessionStorage\nconst sessionStorageMock = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nglobal.sessionStorage = sessionStorageMock;\n\n// ============================================\n// 6. CONFIGURAR VARIÃVEIS DE AMBIENTE\n// ============================================\nprocess.env.NODE_ENV = 'test';\nprocess.env.REACT_APP_API_URL = 'http://localhost:3000';\nprocess.env.REACT_APP_GITHUB_TOKEN = 'test-token';\nprocess.env.REACT_APP_DEBUG_MODE = 'false';\n\n// ============================================\n// 7. CONFIGURAR HANDLERS DE ERRO\n// ============================================\n\n// Capturar unhandled promise rejections\nprocess.on('unhandledRejection', (reason, promise) => {\n  console.error('Unhandled Rejection at:', promise, 'reason:', reason);\n});\n\n// Capturar uncaught exceptions\nprocess.on('uncaughtException', (error) => {\n  console.error('Uncaught Exception:', error);\n});\n\n// ============================================\n// 8. CONFIGURAR PERFORMANCE MONITORING\n// ============================================\nconst testStartTime = Date.now();\n\nafterAll(() => {\n  const duration = Date.now() - testStartTime;\n  console.log(`\\nâ±ï¸  Test suite completed in ${duration}ms`);\n  \n  // Avisar se testes demoraram muito\n  if (duration > 30000) {\n    console.warn('âš ï¸  Test suite took longer than 30 seconds');\n  }\n});\n\n// ============================================\n// 9. CONFIGURAR MEMORY MONITORING\n// ============================================\nconst initialMemory = process.memoryUsage();\n\nafterAll(() => {\n  const finalMemory = process.memoryUsage();\n  const heapUsed = (finalMemory.heapUsed - initialMemory.heapUsed) / 1024 / 1024;\n  \n  console.log(`\\nðŸ’¾ Memory delta: ${heapUsed.toFixed(2)} MB`);\n  \n  // Avisar se memory leak\n  if (heapUsed > 50) {\n    console.warn('âš ï¸  Possible memory leak detected');\n  }\n});\n\n// ============================================\n// 10. RESTAURAR CONSOLE APÃ“S TESTES\n// ============================================\nafterAll(() => {\n  console.warn = originalWarn;\n  console.error = originalError;\n});\n\n// ============================================\n// EXPORTAR PARA USO EM TESTES\n// ============================================\nmodule.exports = {\n  testTimeout: 10000,\n  forceExit: true,\n};\n\n"],"mappings":"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","ignoreList":[]}