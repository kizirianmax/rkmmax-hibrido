{"version":3,"names":["cov_19fglunz6g","actualCoverage","RateLimiter","constructor","f","s","users","plans","basic","name","creditsPerMonth","description","pro","enterprise","modeCosts","manual","creditCost","speed","optimized","cleanupInterval","setInterval","cleanup","getUserKey","userId","b","getMonthKey","now","Date","getFullYear","getMonth","createUser","plan","userKey","monthKey","planConfig","monthly","creditsUsed","creditsRemaining","requests","createdAt","toISOString","getOrCreateUser","canMakeRequest","mode","user","monthData","modeCost","toLowerCase","allowed","reason","creditsNeeded","resetIn","getTimeUntilNextMonth","recordRequest","push","timestamp","recorded","totalCredits","percentageUsed","Math","round","getCurrentUsage","requestCount","length","month","getPlanInfo","manualCost","optimizedCost","modes","requestsPerMonth","floor","nextMonth","diff","days","hours","currentMonth","months","Object","keys","sort","reverse","toDelete","slice","forEach","resetUserCredits","reset","destroy","clearInterval","limiterInstance","getLimiter","module","exports"],"sources":["rateLimiter.js"],"sourcesContent":["/**\n * RATE LIMITER - SISTEMA DE CRÉDITOS\n * Plano Básico = 400 créditos/mês\n * Manual: 1 crédito por requisição\n * Otimizado: 5 créditos por requisição\n * Usuário escolhe qual modo usar\n */\n\nclass RateLimiter {\n  constructor() {\n    // Armazenar em memória (em produção usar Redis)\n    this.users = {};\n\n    // Configuração de planos\n    this.plans = {\n      basic: {\n        name: \"Básico\",\n        creditsPerMonth: 400,\n        description: \"Plano básico com 400 créditos/mês\",\n      },\n      pro: {\n        name: \"Pro\",\n        creditsPerMonth: 2000,\n        description: \"Plano Pro com 2000 créditos/mês\",\n      },\n      enterprise: {\n        name: \"Enterprise\",\n        creditsPerMonth: 10000,\n        description: \"Plano Enterprise com 10000 créditos/mês\",\n      },\n    };\n\n    // Custo de créditos por modo\n    this.modeCosts = {\n      manual: {\n        creditCost: 1,\n        speed: \"slow\",\n        description: \"Modo manual - mais lento, 1 crédito por requisição\",\n      },\n      optimized: {\n        creditCost: 0.5,\n        speed: \"fast\",\n        description: \"Modo otimizado - MUITO econômico, 0.5 crédito por requisição\",\n      },\n    };\n\n    // Limpar dados a cada mês\n    this.cleanupInterval = setInterval(() => this.cleanup(), 2592000000); // 30 dias\n  }\n\n  /**\n   * Obter chave do usuário\n   */\n  getUserKey(userId) {\n    return userId || \"anonymous\";\n  }\n\n  /**\n   * Obter chave do mês\n   */\n  getMonthKey() {\n    const now = new Date();\n    return `${now.getFullYear()}-${now.getMonth()}`;\n  }\n\n  /**\n   * Criar usuário com plano\n   */\n  createUser(userId, plan = \"basic\") {\n    const userKey = this.getUserKey(userId);\n    const monthKey = this.getMonthKey();\n    const planConfig = this.plans[plan] || this.plans.basic;\n\n    this.users[userKey] = {\n      plan,\n      creditsPerMonth: planConfig.creditsPerMonth,\n      monthly: {\n        [monthKey]: {\n          creditsUsed: 0,\n          creditsRemaining: planConfig.creditsPerMonth,\n          requests: [],\n          createdAt: new Date().toISOString(),\n        },\n      },\n    };\n\n    return this.users[userKey];\n  }\n\n  /**\n   * Obter ou criar usuário\n   */\n  getOrCreateUser(userId, plan = \"basic\") {\n    const userKey = this.getUserKey(userId);\n\n    if (!this.users[userKey]) {\n      return this.createUser(userId, plan);\n    }\n\n    // Verificar se precisa resetar o mês\n    const monthKey = this.getMonthKey();\n    if (!this.users[userKey].monthly[monthKey]) {\n      const planConfig = this.plans[this.users[userKey].plan] || this.plans.basic;\n      this.users[userKey].monthly[monthKey] = {\n        creditsUsed: 0,\n        creditsRemaining: planConfig.creditsPerMonth,\n        requests: [],\n        createdAt: new Date().toISOString(),\n      };\n    }\n\n    return this.users[userKey];\n  }\n\n  /**\n   * Verificar se pode fazer requisição\n   */\n  canMakeRequest(userId, mode = \"manual\", plan = \"basic\") {\n    const userKey = this.getUserKey(userId);\n    const monthKey = this.getMonthKey();\n    const user = this.getOrCreateUser(userId, plan);\n    const monthData = user.monthly[monthKey];\n    const modeCost = this.modeCosts[mode.toLowerCase()] || this.modeCosts.manual;\n\n    // Verificar se tem créditos suficientes\n    if (monthData.creditsRemaining < modeCost.creditCost) {\n      return {\n        allowed: false,\n        reason: `Créditos insuficientes (precisa de ${modeCost.creditCost}, tem ${monthData.creditsRemaining})`,\n        creditsNeeded: modeCost.creditCost,\n        creditsRemaining: monthData.creditsRemaining,\n        resetIn: this.getTimeUntilNextMonth(),\n      };\n    }\n\n    return {\n      allowed: true,\n      reason: \"Requisição permitida\",\n      creditsRemaining: monthData.creditsRemaining,\n      creditCost: modeCost.creditCost,\n      mode: mode.toLowerCase(),\n    };\n  }\n\n  /**\n   * Registrar requisição e descontar créditos\n   */\n  recordRequest(userId, mode = \"manual\", plan = \"basic\") {\n    const userKey = this.getUserKey(userId);\n    const monthKey = this.getMonthKey();\n    const user = this.getOrCreateUser(userId, plan);\n    const monthData = user.monthly[monthKey];\n    const modeCost = this.modeCosts[mode.toLowerCase()] || this.modeCosts.manual;\n\n    // Descontar créditos\n    monthData.creditsUsed += modeCost.creditCost;\n    monthData.creditsRemaining -= modeCost.creditCost;\n\n    // Registrar requisição\n    monthData.requests.push({\n      mode: mode.toLowerCase(),\n      creditCost: modeCost.creditCost,\n      timestamp: new Date().toISOString(),\n    });\n\n    return {\n      recorded: true,\n      creditCost: modeCost.creditCost,\n      creditsUsed: monthData.creditsUsed,\n      creditsRemaining: monthData.creditsRemaining,\n      totalCredits: user.creditsPerMonth,\n      percentageUsed: Math.round((monthData.creditsUsed / user.creditsPerMonth) * 100),\n    };\n  }\n\n  /**\n   * Obter uso atual\n   */\n  getCurrentUsage(userId, plan = \"basic\") {\n    const userKey = this.getUserKey(userId);\n    const monthKey = this.getMonthKey();\n    const user = this.getOrCreateUser(userId, plan);\n    const monthData = user.monthly[monthKey];\n    const planConfig = this.plans[plan] || this.plans.basic;\n\n    return {\n      plan: user.plan,\n      creditsUsed: monthData.creditsUsed,\n      creditsRemaining: monthData.creditsRemaining,\n      totalCredits: planConfig.creditsPerMonth,\n      percentageUsed: Math.round((monthData.creditsUsed / planConfig.creditsPerMonth) * 100),\n      requestCount: monthData.requests.length,\n      month: monthKey,\n      resetIn: this.getTimeUntilNextMonth(),\n    };\n  }\n\n  /**\n   * Obter informações do plano\n   */\n  getPlanInfo(plan = \"basic\") {\n    const planConfig = this.plans[plan] || this.plans.basic;\n    const manualCost = this.modeCosts.manual.creditCost;\n    const optimizedCost = this.modeCosts.optimized.creditCost;\n\n    return {\n      plan: planConfig.name,\n      creditsPerMonth: planConfig.creditsPerMonth,\n      description: planConfig.description,\n      modes: {\n        manual: {\n          creditCost: manualCost,\n          requestsPerMonth: Math.floor(planConfig.creditsPerMonth / manualCost),\n          speed: \"lento\",\n          description: `${Math.floor(planConfig.creditsPerMonth / manualCost)} requisições/mês`,\n        },\n        optimized: {\n          creditCost: optimizedCost,\n          requestsPerMonth: Math.floor(planConfig.creditsPerMonth / optimizedCost),\n          speed: \"rápido\",\n          description: `${Math.floor(planConfig.creditsPerMonth / optimizedCost)} requisições/mês`,\n        },\n      },\n    };\n  }\n\n  /**\n   * Obter tempo até próximo mês\n   */\n  getTimeUntilNextMonth() {\n    const now = new Date();\n    const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);\n\n    const diff = nextMonth - now;\n    const days = Math.floor(diff / 86400000);\n    const hours = Math.floor((diff % 86400000) / 3600000);\n\n    return `${days}d ${hours}h`;\n  }\n\n  /**\n   * Limpar dados antigos\n   */\n  cleanup() {\n    const now = new Date();\n    const currentMonth = this.getMonthKey();\n\n    for (const userKey in this.users) {\n      const user = this.users[userKey];\n\n      // Remover dados de meses antigos (manter últimos 3 meses)\n      const months = Object.keys(user.monthly).sort().reverse();\n      if (months.length > 3) {\n        const toDelete = months.slice(3);\n        toDelete.forEach((month) => delete user.monthly[month]);\n      }\n\n      // Remover usuário se vazio\n      if (Object.keys(user.monthly).length === 0) {\n        delete this.users[userKey];\n      }\n    }\n  }\n\n  /**\n   * Reset de créditos (admin only)\n   */\n  resetUserCredits(userId) {\n    const userKey = this.getUserKey(userId);\n    if (this.users[userKey]) {\n      const monthKey = this.getMonthKey();\n      const planConfig = this.plans[this.users[userKey].plan] || this.plans.basic;\n\n      this.users[userKey].monthly[monthKey] = {\n        creditsUsed: 0,\n        creditsRemaining: planConfig.creditsPerMonth,\n        requests: [],\n        createdAt: new Date().toISOString(),\n      };\n\n      return { reset: true };\n    }\n    return { reset: false };\n  }\n\n  /**\n   * Destruir limiter\n   */\n  destroy() {\n    clearInterval(this.cleanupInterval);\n  }\n}\n\n// Instância global\nlet limiterInstance = null;\n\nfunction getLimiter() {\n  if (!limiterInstance) {\n    limiterInstance = new RateLimiter();\n  }\n  return limiterInstance;\n}\n\nmodule.exports = { RateLimiter, getLimiter };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}