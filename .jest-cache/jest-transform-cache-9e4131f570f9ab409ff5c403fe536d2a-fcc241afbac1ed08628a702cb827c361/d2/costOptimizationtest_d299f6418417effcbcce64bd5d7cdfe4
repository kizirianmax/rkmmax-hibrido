05802047db7f9ec6f8cdc73d37267f56
"use strict";

var _costOptimization = require("../costOptimization.js");
/**
 * COST OPTIMIZATION SYSTEM TESTS
 * Testes unitários para o sistema de otimização de custo
 */

describe('Cost Optimization System', () => {
  describe('ResponseCache', () => {
    beforeEach(() => {
      _costOptimization.responseCache.clear();
    });
    describe('generateHash', () => {
      test('deve gerar hash MD5 consistente para mesmas mensagens', () => {
        const messages = [{
          role: 'user',
          content: 'Hello'
        }, {
          role: 'assistant',
          content: 'Hi there!'
        }];
        const hash1 = _costOptimization.responseCache.generateHash(messages);
        const hash2 = _costOptimization.responseCache.generateHash(messages);
        expect(hash1).toBe(hash2);
        expect(hash1).toHaveLength(32); // MD5 hash length
      });
      test('deve gerar hashes diferentes para mensagens diferentes', () => {
        const messages1 = [{
          role: 'user',
          content: 'Hello'
        }];
        const messages2 = [{
          role: 'user',
          content: 'Goodbye'
        }];
        const hash1 = _costOptimization.responseCache.generateHash(messages1);
        const hash2 = _costOptimization.responseCache.generateHash(messages2);
        expect(hash1).not.toBe(hash2);
      });
      test('deve funcionar com arrays de objetos', () => {
        const messages = [{
          role: 'user',
          content: 'Question 1'
        }, {
          role: 'assistant',
          content: 'Answer 1'
        }, {
          role: 'user',
          content: 'Question 2'
        }];
        const hash = _costOptimization.responseCache.generateHash(messages);
        expect(hash).toBeDefined();
        expect(typeof hash).toBe('string');
        expect(hash).toHaveLength(32);
      });
    });
    describe('get', () => {
      test('deve retornar null para cache miss', () => {
        const messages = [{
          role: 'user',
          content: 'New message'
        }];
        const result = _costOptimization.responseCache.get(messages);
        expect(result).toBeNull();
      });
      test('deve retornar resposta cacheada para cache hit', () => {
        const messages = [{
          role: 'user',
          content: 'Test message'
        }];
        const response = 'Cached response';

        // Salvar no cache
        _costOptimization.responseCache.set(messages, response);

        // Buscar do cache
        const result = _costOptimization.responseCache.get(messages);
        expect(result).toBe(response);
      });
      test('deve retornar null para cache expirado (TTL)', () => {
        // Criar cache com TTL muito curto (1ms)
        const shortTTLCache = new _costOptimization.responseCache.constructor(1000, 1);
        const messages = [{
          role: 'user',
          content: 'Expiring message'
        }];
        const response = 'Will expire';

        // Salvar no cache
        shortTTLCache.set(messages, response);

        // Aguardar expiração
        return new Promise(resolve => {
          setTimeout(() => {
            const result = shortTTLCache.get(messages);
            expect(result).toBeNull();
            resolve();
          }, 10);
        });
      });
    });
    describe('set', () => {
      test('deve salvar resposta no cache', () => {
        const messages = [{
          role: 'user',
          content: 'Save this'
        }];
        const response = 'Saved response';
        _costOptimization.responseCache.set(messages, response);
        const result = _costOptimization.responseCache.get(messages);
        expect(result).toBe(response);
      });
      test('deve limpar cache mais antigo quando atingir maxSize', () => {
        // Criar cache com tamanho máximo de 2
        const smallCache = new _costOptimization.responseCache.constructor(2, 3600000);
        const messages1 = [{
          role: 'user',
          content: 'Message 1'
        }];
        const messages2 = [{
          role: 'user',
          content: 'Message 2'
        }];
        const messages3 = [{
          role: 'user',
          content: 'Message 3'
        }];

        // Adicionar 3 itens (deve remover o primeiro)
        smallCache.set(messages1, 'Response 1');
        smallCache.set(messages2, 'Response 2');
        smallCache.set(messages3, 'Response 3');

        // O primeiro deve ter sido removido
        expect(smallCache.get(messages1)).toBeNull();
        // Os outros dois devem existir
        expect(smallCache.get(messages2)).toBe('Response 2');
        expect(smallCache.get(messages3)).toBe('Response 3');
      });
    });
    describe('clear', () => {
      test('deve limpar todos os itens do cache', () => {
        const messages1 = [{
          role: 'user',
          content: 'Message 1'
        }];
        const messages2 = [{
          role: 'user',
          content: 'Message 2'
        }];
        _costOptimization.responseCache.set(messages1, 'Response 1');
        _costOptimization.responseCache.set(messages2, 'Response 2');
        expect(_costOptimization.responseCache.get(messages1)).toBe('Response 1');
        expect(_costOptimization.responseCache.get(messages2)).toBe('Response 2');
        _costOptimization.responseCache.clear();
        expect(_costOptimization.responseCache.get(messages1)).toBeNull();
        expect(_costOptimization.responseCache.get(messages2)).toBeNull();
      });
    });
    describe('stats', () => {
      test('deve retornar estatísticas do cache', () => {
        const messages = [{
          role: 'user',
          content: 'Test'
        }];
        _costOptimization.responseCache.set(messages, 'Response');
        const stats = _costOptimization.responseCache.stats();
        expect(stats).toHaveProperty('size');
        expect(stats).toHaveProperty('maxSize');
        expect(stats).toHaveProperty('ttl');
        expect(stats.size).toBeGreaterThan(0);
        expect(stats.maxSize).toBe(1000);
        expect(stats.ttl).toBe(3600000);
      });
    });
  });
  describe('compressPrompt', () => {
    test('deve remover múltiplos espaços', () => {
      const prompt = 'This   has    multiple     spaces';
      const result = (0, _costOptimization.compressPrompt)(prompt);
      expect(result).toBe('This has multiple spaces');
    });
    test('deve remover quebras de linha desnecessárias', () => {
      const prompt = 'Line 1\n\n\n\nLine 2';
      const result = (0, _costOptimization.compressPrompt)(prompt);

      // A função atual converte todos os espaços em brancos em um único espaço
      expect(result).toBe('Line 1 Line 2');
    });
    test('deve fazer trim do texto', () => {
      const prompt = '   Text with spaces   ';
      const result = (0, _costOptimization.compressPrompt)(prompt);
      expect(result).toBe('Text with spaces');
    });
    test('deve aplicar todas as otimizações juntas', () => {
      const prompt = '  This   has   \n\n\n  multiple    issues  \n\n\n  ';
      const result = (0, _costOptimization.compressPrompt)(prompt);

      // A função atual converte todos os espaços em brancos em um único espaço
      expect(result).toBe('This has multiple issues');
    });
    test('deve manter texto já otimizado inalterado', () => {
      const prompt = 'Already optimized text';
      const result = (0, _costOptimization.compressPrompt)(prompt);
      expect(result).toBe('Already optimized text');
    });
  });
  describe('deduplicateMessages', () => {
    test('deve remover mensagens duplicadas consecutivas', () => {
      const messages = [{
        role: 'user',
        content: 'Hello'
      }, {
        role: 'user',
        content: 'Hello'
      }, {
        role: 'assistant',
        content: 'Hi'
      }];
      const result = (0, _costOptimization.deduplicateMessages)(messages);
      expect(result).toHaveLength(2);
      expect(result[0].content).toBe('Hello');
      expect(result[1].content).toBe('Hi');
    });
    test('deve manter mensagens não-consecutivas duplicadas', () => {
      const messages = [{
        role: 'user',
        content: 'Hello'
      }, {
        role: 'assistant',
        content: 'Hi'
      }, {
        role: 'user',
        content: 'Hello'
      }];
      const result = (0, _costOptimization.deduplicateMessages)(messages);
      expect(result).toHaveLength(3);
      expect(result[0].content).toBe('Hello');
      expect(result[1].content).toBe('Hi');
      expect(result[2].content).toBe('Hello');
    });
    test('deve retornar array vazio para input vazio', () => {
      const messages = [];
      const result = (0, _costOptimization.deduplicateMessages)(messages);
      expect(result).toEqual([]);
      expect(result).toHaveLength(0);
    });
    test('deve manter mensagens únicas inalteradas', () => {
      const messages = [{
        role: 'user',
        content: 'Message 1'
      }, {
        role: 'assistant',
        content: 'Response 1'
      }, {
        role: 'user',
        content: 'Message 2'
      }];
      const result = (0, _costOptimization.deduplicateMessages)(messages);
      expect(result).toHaveLength(3);
      expect(result).toEqual(messages);
    });
    test('deve lidar com múltiplas duplicatas consecutivas', () => {
      const messages = [{
        role: 'user',
        content: 'Same'
      }, {
        role: 'user',
        content: 'Same'
      }, {
        role: 'user',
        content: 'Same'
      }, {
        role: 'assistant',
        content: 'Different'
      }];
      const result = (0, _costOptimization.deduplicateMessages)(messages);
      expect(result).toHaveLength(2);
      expect(result[0].content).toBe('Same');
      expect(result[1].content).toBe('Different');
    });
  });
  describe('estimateTokens', () => {
    test('deve estimar tokens baseado em caracteres', () => {
      const text = 'This is a test message';
      const tokens = (0, _costOptimization.estimateTokens)(text);

      // Estimativa: ~4 caracteres = 1 token
      expect(tokens).toBeGreaterThan(0);
      expect(tokens).toBe(Math.ceil(text.length / 4));
    });
    test('deve retornar 0 para string vazia', () => {
      const tokens = (0, _costOptimization.estimateTokens)('');
      expect(tokens).toBe(0);
    });
    test('deve calcular tokens para textos longos', () => {
      const longText = 'a'.repeat(1000);
      const tokens = (0, _costOptimization.estimateTokens)(longText);
      expect(tokens).toBe(250); // 1000 / 4 = 250
    });
    test('deve arredondar para cima', () => {
      const text = 'abc'; // 3 caracteres
      const tokens = (0, _costOptimization.estimateTokens)(text);
      expect(tokens).toBe(1); // Math.ceil(3 / 4) = 1
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29zdE9wdGltaXphdGlvbiIsInJlcXVpcmUiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJyZXNwb25zZUNhY2hlIiwiY2xlYXIiLCJ0ZXN0IiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsImhhc2gxIiwiZ2VuZXJhdGVIYXNoIiwiaGFzaDIiLCJleHBlY3QiLCJ0b0JlIiwidG9IYXZlTGVuZ3RoIiwibWVzc2FnZXMxIiwibWVzc2FnZXMyIiwibm90IiwiaGFzaCIsInRvQmVEZWZpbmVkIiwicmVzdWx0IiwiZ2V0IiwidG9CZU51bGwiLCJyZXNwb25zZSIsInNldCIsInNob3J0VFRMQ2FjaGUiLCJjb25zdHJ1Y3RvciIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInNtYWxsQ2FjaGUiLCJtZXNzYWdlczMiLCJzdGF0cyIsInRvSGF2ZVByb3BlcnR5Iiwic2l6ZSIsInRvQmVHcmVhdGVyVGhhbiIsIm1heFNpemUiLCJ0dGwiLCJwcm9tcHQiLCJjb21wcmVzc1Byb21wdCIsImRlZHVwbGljYXRlTWVzc2FnZXMiLCJ0b0VxdWFsIiwidGV4dCIsInRva2VucyIsImVzdGltYXRlVG9rZW5zIiwiTWF0aCIsImNlaWwiLCJsZW5ndGgiLCJsb25nVGV4dCIsInJlcGVhdCJdLCJzb3VyY2VzIjpbImNvc3RPcHRpbWl6YXRpb24udGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENPU1QgT1BUSU1JWkFUSU9OIFNZU1RFTSBURVNUU1xuICogVGVzdGVzIHVuaXTDoXJpb3MgcGFyYSBvIHNpc3RlbWEgZGUgb3RpbWl6YcOnw6NvIGRlIGN1c3RvXG4gKi9cblxuaW1wb3J0IHtcbiAgcmVzcG9uc2VDYWNoZSxcbiAgY29tcHJlc3NQcm9tcHQsXG4gIGRlZHVwbGljYXRlTWVzc2FnZXMsXG4gIGVzdGltYXRlVG9rZW5zLFxufSBmcm9tICcuLi9jb3N0T3B0aW1pemF0aW9uLmpzJztcblxuZGVzY3JpYmUoJ0Nvc3QgT3B0aW1pemF0aW9uIFN5c3RlbScsICgpID0+IHtcbiAgZGVzY3JpYmUoJ1Jlc3BvbnNlQ2FjaGUnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICByZXNwb25zZUNhY2hlLmNsZWFyKCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZ2VuZXJhdGVIYXNoJywgKCkgPT4ge1xuICAgICAgdGVzdCgnZGV2ZSBnZXJhciBoYXNoIE1ENSBjb25zaXN0ZW50ZSBwYXJhIG1lc21hcyBtZW5zYWdlbnMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW1xuICAgICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnSGVsbG8nIH0sXG4gICAgICAgICAgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogJ0hpIHRoZXJlIScgfSxcbiAgICAgICAgXTtcblxuICAgICAgICBjb25zdCBoYXNoMSA9IHJlc3BvbnNlQ2FjaGUuZ2VuZXJhdGVIYXNoKG1lc3NhZ2VzKTtcbiAgICAgICAgY29uc3QgaGFzaDIgPSByZXNwb25zZUNhY2hlLmdlbmVyYXRlSGFzaChtZXNzYWdlcyk7XG5cbiAgICAgICAgZXhwZWN0KGhhc2gxKS50b0JlKGhhc2gyKTtcbiAgICAgICAgZXhwZWN0KGhhc2gxKS50b0hhdmVMZW5ndGgoMzIpOyAvLyBNRDUgaGFzaCBsZW5ndGhcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdkZXZlIGdlcmFyIGhhc2hlcyBkaWZlcmVudGVzIHBhcmEgbWVuc2FnZW5zIGRpZmVyZW50ZXMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzMSA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ0hlbGxvJyB9XTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMyID0gW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnR29vZGJ5ZScgfV07XG5cbiAgICAgICAgY29uc3QgaGFzaDEgPSByZXNwb25zZUNhY2hlLmdlbmVyYXRlSGFzaChtZXNzYWdlczEpO1xuICAgICAgICBjb25zdCBoYXNoMiA9IHJlc3BvbnNlQ2FjaGUuZ2VuZXJhdGVIYXNoKG1lc3NhZ2VzMik7XG5cbiAgICAgICAgZXhwZWN0KGhhc2gxKS5ub3QudG9CZShoYXNoMik7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnZGV2ZSBmdW5jaW9uYXIgY29tIGFycmF5cyBkZSBvYmpldG9zJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFtcbiAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ1F1ZXN0aW9uIDEnIH0sXG4gICAgICAgICAgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogJ0Fuc3dlciAxJyB9LFxuICAgICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnUXVlc3Rpb24gMicgfSxcbiAgICAgICAgXTtcblxuICAgICAgICBjb25zdCBoYXNoID0gcmVzcG9uc2VDYWNoZS5nZW5lcmF0ZUhhc2gobWVzc2FnZXMpO1xuXG4gICAgICAgIGV4cGVjdChoYXNoKS50b0JlRGVmaW5lZCgpO1xuICAgICAgICBleHBlY3QodHlwZW9mIGhhc2gpLnRvQmUoJ3N0cmluZycpO1xuICAgICAgICBleHBlY3QoaGFzaCkudG9IYXZlTGVuZ3RoKDMyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2dldCcsICgpID0+IHtcbiAgICAgIHRlc3QoJ2RldmUgcmV0b3JuYXIgbnVsbCBwYXJhIGNhY2hlIG1pc3MnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnTmV3IG1lc3NhZ2UnIH1dO1xuICAgICAgICBjb25zdCByZXN1bHQgPSByZXNwb25zZUNhY2hlLmdldChtZXNzYWdlcyk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdkZXZlIHJldG9ybmFyIHJlc3Bvc3RhIGNhY2hlYWRhIHBhcmEgY2FjaGUgaGl0JywgKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ1Rlc3QgbWVzc2FnZScgfV07XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gJ0NhY2hlZCByZXNwb25zZSc7XG5cbiAgICAgICAgLy8gU2FsdmFyIG5vIGNhY2hlXG4gICAgICAgIHJlc3BvbnNlQ2FjaGUuc2V0KG1lc3NhZ2VzLCByZXNwb25zZSk7XG5cbiAgICAgICAgLy8gQnVzY2FyIGRvIGNhY2hlXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3BvbnNlQ2FjaGUuZ2V0KG1lc3NhZ2VzKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKHJlc3BvbnNlKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdkZXZlIHJldG9ybmFyIG51bGwgcGFyYSBjYWNoZSBleHBpcmFkbyAoVFRMKScsICgpID0+IHtcbiAgICAgICAgLy8gQ3JpYXIgY2FjaGUgY29tIFRUTCBtdWl0byBjdXJ0byAoMW1zKVxuICAgICAgICBjb25zdCBzaG9ydFRUTENhY2hlID0gbmV3IChyZXNwb25zZUNhY2hlLmNvbnN0cnVjdG9yKSgxMDAwLCAxKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdFeHBpcmluZyBtZXNzYWdlJyB9XTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSAnV2lsbCBleHBpcmUnO1xuXG4gICAgICAgIC8vIFNhbHZhciBubyBjYWNoZVxuICAgICAgICBzaG9ydFRUTENhY2hlLnNldChtZXNzYWdlcywgcmVzcG9uc2UpO1xuXG4gICAgICAgIC8vIEFndWFyZGFyIGV4cGlyYcOnw6NvXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gc2hvcnRUVExDYWNoZS5nZXQobWVzc2FnZXMpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9LCAxMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnc2V0JywgKCkgPT4ge1xuICAgICAgdGVzdCgnZGV2ZSBzYWx2YXIgcmVzcG9zdGEgbm8gY2FjaGUnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnU2F2ZSB0aGlzJyB9XTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSAnU2F2ZWQgcmVzcG9uc2UnO1xuXG4gICAgICAgIHJlc3BvbnNlQ2FjaGUuc2V0KG1lc3NhZ2VzLCByZXNwb25zZSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3BvbnNlQ2FjaGUuZ2V0KG1lc3NhZ2VzKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKHJlc3BvbnNlKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdkZXZlIGxpbXBhciBjYWNoZSBtYWlzIGFudGlnbyBxdWFuZG8gYXRpbmdpciBtYXhTaXplJywgKCkgPT4ge1xuICAgICAgICAvLyBDcmlhciBjYWNoZSBjb20gdGFtYW5obyBtw6F4aW1vIGRlIDJcbiAgICAgICAgY29uc3Qgc21hbGxDYWNoZSA9IG5ldyAocmVzcG9uc2VDYWNoZS5jb25zdHJ1Y3RvcikoMiwgMzYwMDAwMCk7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZXMxID0gW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnTWVzc2FnZSAxJyB9XTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMyID0gW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnTWVzc2FnZSAyJyB9XTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMzID0gW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnTWVzc2FnZSAzJyB9XTtcblxuICAgICAgICAvLyBBZGljaW9uYXIgMyBpdGVucyAoZGV2ZSByZW1vdmVyIG8gcHJpbWVpcm8pXG4gICAgICAgIHNtYWxsQ2FjaGUuc2V0KG1lc3NhZ2VzMSwgJ1Jlc3BvbnNlIDEnKTtcbiAgICAgICAgc21hbGxDYWNoZS5zZXQobWVzc2FnZXMyLCAnUmVzcG9uc2UgMicpO1xuICAgICAgICBzbWFsbENhY2hlLnNldChtZXNzYWdlczMsICdSZXNwb25zZSAzJyk7XG5cbiAgICAgICAgLy8gTyBwcmltZWlybyBkZXZlIHRlciBzaWRvIHJlbW92aWRvXG4gICAgICAgIGV4cGVjdChzbWFsbENhY2hlLmdldChtZXNzYWdlczEpKS50b0JlTnVsbCgpO1xuICAgICAgICAvLyBPcyBvdXRyb3MgZG9pcyBkZXZlbSBleGlzdGlyXG4gICAgICAgIGV4cGVjdChzbWFsbENhY2hlLmdldChtZXNzYWdlczIpKS50b0JlKCdSZXNwb25zZSAyJyk7XG4gICAgICAgIGV4cGVjdChzbWFsbENhY2hlLmdldChtZXNzYWdlczMpKS50b0JlKCdSZXNwb25zZSAzJyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjbGVhcicsICgpID0+IHtcbiAgICAgIHRlc3QoJ2RldmUgbGltcGFyIHRvZG9zIG9zIGl0ZW5zIGRvIGNhY2hlJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlczEgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdNZXNzYWdlIDEnIH1dO1xuICAgICAgICBjb25zdCBtZXNzYWdlczIgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdNZXNzYWdlIDInIH1dO1xuXG4gICAgICAgIHJlc3BvbnNlQ2FjaGUuc2V0KG1lc3NhZ2VzMSwgJ1Jlc3BvbnNlIDEnKTtcbiAgICAgICAgcmVzcG9uc2VDYWNoZS5zZXQobWVzc2FnZXMyLCAnUmVzcG9uc2UgMicpO1xuXG4gICAgICAgIGV4cGVjdChyZXNwb25zZUNhY2hlLmdldChtZXNzYWdlczEpKS50b0JlKCdSZXNwb25zZSAxJyk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZUNhY2hlLmdldChtZXNzYWdlczIpKS50b0JlKCdSZXNwb25zZSAyJyk7XG5cbiAgICAgICAgcmVzcG9uc2VDYWNoZS5jbGVhcigpO1xuXG4gICAgICAgIGV4cGVjdChyZXNwb25zZUNhY2hlLmdldChtZXNzYWdlczEpKS50b0JlTnVsbCgpO1xuICAgICAgICBleHBlY3QocmVzcG9uc2VDYWNoZS5nZXQobWVzc2FnZXMyKSkudG9CZU51bGwoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3N0YXRzJywgKCkgPT4ge1xuICAgICAgdGVzdCgnZGV2ZSByZXRvcm5hciBlc3RhdMOtc3RpY2FzIGRvIGNhY2hlJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ1Rlc3QnIH1dO1xuICAgICAgICByZXNwb25zZUNhY2hlLnNldChtZXNzYWdlcywgJ1Jlc3BvbnNlJyk7XG5cbiAgICAgICAgY29uc3Qgc3RhdHMgPSByZXNwb25zZUNhY2hlLnN0YXRzKCk7XG5cbiAgICAgICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgnc2l6ZScpO1xuICAgICAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCdtYXhTaXplJyk7XG4gICAgICAgIGV4cGVjdChzdGF0cykudG9IYXZlUHJvcGVydHkoJ3R0bCcpO1xuICAgICAgICBleHBlY3Qoc3RhdHMuc2l6ZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICBleHBlY3Qoc3RhdHMubWF4U2l6ZSkudG9CZSgxMDAwKTtcbiAgICAgICAgZXhwZWN0KHN0YXRzLnR0bCkudG9CZSgzNjAwMDAwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnY29tcHJlc3NQcm9tcHQnLCAoKSA9PiB7XG4gICAgdGVzdCgnZGV2ZSByZW1vdmVyIG3Dumx0aXBsb3MgZXNwYcOnb3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9tcHQgPSAnVGhpcyAgIGhhcyAgICBtdWx0aXBsZSAgICAgc3BhY2VzJztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXByZXNzUHJvbXB0KHByb21wdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ1RoaXMgaGFzIG11bHRpcGxlIHNwYWNlcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSByZW1vdmVyIHF1ZWJyYXMgZGUgbGluaGEgZGVzbmVjZXNzw6FyaWFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbXB0ID0gJ0xpbmUgMVxcblxcblxcblxcbkxpbmUgMic7XG4gICAgICBjb25zdCByZXN1bHQgPSBjb21wcmVzc1Byb21wdChwcm9tcHQpO1xuXG4gICAgICAvLyBBIGZ1bsOnw6NvIGF0dWFsIGNvbnZlcnRlIHRvZG9zIG9zIGVzcGHDp29zIGVtIGJyYW5jb3MgZW0gdW0gw7puaWNvIGVzcGHDp29cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ0xpbmUgMSBMaW5lIDInKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RldmUgZmF6ZXIgdHJpbSBkbyB0ZXh0bycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb21wdCA9ICcgICBUZXh0IHdpdGggc3BhY2VzICAgJztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXByZXNzUHJvbXB0KHByb21wdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ1RleHQgd2l0aCBzcGFjZXMnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RldmUgYXBsaWNhciB0b2RhcyBhcyBvdGltaXphw6fDtWVzIGp1bnRhcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb21wdCA9ICcgIFRoaXMgICBoYXMgICBcXG5cXG5cXG4gIG11bHRpcGxlICAgIGlzc3VlcyAgXFxuXFxuXFxuICAnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gY29tcHJlc3NQcm9tcHQocHJvbXB0KTtcblxuICAgICAgLy8gQSBmdW7Dp8OjbyBhdHVhbCBjb252ZXJ0ZSB0b2RvcyBvcyBlc3Bhw6dvcyBlbSBicmFuY29zIGVtIHVtIMO6bmljbyBlc3Bhw6dvXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdUaGlzIGhhcyBtdWx0aXBsZSBpc3N1ZXMnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RldmUgbWFudGVyIHRleHRvIGrDoSBvdGltaXphZG8gaW5hbHRlcmFkbycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb21wdCA9ICdBbHJlYWR5IG9wdGltaXplZCB0ZXh0JztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXByZXNzUHJvbXB0KHByb21wdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ0FscmVhZHkgb3B0aW1pemVkIHRleHQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RlZHVwbGljYXRlTWVzc2FnZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnZGV2ZSByZW1vdmVyIG1lbnNhZ2VucyBkdXBsaWNhZGFzIGNvbnNlY3V0aXZhcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW1xuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ0hlbGxvJyB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ0hlbGxvJyB9LFxuICAgICAgICB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnSGknIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBkZWR1cGxpY2F0ZU1lc3NhZ2VzKG1lc3NhZ2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0JlKCdIZWxsbycpO1xuICAgICAgZXhwZWN0KHJlc3VsdFsxXS5jb250ZW50KS50b0JlKCdIaScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSBtYW50ZXIgbWVuc2FnZW5zIG7Do28tY29uc2VjdXRpdmFzIGR1cGxpY2FkYXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IFtcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdIZWxsbycgfSxcbiAgICAgICAgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogJ0hpJyB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ0hlbGxvJyB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gZGVkdXBsaWNhdGVNZXNzYWdlcyhtZXNzYWdlcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9CZSgnSGVsbG8nKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMV0uY29udGVudCkudG9CZSgnSGknKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMl0uY29udGVudCkudG9CZSgnSGVsbG8nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RldmUgcmV0b3JuYXIgYXJyYXkgdmF6aW8gcGFyYSBpbnB1dCB2YXppbycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW107XG4gICAgICBjb25zdCByZXN1bHQgPSBkZWR1cGxpY2F0ZU1lc3NhZ2VzKG1lc3NhZ2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZXZlIG1hbnRlciBtZW5zYWdlbnMgw7puaWNhcyBpbmFsdGVyYWRhcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW1xuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ01lc3NhZ2UgMScgfSxcbiAgICAgICAgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogJ1Jlc3BvbnNlIDEnIH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnTWVzc2FnZSAyJyB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gZGVkdXBsaWNhdGVNZXNzYWdlcyhtZXNzYWdlcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobWVzc2FnZXMpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSBsaWRhciBjb20gbcO6bHRpcGxhcyBkdXBsaWNhdGFzIGNvbnNlY3V0aXZhcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW1xuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ1NhbWUnIH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnU2FtZScgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdTYW1lJyB9LFxuICAgICAgICB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnRGlmZmVyZW50JyB9LFxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gZGVkdXBsaWNhdGVNZXNzYWdlcyhtZXNzYWdlcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY29udGVudCkudG9CZSgnU2FtZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdFsxXS5jb250ZW50KS50b0JlKCdEaWZmZXJlbnQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2VzdGltYXRlVG9rZW5zJywgKCkgPT4ge1xuICAgIHRlc3QoJ2RldmUgZXN0aW1hciB0b2tlbnMgYmFzZWFkbyBlbSBjYXJhY3RlcmVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGV4dCA9ICdUaGlzIGlzIGEgdGVzdCBtZXNzYWdlJztcbiAgICAgIGNvbnN0IHRva2VucyA9IGVzdGltYXRlVG9rZW5zKHRleHQpO1xuXG4gICAgICAvLyBFc3RpbWF0aXZhOiB+NCBjYXJhY3RlcmVzID0gMSB0b2tlblxuICAgICAgZXhwZWN0KHRva2VucykudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHRva2VucykudG9CZShNYXRoLmNlaWwodGV4dC5sZW5ndGggLyA0KSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZXZlIHJldG9ybmFyIDAgcGFyYSBzdHJpbmcgdmF6aWEnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbnMgPSBlc3RpbWF0ZVRva2VucygnJyk7XG4gICAgICBleHBlY3QodG9rZW5zKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSBjYWxjdWxhciB0b2tlbnMgcGFyYSB0ZXh0b3MgbG9uZ29zJywgKCkgPT4ge1xuICAgICAgY29uc3QgbG9uZ1RleHQgPSAnYScucmVwZWF0KDEwMDApO1xuICAgICAgY29uc3QgdG9rZW5zID0gZXN0aW1hdGVUb2tlbnMobG9uZ1RleHQpO1xuXG4gICAgICBleHBlY3QodG9rZW5zKS50b0JlKDI1MCk7IC8vIDEwMDAgLyA0ID0gMjUwXG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZXZlIGFycmVkb25kYXIgcGFyYSBjaW1hJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGV4dCA9ICdhYmMnOyAvLyAzIGNhcmFjdGVyZXNcbiAgICAgIGNvbnN0IHRva2VucyA9IGVzdGltYXRlVG9rZW5zKHRleHQpO1xuXG4gICAgICBleHBlY3QodG9rZW5zKS50b0JlKDEpOyAvLyBNYXRoLmNlaWwoMyAvIDQpID0gMVxuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUtBLElBQUFBLGlCQUFBLEdBQUFDLE9BQUE7QUFMQTtBQUNBO0FBQ0E7QUFDQTs7QUFTQUMsUUFBUSxDQUFDLDBCQUEwQixFQUFFLE1BQU07RUFDekNBLFFBQVEsQ0FBQyxlQUFlLEVBQUUsTUFBTTtJQUM5QkMsVUFBVSxDQUFDLE1BQU07TUFDZkMsK0JBQWEsQ0FBQ0MsS0FBSyxDQUFDLENBQUM7SUFDdkIsQ0FBQyxDQUFDO0lBRUZILFFBQVEsQ0FBQyxjQUFjLEVBQUUsTUFBTTtNQUM3QkksSUFBSSxDQUFDLHVE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Q0FBQ0ssSUFBSSxDQUFDLE1BQU0sQ0FBQztNQUN0Q0QsTUFBTSxDQUFDUSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUNaLE9BQU8sQ0FBQyxDQUFDSyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzdDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGWixRQUFRLENBQUMsZ0JBQWdCLEVBQUUsTUFBTTtJQUMvQkksSUFBSSxDQUFDLDJDQUEyQyxFQUFFLE1BQU07TUFDdEQsTUFBTXFDLElBQUksR0FBRyx3QkFBd0I7TUFDckMsTUFBTUMsTUFBTSxHQUFHLElBQUFDLGdDQUFjLEVBQUNGLElBQUksQ0FBQzs7TUFFbkM7TUFDQTlCLE1BQU0sQ0FBQytCLE1BQU0sQ0FBQyxDQUFDUixlQUFlLENBQUMsQ0FBQyxDQUFDO01BQ2pDdkIsTUFBTSxDQUFDK0IsTUFBTSxDQUFDLENBQUM5QixJQUFJLENBQUNnQyxJQUFJLENBQUNDLElBQUksQ0FBQ0osSUFBSSxDQUFDSyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDakQsQ0FBQyxDQUFDO0lBRUYxQyxJQUFJLENBQUMsbUNBQW1DLEVBQUUsTUFBTTtNQUM5QyxNQUFNc0MsTUFBTSxHQUFHLElBQUFDLGdDQUFjLEVBQUMsRUFBRSxDQUFDO01BQ2pDaEMsTUFBTSxDQUFDK0IsTUFBTSxDQUFDLENBQUM5QixJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3hCLENBQUMsQ0FBQztJQUVGUixJQUFJLENBQUMseUNBQXlDLEVBQUUsTUFBTTtNQUNwRCxNQUFNMkMsUUFBUSxHQUFHLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQztNQUNqQyxNQUFNTixNQUFNLEdBQUcsSUFBQUMsZ0NBQWMsRUFBQ0ksUUFBUSxDQUFDO01BRXZDcEMsTUFBTSxDQUFDK0IsTUFBTSxDQUFDLENBQUM5QixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUM1QixDQUFDLENBQUM7SUFFRlIsSUFBSSxDQUFDLDJCQUEyQixFQUFFLE1BQU07TUFDdEMsTUFBTXFDLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQztNQUNwQixNQUFNQyxNQUFNLEdBQUcsSUFBQUMsZ0NBQWMsRUFBQ0YsSUFBSSxDQUFDO01BRW5DOUIsTUFBTSxDQUFDK0IsTUFBTSxDQUFDLENBQUM5QixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxQixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=