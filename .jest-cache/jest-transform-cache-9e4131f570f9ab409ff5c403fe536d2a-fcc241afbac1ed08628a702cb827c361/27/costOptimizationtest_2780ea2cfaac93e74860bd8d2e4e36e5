2ad42ab869e7efd2e51cddea088b7a74
/**
 * COST OPTIMIZATION SYSTEM TESTS
 * Testes unitários para o sistema de otimização de custo
 */

import { responseCache, compressPrompt, deduplicateMessages, estimateTokens } from '../costOptimization.js';
describe('Cost Optimization System', () => {
  describe('ResponseCache', () => {
    beforeEach(() => {
      responseCache.clear();
    });
    describe('generateHash', () => {
      test('deve gerar hash MD5 consistente para mesmas mensagens', () => {
        const messages = [{
          role: 'user',
          content: 'Hello'
        }, {
          role: 'assistant',
          content: 'Hi there!'
        }];
        const hash1 = responseCache.generateHash(messages);
        const hash2 = responseCache.generateHash(messages);
        expect(hash1).toBe(hash2);
        expect(hash1).toHaveLength(32); // MD5 hash length
      });
      test('deve gerar hashes diferentes para mensagens diferentes', () => {
        const messages1 = [{
          role: 'user',
          content: 'Hello'
        }];
        const messages2 = [{
          role: 'user',
          content: 'Goodbye'
        }];
        const hash1 = responseCache.generateHash(messages1);
        const hash2 = responseCache.generateHash(messages2);
        expect(hash1).not.toBe(hash2);
      });
      test('deve funcionar com arrays de objetos', () => {
        const messages = [{
          role: 'user',
          content: 'Question 1'
        }, {
          role: 'assistant',
          content: 'Answer 1'
        }, {
          role: 'user',
          content: 'Question 2'
        }];
        const hash = responseCache.generateHash(messages);
        expect(hash).toBeDefined();
        expect(typeof hash).toBe('string');
        expect(hash).toHaveLength(32);
      });
    });
    describe('get', () => {
      test('deve retornar null para cache miss', () => {
        const messages = [{
          role: 'user',
          content: 'New message'
        }];
        const result = responseCache.get(messages);
        expect(result).toBeNull();
      });
      test('deve retornar resposta cacheada para cache hit', () => {
        const messages = [{
          role: 'user',
          content: 'Test message'
        }];
        const response = 'Cached response';

        // Salvar no cache
        responseCache.set(messages, response);

        // Buscar do cache
        const result = responseCache.get(messages);
        expect(result).toBe(response);
      });
      test('deve retornar null para cache expirado (TTL)', () => {
        // Criar cache com TTL muito curto (1ms)
        const shortTTLCache = new responseCache.constructor(1000, 1);
        const messages = [{
          role: 'user',
          content: 'Expiring message'
        }];
        const response = 'Will expire';

        // Salvar no cache
        shortTTLCache.set(messages, response);

        // Aguardar expiração
        return new Promise(resolve => {
          setTimeout(() => {
            const result = shortTTLCache.get(messages);
            expect(result).toBeNull();
            resolve();
          }, 10);
        });
      });
    });
    describe('set', () => {
      test('deve salvar resposta no cache', () => {
        const messages = [{
          role: 'user',
          content: 'Save this'
        }];
        const response = 'Saved response';
        responseCache.set(messages, response);
        const result = responseCache.get(messages);
        expect(result).toBe(response);
      });
      test('deve limpar cache mais antigo quando atingir maxSize', () => {
        // Criar cache com tamanho máximo de 2
        const smallCache = new responseCache.constructor(2, 3600000);
        const messages1 = [{
          role: 'user',
          content: 'Message 1'
        }];
        const messages2 = [{
          role: 'user',
          content: 'Message 2'
        }];
        const messages3 = [{
          role: 'user',
          content: 'Message 3'
        }];

        // Adicionar 3 itens (deve remover o primeiro)
        smallCache.set(messages1, 'Response 1');
        smallCache.set(messages2, 'Response 2');
        smallCache.set(messages3, 'Response 3');

        // O primeiro deve ter sido removido
        expect(smallCache.get(messages1)).toBeNull();
        // Os outros dois devem existir
        expect(smallCache.get(messages2)).toBe('Response 2');
        expect(smallCache.get(messages3)).toBe('Response 3');
      });
    });
  });
  describe('compressPrompt', () => {
    test('deve remover múltiplos espaços', () => {
      const prompt = 'This   has    multiple     spaces';
      const result = compressPrompt(prompt);
      expect(result).toBe('This has multiple spaces');
    });
    test('deve remover quebras de linha desnecessárias', () => {
      const prompt = 'Line 1\n\n\n\nLine 2';
      const result = compressPrompt(prompt);
      expect(result).toBe('Line 1\n\nLine 2');
    });
    test('deve fazer trim do texto', () => {
      const prompt = '   Text with spaces   ';
      const result = compressPrompt(prompt);
      expect(result).toBe('Text with spaces');
    });
    test('deve aplicar todas as otimizações juntas', () => {
      const prompt = '  This   has   \n\n\n  multiple    issues  \n\n\n  ';
      const result = compressPrompt(prompt);
      expect(result).toBe('This has\n\nmultiple issues');
    });
    test('deve manter texto já otimizado inalterado', () => {
      const prompt = 'Already optimized text';
      const result = compressPrompt(prompt);
      expect(result).toBe('Already optimized text');
    });
  });
  describe('deduplicateMessages', () => {
    test('deve remover mensagens duplicadas consecutivas', () => {
      const messages = [{
        role: 'user',
        content: 'Hello'
      }, {
        role: 'user',
        content: 'Hello'
      }, {
        role: 'assistant',
        content: 'Hi'
      }];
      const result = deduplicateMessages(messages);
      expect(result).toHaveLength(2);
      expect(result[0].content).toBe('Hello');
      expect(result[1].content).toBe('Hi');
    });
    test('deve manter mensagens não-consecutivas duplicadas', () => {
      const messages = [{
        role: 'user',
        content: 'Hello'
      }, {
        role: 'assistant',
        content: 'Hi'
      }, {
        role: 'user',
        content: 'Hello'
      }];
      const result = deduplicateMessages(messages);
      expect(result).toHaveLength(3);
      expect(result[0].content).toBe('Hello');
      expect(result[1].content).toBe('Hi');
      expect(result[2].content).toBe('Hello');
    });
    test('deve retornar array vazio para input vazio', () => {
      const messages = [];
      const result = deduplicateMessages(messages);
      expect(result).toEqual([]);
      expect(result).toHaveLength(0);
    });
    test('deve manter mensagens únicas inalteradas', () => {
      const messages = [{
        role: 'user',
        content: 'Message 1'
      }, {
        role: 'assistant',
        content: 'Response 1'
      }, {
        role: 'user',
        content: 'Message 2'
      }];
      const result = deduplicateMessages(messages);
      expect(result).toHaveLength(3);
      expect(result).toEqual(messages);
    });
    test('deve lidar com múltiplas duplicatas consecutivas', () => {
      const messages = [{
        role: 'user',
        content: 'Same'
      }, {
        role: 'user',
        content: 'Same'
      }, {
        role: 'user',
        content: 'Same'
      }, {
        role: 'assistant',
        content: 'Different'
      }];
      const result = deduplicateMessages(messages);
      expect(result).toHaveLength(2);
      expect(result[0].content).toBe('Same');
      expect(result[1].content).toBe('Different');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXNwb25zZUNhY2hlIiwiY29tcHJlc3NQcm9tcHQiLCJkZWR1cGxpY2F0ZU1lc3NhZ2VzIiwiZXN0aW1hdGVUb2tlbnMiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhciIsInRlc3QiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwiaGFzaDEiLCJnZW5lcmF0ZUhhc2giLCJoYXNoMiIsImV4cGVjdCIsInRvQmUiLCJ0b0hhdmVMZW5ndGgiLCJtZXNzYWdlczEiLCJtZXNzYWdlczIiLCJub3QiLCJoYXNoIiwidG9CZURlZmluZWQiLCJyZXN1bHQiLCJnZXQiLCJ0b0JlTnVsbCIsInJlc3BvbnNlIiwic2V0Iiwic2hvcnRUVExDYWNoZSIsImNvbnN0cnVjdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Iiwic21hbGxDYWNoZSIsIm1lc3NhZ2VzMyIsInByb21wdCIsInRvRXF1YWwiXSwic291cmNlcyI6WyJjb3N0T3B0aW1pemF0aW9uLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDT1NUIE9QVElNSVpBVElPTiBTWVNURU0gVEVTVFNcbiAqIFRlc3RlcyB1bml0w6FyaW9zIHBhcmEgbyBzaXN0ZW1hIGRlIG90aW1pemHDp8OjbyBkZSBjdXN0b1xuICovXG5cbmltcG9ydCB7XG4gIHJlc3BvbnNlQ2FjaGUsXG4gIGNvbXByZXNzUHJvbXB0LFxuICBkZWR1cGxpY2F0ZU1lc3NhZ2VzLFxuICBlc3RpbWF0ZVRva2Vucyxcbn0gZnJvbSAnLi4vY29zdE9wdGltaXphdGlvbi5qcyc7XG5cbmRlc2NyaWJlKCdDb3N0IE9wdGltaXphdGlvbiBTeXN0ZW0nLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdSZXNwb25zZUNhY2hlJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgcmVzcG9uc2VDYWNoZS5jbGVhcigpO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2dlbmVyYXRlSGFzaCcsICgpID0+IHtcbiAgICAgIHRlc3QoJ2RldmUgZ2VyYXIgaGFzaCBNRDUgY29uc2lzdGVudGUgcGFyYSBtZXNtYXMgbWVuc2FnZW5zJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFtcbiAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ0hlbGxvJyB9LFxuICAgICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdIaSB0aGVyZSEnIH0sXG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3QgaGFzaDEgPSByZXNwb25zZUNhY2hlLmdlbmVyYXRlSGFzaChtZXNzYWdlcyk7XG4gICAgICAgIGNvbnN0IGhhc2gyID0gcmVzcG9uc2VDYWNoZS5nZW5lcmF0ZUhhc2gobWVzc2FnZXMpO1xuXG4gICAgICAgIGV4cGVjdChoYXNoMSkudG9CZShoYXNoMik7XG4gICAgICAgIGV4cGVjdChoYXNoMSkudG9IYXZlTGVuZ3RoKDMyKTsgLy8gTUQ1IGhhc2ggbGVuZ3RoXG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnZGV2ZSBnZXJhciBoYXNoZXMgZGlmZXJlbnRlcyBwYXJhIG1lbnNhZ2VucyBkaWZlcmVudGVzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlczEgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdIZWxsbycgfV07XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzMiA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ0dvb2RieWUnIH1dO1xuXG4gICAgICAgIGNvbnN0IGhhc2gxID0gcmVzcG9uc2VDYWNoZS5nZW5lcmF0ZUhhc2gobWVzc2FnZXMxKTtcbiAgICAgICAgY29uc3QgaGFzaDIgPSByZXNwb25zZUNhY2hlLmdlbmVyYXRlSGFzaChtZXNzYWdlczIpO1xuXG4gICAgICAgIGV4cGVjdChoYXNoMSkubm90LnRvQmUoaGFzaDIpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ2RldmUgZnVuY2lvbmFyIGNvbSBhcnJheXMgZGUgb2JqZXRvcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXG4gICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdRdWVzdGlvbiAxJyB9LFxuICAgICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdBbnN3ZXIgMScgfSxcbiAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ1F1ZXN0aW9uIDInIH0sXG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3QgaGFzaCA9IHJlc3BvbnNlQ2FjaGUuZ2VuZXJhdGVIYXNoKG1lc3NhZ2VzKTtcblxuICAgICAgICBleHBlY3QoaGFzaCkudG9CZURlZmluZWQoKTtcbiAgICAgICAgZXhwZWN0KHR5cGVvZiBoYXNoKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgICAgZXhwZWN0KGhhc2gpLnRvSGF2ZUxlbmd0aCgzMik7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdnZXQnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdkZXZlIHJldG9ybmFyIG51bGwgcGFyYSBjYWNoZSBtaXNzJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ05ldyBtZXNzYWdlJyB9XTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2VDYWNoZS5nZXQobWVzc2FnZXMpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnZGV2ZSByZXRvcm5hciByZXNwb3N0YSBjYWNoZWFkYSBwYXJhIGNhY2hlIGhpdCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdUZXN0IG1lc3NhZ2UnIH1dO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9ICdDYWNoZWQgcmVzcG9uc2UnO1xuXG4gICAgICAgIC8vIFNhbHZhciBubyBjYWNoZVxuICAgICAgICByZXNwb25zZUNhY2hlLnNldChtZXNzYWdlcywgcmVzcG9uc2UpO1xuXG4gICAgICAgIC8vIEJ1c2NhciBkbyBjYWNoZVxuICAgICAgICBjb25zdCByZXN1bHQgPSByZXNwb25zZUNhY2hlLmdldChtZXNzYWdlcyk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShyZXNwb25zZSk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnZGV2ZSByZXRvcm5hciBudWxsIHBhcmEgY2FjaGUgZXhwaXJhZG8gKFRUTCknLCAoKSA9PiB7XG4gICAgICAgIC8vIENyaWFyIGNhY2hlIGNvbSBUVEwgbXVpdG8gY3VydG8gKDFtcylcbiAgICAgICAgY29uc3Qgc2hvcnRUVExDYWNoZSA9IG5ldyAocmVzcG9uc2VDYWNoZS5jb25zdHJ1Y3RvcikoMTAwMCwgMSk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnRXhwaXJpbmcgbWVzc2FnZScgfV07XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gJ1dpbGwgZXhwaXJlJztcblxuICAgICAgICAvLyBTYWx2YXIgbm8gY2FjaGVcbiAgICAgICAgc2hvcnRUVExDYWNoZS5zZXQobWVzc2FnZXMsIHJlc3BvbnNlKTtcblxuICAgICAgICAvLyBBZ3VhcmRhciBleHBpcmHDp8Ojb1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHNob3J0VFRMQ2FjaGUuZ2V0KG1lc3NhZ2VzKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSwgMTApO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ3NldCcsICgpID0+IHtcbiAgICAgIHRlc3QoJ2RldmUgc2FsdmFyIHJlc3Bvc3RhIG5vIGNhY2hlJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ1NhdmUgdGhpcycgfV07XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gJ1NhdmVkIHJlc3BvbnNlJztcblxuICAgICAgICByZXNwb25zZUNhY2hlLnNldChtZXNzYWdlcywgcmVzcG9uc2UpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSByZXNwb25zZUNhY2hlLmdldChtZXNzYWdlcyk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShyZXNwb25zZSk7XG4gICAgICB9KTtcblxuICAgICAgdGVzdCgnZGV2ZSBsaW1wYXIgY2FjaGUgbWFpcyBhbnRpZ28gcXVhbmRvIGF0aW5naXIgbWF4U2l6ZScsICgpID0+IHtcbiAgICAgICAgLy8gQ3JpYXIgY2FjaGUgY29tIHRhbWFuaG8gbcOheGltbyBkZSAyXG4gICAgICAgIGNvbnN0IHNtYWxsQ2FjaGUgPSBuZXcgKHJlc3BvbnNlQ2FjaGUuY29uc3RydWN0b3IpKDIsIDM2MDAwMDApO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzMSA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ01lc3NhZ2UgMScgfV07XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzMiA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ01lc3NhZ2UgMicgfV07XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzMyA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ01lc3NhZ2UgMycgfV07XG5cbiAgICAgICAgLy8gQWRpY2lvbmFyIDMgaXRlbnMgKGRldmUgcmVtb3ZlciBvIHByaW1laXJvKVxuICAgICAgICBzbWFsbENhY2hlLnNldChtZXNzYWdlczEsICdSZXNwb25zZSAxJyk7XG4gICAgICAgIHNtYWxsQ2FjaGUuc2V0KG1lc3NhZ2VzMiwgJ1Jlc3BvbnNlIDInKTtcbiAgICAgICAgc21hbGxDYWNoZS5zZXQobWVzc2FnZXMzLCAnUmVzcG9uc2UgMycpO1xuXG4gICAgICAgIC8vIE8gcHJpbWVpcm8gZGV2ZSB0ZXIgc2lkbyByZW1vdmlkb1xuICAgICAgICBleHBlY3Qoc21hbGxDYWNoZS5nZXQobWVzc2FnZXMxKSkudG9CZU51bGwoKTtcbiAgICAgICAgLy8gT3Mgb3V0cm9zIGRvaXMgZGV2ZW0gZXhpc3RpclxuICAgICAgICBleHBlY3Qoc21hbGxDYWNoZS5nZXQobWVzc2FnZXMyKSkudG9CZSgnUmVzcG9uc2UgMicpO1xuICAgICAgICBleHBlY3Qoc21hbGxDYWNoZS5nZXQobWVzc2FnZXMzKSkudG9CZSgnUmVzcG9uc2UgMycpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjb21wcmVzc1Byb21wdCcsICgpID0+IHtcbiAgICB0ZXN0KCdkZXZlIHJlbW92ZXIgbcO6bHRpcGxvcyBlc3Bhw6dvcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb21wdCA9ICdUaGlzICAgaGFzICAgIG11bHRpcGxlICAgICBzcGFjZXMnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gY29tcHJlc3NQcm9tcHQocHJvbXB0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnVGhpcyBoYXMgbXVsdGlwbGUgc3BhY2VzJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZXZlIHJlbW92ZXIgcXVlYnJhcyBkZSBsaW5oYSBkZXNuZWNlc3PDoXJpYXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9tcHQgPSAnTGluZSAxXFxuXFxuXFxuXFxuTGluZSAyJztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXByZXNzUHJvbXB0KHByb21wdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ0xpbmUgMVxcblxcbkxpbmUgMicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSBmYXplciB0cmltIGRvIHRleHRvJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbXB0ID0gJyAgIFRleHQgd2l0aCBzcGFjZXMgICAnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gY29tcHJlc3NQcm9tcHQocHJvbXB0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnVGV4dCB3aXRoIHNwYWNlcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSBhcGxpY2FyIHRvZGFzIGFzIG90aW1pemHDp8O1ZXMganVudGFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbXB0ID0gJyAgVGhpcyAgIGhhcyAgIFxcblxcblxcbiAgbXVsdGlwbGUgICAgaXNzdWVzICBcXG5cXG5cXG4gICc7XG4gICAgICBjb25zdCByZXN1bHQgPSBjb21wcmVzc1Byb21wdChwcm9tcHQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdUaGlzIGhhc1xcblxcbm11bHRpcGxlIGlzc3VlcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSBtYW50ZXIgdGV4dG8gasOhIG90aW1pemFkbyBpbmFsdGVyYWRvJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbXB0ID0gJ0FscmVhZHkgb3B0aW1pemVkIHRleHQnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gY29tcHJlc3NQcm9tcHQocHJvbXB0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnQWxyZWFkeSBvcHRpbWl6ZWQgdGV4dCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZGVkdXBsaWNhdGVNZXNzYWdlcycsICgpID0+IHtcbiAgICB0ZXN0KCdkZXZlIHJlbW92ZXIgbWVuc2FnZW5zIGR1cGxpY2FkYXMgY29uc2VjdXRpdmFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnSGVsbG8nIH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnSGVsbG8nIH0sXG4gICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdIaScgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZHVwbGljYXRlTWVzc2FnZXMobWVzc2FnZXMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLmNvbnRlbnQpLnRvQmUoJ0hlbGxvJyk7XG4gICAgICBleHBlY3QocmVzdWx0WzFdLmNvbnRlbnQpLnRvQmUoJ0hpJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZXZlIG1hbnRlciBtZW5zYWdlbnMgbsOjby1jb25zZWN1dGl2YXMgZHVwbGljYWRhcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW1xuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ0hlbGxvJyB9LFxuICAgICAgICB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnSGknIH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnSGVsbG8nIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBkZWR1cGxpY2F0ZU1lc3NhZ2VzKG1lc3NhZ2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0JlKCdIZWxsbycpO1xuICAgICAgZXhwZWN0KHJlc3VsdFsxXS5jb250ZW50KS50b0JlKCdIaScpO1xuICAgICAgZXhwZWN0KHJlc3VsdFsyXS5jb250ZW50KS50b0JlKCdIZWxsbycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSByZXRvcm5hciBhcnJheSB2YXppbyBwYXJhIGlucHV0IHZhemlvJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZHVwbGljYXRlTWVzc2FnZXMobWVzc2FnZXMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RldmUgbWFudGVyIG1lbnNhZ2VucyDDum5pY2FzIGluYWx0ZXJhZGFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnTWVzc2FnZSAxJyB9LFxuICAgICAgICB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnUmVzcG9uc2UgMScgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdNZXNzYWdlIDInIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBkZWR1cGxpY2F0ZU1lc3NhZ2VzKG1lc3NhZ2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtZXNzYWdlcyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZXZlIGxpZGFyIGNvbSBtw7psdGlwbGFzIGR1cGxpY2F0YXMgY29uc2VjdXRpdmFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnU2FtZScgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdTYW1lJyB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ1NhbWUnIH0sXG4gICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdEaWZmZXJlbnQnIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBkZWR1cGxpY2F0ZU1lc3NhZ2VzKG1lc3NhZ2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0JlKCdTYW1lJyk7XG4gICAgICBleHBlY3QocmVzdWx0WzFdLmNvbnRlbnQpLnRvQmUoJ0RpZmZlcmVudCcp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