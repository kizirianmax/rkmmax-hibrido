{"version":3,"names":["cov_89amica09","actualCoverage","API_BASE","s","PROVIDER","b","process","env","REACT_APP_BACKEND_PROVIDER","toLowerCase","NF_BASE_RAW","REACT_APP_FUNCTIONS_BASE_URL","replace","NF_REL","toInit","init","f","out","headers","Headers","has","set","body","JSON","stringify","normName","name","startsWith","parseResponse","res","ct","get","text","ok","Error","status","statusText","slice","includes","parse","raw","callVercel","url","fetch","callNetlify","prefix","callFn","mode","backendInfo","provider","vercelBase","netlifyBase","params","qs","URLSearchParams","toString","method","post"],"sources":["fnClient.js"],"sourcesContent":["// src/lib/fnClient.js\n// Cliente único para chamar funções no backend.\n// Tenta Vercel (/api) primeiro e, se falhar, cai para Netlify (/.netlify/functions),\n// ou você pode forçar o provedor via REACT_APP_BACKEND_PROVIDER.\n\nconst API_BASE = \"/api\"; // Vercel\nconst PROVIDER = (process.env.REACT_APP_BACKEND_PROVIDER || \"auto\").toLowerCase(); // \"auto\" | \"vercel\" | \"netlify\"\nconst NF_BASE_RAW = (process.env.REACT_APP_FUNCTIONS_BASE_URL || \"\").replace(/\\/+$/, \"\"); // ex: https://seusite.netlify.app\nconst NF_REL = \"/.netlify/functions\"; // caminho relativo no Netlify\n\nfunction toInit(init) {\n  const out = { ...(init || {}) };\n  // Headers\n  const headers = new Headers(out.headers || {});\n  if (!headers.has(\"Content-Type\")) headers.set(\"Content-Type\", \"application/json\");\n  out.headers = headers;\n  // Body → JSON string\n  if (out && typeof out === \"object\" && out.body && typeof out.body === \"object\") {\n    out.body = JSON.stringify(out.body);\n  }\n  return out;\n}\n\nfunction normName(name) {\n  return name.startsWith(\"/\") ? name : `/${name}`;\n}\n\nasync function parseResponse(res) {\n  const ct = res.headers.get(\"content-type\") || \"\";\n  const text = await res.text();\n  if (!res.ok) {\n    throw new Error(`HTTP ${res.status} ${res.statusText} — ${text?.slice(0, 400)}`);\n  }\n  if (ct.includes(\"application/json\")) {\n    try {\n      return JSON.parse(text);\n    } catch {\n      return { raw: text };\n    }\n  }\n  return text;\n}\n\nasync function callVercel(name, init) {\n  const url = `${API_BASE}${normName(name)}`;\n  const res = await fetch(url, toInit(init));\n  return parseResponse(res);\n}\n\nasync function callNetlify(name, init) {\n  const prefix = NF_BASE_RAW || \"\";\n  const url = `${prefix}${NF_REL}${normName(name)}`;\n  const res = await fetch(url, toInit(init));\n  return parseResponse(res);\n}\n\nexport async function callFn(name, init) {\n  const mode = PROVIDER;\n  if (mode === \"vercel\") return callVercel(name, init);\n  if (mode === \"netlify\") return callNetlify(name, init);\n\n  // auto: tenta Vercel → fallback Netlify\n  try {\n    return await callVercel(name, init);\n  } catch {\n    return await callNetlify(name, init);\n  }\n}\n\nexport function backendInfo() {\n  return {\n    provider: PROVIDER, // \"auto\" | \"vercel\" | \"netlify\"\n    vercelBase: API_BASE, // \"/api\"\n    netlifyBase: NF_BASE_RAW || null, // ex: \"https://seusite.netlify.app\"\n  };\n}\n\n// Conveniências\nexport const get = (name, params, init = {}) => {\n  const qs = params ? `?${new URLSearchParams(params).toString()}` : \"\";\n  return callFn(`${name}${qs}`, { ...init, method: \"GET\" });\n};\n\nexport const post = (name, body, init = {}) => {\n  return callFn(name, { ...init, method: \"POST\", body });\n};\n\nexport default callFn;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}