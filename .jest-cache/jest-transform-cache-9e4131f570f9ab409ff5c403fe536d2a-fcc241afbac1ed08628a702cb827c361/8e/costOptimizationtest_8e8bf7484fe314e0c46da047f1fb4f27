a691d92caac668cb1e56173dee2ba456
"use strict";

var _costOptimization = require("../costOptimization.js");
/**
 * COST OPTIMIZATION SYSTEM TESTS
 * Testes unitários para o sistema de otimização de custo
 */

describe('Cost Optimization System', () => {
  describe('ResponseCache', () => {
    beforeEach(() => {
      _costOptimization.responseCache.clear();
    });
    describe('generateHash', () => {
      test('deve gerar hash MD5 consistente para mesmas mensagens', () => {
        const messages = [{
          role: 'user',
          content: 'Hello'
        }, {
          role: 'assistant',
          content: 'Hi there!'
        }];
        const hash1 = _costOptimization.responseCache.generateHash(messages);
        const hash2 = _costOptimization.responseCache.generateHash(messages);
        expect(hash1).toBe(hash2);
        expect(hash1).toHaveLength(32); // MD5 hash length
      });
      test('deve gerar hashes diferentes para mensagens diferentes', () => {
        const messages1 = [{
          role: 'user',
          content: 'Hello'
        }];
        const messages2 = [{
          role: 'user',
          content: 'Goodbye'
        }];
        const hash1 = _costOptimization.responseCache.generateHash(messages1);
        const hash2 = _costOptimization.responseCache.generateHash(messages2);
        expect(hash1).not.toBe(hash2);
      });
      test('deve funcionar com arrays de objetos', () => {
        const messages = [{
          role: 'user',
          content: 'Question 1'
        }, {
          role: 'assistant',
          content: 'Answer 1'
        }, {
          role: 'user',
          content: 'Question 2'
        }];
        const hash = _costOptimization.responseCache.generateHash(messages);
        expect(hash).toBeDefined();
        expect(typeof hash).toBe('string');
        expect(hash).toHaveLength(32);
      });
    });
    describe('get', () => {
      test('deve retornar null para cache miss', () => {
        const messages = [{
          role: 'user',
          content: 'New message'
        }];
        const result = _costOptimization.responseCache.get(messages);
        expect(result).toBeNull();
      });
      test('deve retornar resposta cacheada para cache hit', () => {
        const messages = [{
          role: 'user',
          content: 'Test message'
        }];
        const response = 'Cached response';

        // Salvar no cache
        _costOptimization.responseCache.set(messages, response);

        // Buscar do cache
        const result = _costOptimization.responseCache.get(messages);
        expect(result).toBe(response);
      });
      test('deve retornar null para cache expirado (TTL)', () => {
        // Criar cache com TTL muito curto (1ms)
        const shortTTLCache = new _costOptimization.responseCache.constructor(1000, 1);
        const messages = [{
          role: 'user',
          content: 'Expiring message'
        }];
        const response = 'Will expire';

        // Salvar no cache
        shortTTLCache.set(messages, response);

        // Aguardar expiração
        return new Promise(resolve => {
          setTimeout(() => {
            const result = shortTTLCache.get(messages);
            expect(result).toBeNull();
            resolve();
          }, 10);
        });
      });
    });
    describe('set', () => {
      test('deve salvar resposta no cache', () => {
        const messages = [{
          role: 'user',
          content: 'Save this'
        }];
        const response = 'Saved response';
        _costOptimization.responseCache.set(messages, response);
        const result = _costOptimization.responseCache.get(messages);
        expect(result).toBe(response);
      });
      test('deve limpar cache mais antigo quando atingir maxSize', () => {
        // Criar cache com tamanho máximo de 2
        const smallCache = new _costOptimization.responseCache.constructor(2, 3600000);
        const messages1 = [{
          role: 'user',
          content: 'Message 1'
        }];
        const messages2 = [{
          role: 'user',
          content: 'Message 2'
        }];
        const messages3 = [{
          role: 'user',
          content: 'Message 3'
        }];

        // Adicionar 3 itens (deve remover o primeiro)
        smallCache.set(messages1, 'Response 1');
        smallCache.set(messages2, 'Response 2');
        smallCache.set(messages3, 'Response 3');

        // O primeiro deve ter sido removido
        expect(smallCache.get(messages1)).toBeNull();
        // Os outros dois devem existir
        expect(smallCache.get(messages2)).toBe('Response 2');
        expect(smallCache.get(messages3)).toBe('Response 3');
      });
    });
    describe('clear', () => {
      test('deve limpar todos os itens do cache', () => {
        const messages1 = [{
          role: 'user',
          content: 'Message 1'
        }];
        const messages2 = [{
          role: 'user',
          content: 'Message 2'
        }];
        _costOptimization.responseCache.set(messages1, 'Response 1');
        _costOptimization.responseCache.set(messages2, 'Response 2');
        expect(_costOptimization.responseCache.get(messages1)).toBe('Response 1');
        expect(_costOptimization.responseCache.get(messages2)).toBe('Response 2');
        _costOptimization.responseCache.clear();
        expect(_costOptimization.responseCache.get(messages1)).toBeNull();
        expect(_costOptimization.responseCache.get(messages2)).toBeNull();
      });
    });
    describe('stats', () => {
      test('deve retornar estatísticas do cache', () => {
        const messages = [{
          role: 'user',
          content: 'Test'
        }];
        _costOptimization.responseCache.set(messages, 'Response');
        const stats = _costOptimization.responseCache.stats();
        expect(stats).toHaveProperty('size');
        expect(stats).toHaveProperty('maxSize');
        expect(stats).toHaveProperty('ttl');
        expect(stats.size).toBeGreaterThan(0);
        expect(stats.maxSize).toBe(1000);
        expect(stats.ttl).toBe(3600000);
      });
    });
  });
  describe('compressPrompt', () => {
    test('deve remover múltiplos espaços', () => {
      const prompt = 'This   has    multiple     spaces';
      const result = (0, _costOptimization.compressPrompt)(prompt);
      expect(result).toBe('This has multiple spaces');
    });
    test('deve remover quebras de linha desnecessárias', () => {
      const prompt = 'Line 1\n\n\n\nLine 2';
      const result = (0, _costOptimization.compressPrompt)(prompt);

      // A função atual converte todos os espaços em brancos em um único espaço
      expect(result).toBe('Line 1 Line 2');
    });
    test('deve fazer trim do texto', () => {
      const prompt = '   Text with spaces   ';
      const result = (0, _costOptimization.compressPrompt)(prompt);
      expect(result).toBe('Text with spaces');
    });
    test('deve aplicar todas as otimizações juntas', () => {
      const prompt = '  This   has   \n\n\n  multiple    issues  \n\n\n  ';
      const result = (0, _costOptimization.compressPrompt)(prompt);

      // A função atual converte todos os espaços em brancos em um único espaço
      expect(result).toBe('This has multiple issues');
    });
    test('deve manter texto já otimizado inalterado', () => {
      const prompt = 'Already optimized text';
      const result = (0, _costOptimization.compressPrompt)(prompt);
      expect(result).toBe('Already optimized text');
    });
  });
  describe('deduplicateMessages', () => {
    test('deve remover mensagens duplicadas consecutivas', () => {
      const messages = [{
        role: 'user',
        content: 'Hello'
      }, {
        role: 'user',
        content: 'Hello'
      }, {
        role: 'assistant',
        content: 'Hi'
      }];
      const result = (0, _costOptimization.deduplicateMessages)(messages);
      expect(result).toHaveLength(2);
      expect(result[0].content).toBe('Hello');
      expect(result[1].content).toBe('Hi');
    });
    test('deve manter mensagens não-consecutivas duplicadas', () => {
      const messages = [{
        role: 'user',
        content: 'Hello'
      }, {
        role: 'assistant',
        content: 'Hi'
      }, {
        role: 'user',
        content: 'Hello'
      }];
      const result = (0, _costOptimization.deduplicateMessages)(messages);
      expect(result).toHaveLength(3);
      expect(result[0].content).toBe('Hello');
      expect(result[1].content).toBe('Hi');
      expect(result[2].content).toBe('Hello');
    });
    test('deve retornar array vazio para input vazio', () => {
      const messages = [];
      const result = (0, _costOptimization.deduplicateMessages)(messages);
      expect(result).toEqual([]);
      expect(result).toHaveLength(0);
    });
    test('deve manter mensagens únicas inalteradas', () => {
      const messages = [{
        role: 'user',
        content: 'Message 1'
      }, {
        role: 'assistant',
        content: 'Response 1'
      }, {
        role: 'user',
        content: 'Message 2'
      }];
      const result = (0, _costOptimization.deduplicateMessages)(messages);
      expect(result).toHaveLength(3);
      expect(result).toEqual(messages);
    });
    test('deve lidar com múltiplas duplicatas consecutivas', () => {
      const messages = [{
        role: 'user',
        content: 'Same'
      }, {
        role: 'user',
        content: 'Same'
      }, {
        role: 'user',
        content: 'Same'
      }, {
        role: 'assistant',
        content: 'Different'
      }];
      const result = (0, _costOptimization.deduplicateMessages)(messages);
      expect(result).toHaveLength(2);
      expect(result[0].content).toBe('Same');
      expect(result[1].content).toBe('Different');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29zdE9wdGltaXphdGlvbiIsInJlcXVpcmUiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJyZXNwb25zZUNhY2hlIiwiY2xlYXIiLCJ0ZXN0IiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsImhhc2gxIiwiZ2VuZXJhdGVIYXNoIiwiaGFzaDIiLCJleHBlY3QiLCJ0b0JlIiwidG9IYXZlTGVuZ3RoIiwibWVzc2FnZXMxIiwibWVzc2FnZXMyIiwibm90IiwiaGFzaCIsInRvQmVEZWZpbmVkIiwicmVzdWx0IiwiZ2V0IiwidG9CZU51bGwiLCJyZXNwb25zZSIsInNldCIsInNob3J0VFRMQ2FjaGUiLCJjb25zdHJ1Y3RvciIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInNtYWxsQ2FjaGUiLCJtZXNzYWdlczMiLCJzdGF0cyIsInRvSGF2ZVByb3BlcnR5Iiwic2l6ZSIsInRvQmVHcmVhdGVyVGhhbiIsIm1heFNpemUiLCJ0dGwiLCJwcm9tcHQiLCJjb21wcmVzc1Byb21wdCIsImRlZHVwbGljYXRlTWVzc2FnZXMiLCJ0b0VxdWFsIl0sInNvdXJjZXMiOlsiY29zdE9wdGltaXphdGlvbi50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ09TVCBPUFRJTUlaQVRJT04gU1lTVEVNIFRFU1RTXG4gKiBUZXN0ZXMgdW5pdMOhcmlvcyBwYXJhIG8gc2lzdGVtYSBkZSBvdGltaXphw6fDo28gZGUgY3VzdG9cbiAqL1xuXG5pbXBvcnQge1xuICByZXNwb25zZUNhY2hlLFxuICBjb21wcmVzc1Byb21wdCxcbiAgZGVkdXBsaWNhdGVNZXNzYWdlcyxcbiAgZXN0aW1hdGVUb2tlbnMsXG59IGZyb20gJy4uL2Nvc3RPcHRpbWl6YXRpb24uanMnO1xuXG5kZXNjcmliZSgnQ29zdCBPcHRpbWl6YXRpb24gU3lzdGVtJywgKCkgPT4ge1xuICBkZXNjcmliZSgnUmVzcG9uc2VDYWNoZScsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIHJlc3BvbnNlQ2FjaGUuY2xlYXIoKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdnZW5lcmF0ZUhhc2gnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdkZXZlIGdlcmFyIGhhc2ggTUQ1IGNvbnNpc3RlbnRlIHBhcmEgbWVzbWFzIG1lbnNhZ2VucycsICgpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXG4gICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdIZWxsbycgfSxcbiAgICAgICAgICB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnSGkgdGhlcmUhJyB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IGhhc2gxID0gcmVzcG9uc2VDYWNoZS5nZW5lcmF0ZUhhc2gobWVzc2FnZXMpO1xuICAgICAgICBjb25zdCBoYXNoMiA9IHJlc3BvbnNlQ2FjaGUuZ2VuZXJhdGVIYXNoKG1lc3NhZ2VzKTtcblxuICAgICAgICBleHBlY3QoaGFzaDEpLnRvQmUoaGFzaDIpO1xuICAgICAgICBleHBlY3QoaGFzaDEpLnRvSGF2ZUxlbmd0aCgzMik7IC8vIE1ENSBoYXNoIGxlbmd0aFxuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ2RldmUgZ2VyYXIgaGFzaGVzIGRpZmVyZW50ZXMgcGFyYSBtZW5zYWdlbnMgZGlmZXJlbnRlcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMxID0gW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnSGVsbG8nIH1dO1xuICAgICAgICBjb25zdCBtZXNzYWdlczIgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdHb29kYnllJyB9XTtcblxuICAgICAgICBjb25zdCBoYXNoMSA9IHJlc3BvbnNlQ2FjaGUuZ2VuZXJhdGVIYXNoKG1lc3NhZ2VzMSk7XG4gICAgICAgIGNvbnN0IGhhc2gyID0gcmVzcG9uc2VDYWNoZS5nZW5lcmF0ZUhhc2gobWVzc2FnZXMyKTtcblxuICAgICAgICBleHBlY3QoaGFzaDEpLm5vdC50b0JlKGhhc2gyKTtcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0KCdkZXZlIGZ1bmNpb25hciBjb20gYXJyYXlzIGRlIG9iamV0b3MnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW1xuICAgICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnUXVlc3Rpb24gMScgfSxcbiAgICAgICAgICB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnQW5zd2VyIDEnIH0sXG4gICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdRdWVzdGlvbiAyJyB9LFxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IGhhc2ggPSByZXNwb25zZUNhY2hlLmdlbmVyYXRlSGFzaChtZXNzYWdlcyk7XG5cbiAgICAgICAgZXhwZWN0KGhhc2gpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgaGFzaCkudG9CZSgnc3RyaW5nJyk7XG4gICAgICAgIGV4cGVjdChoYXNoKS50b0hhdmVMZW5ndGgoMzIpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnZ2V0JywgKCkgPT4ge1xuICAgICAgdGVzdCgnZGV2ZSByZXRvcm5hciBudWxsIHBhcmEgY2FjaGUgbWlzcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdOZXcgbWVzc2FnZScgfV07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3BvbnNlQ2FjaGUuZ2V0KG1lc3NhZ2VzKTtcblxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ2RldmUgcmV0b3JuYXIgcmVzcG9zdGEgY2FjaGVhZGEgcGFyYSBjYWNoZSBoaXQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnVGVzdCBtZXNzYWdlJyB9XTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSAnQ2FjaGVkIHJlc3BvbnNlJztcblxuICAgICAgICAvLyBTYWx2YXIgbm8gY2FjaGVcbiAgICAgICAgcmVzcG9uc2VDYWNoZS5zZXQobWVzc2FnZXMsIHJlc3BvbnNlKTtcblxuICAgICAgICAvLyBCdXNjYXIgZG8gY2FjaGVcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2VDYWNoZS5nZXQobWVzc2FnZXMpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUocmVzcG9uc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ2RldmUgcmV0b3JuYXIgbnVsbCBwYXJhIGNhY2hlIGV4cGlyYWRvIChUVEwpJywgKCkgPT4ge1xuICAgICAgICAvLyBDcmlhciBjYWNoZSBjb20gVFRMIG11aXRvIGN1cnRvICgxbXMpXG4gICAgICAgIGNvbnN0IHNob3J0VFRMQ2FjaGUgPSBuZXcgKHJlc3BvbnNlQ2FjaGUuY29uc3RydWN0b3IpKDEwMDAsIDEpO1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ0V4cGlyaW5nIG1lc3NhZ2UnIH1dO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9ICdXaWxsIGV4cGlyZSc7XG5cbiAgICAgICAgLy8gU2FsdmFyIG5vIGNhY2hlXG4gICAgICAgIHNob3J0VFRMQ2FjaGUuc2V0KG1lc3NhZ2VzLCByZXNwb25zZSk7XG5cbiAgICAgICAgLy8gQWd1YXJkYXIgZXhwaXJhw6fDo29cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBzaG9ydFRUTENhY2hlLmdldChtZXNzYWdlcyk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdzZXQnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdkZXZlIHNhbHZhciByZXNwb3N0YSBubyBjYWNoZScsICgpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdTYXZlIHRoaXMnIH1dO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9ICdTYXZlZCByZXNwb25zZSc7XG5cbiAgICAgICAgcmVzcG9uc2VDYWNoZS5zZXQobWVzc2FnZXMsIHJlc3BvbnNlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2VDYWNoZS5nZXQobWVzc2FnZXMpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUocmVzcG9uc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ2RldmUgbGltcGFyIGNhY2hlIG1haXMgYW50aWdvIHF1YW5kbyBhdGluZ2lyIG1heFNpemUnLCAoKSA9PiB7XG4gICAgICAgIC8vIENyaWFyIGNhY2hlIGNvbSB0YW1hbmhvIG3DoXhpbW8gZGUgMlxuICAgICAgICBjb25zdCBzbWFsbENhY2hlID0gbmV3IChyZXNwb25zZUNhY2hlLmNvbnN0cnVjdG9yKSgyLCAzNjAwMDAwKTtcblxuICAgICAgICBjb25zdCBtZXNzYWdlczEgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdNZXNzYWdlIDEnIH1dO1xuICAgICAgICBjb25zdCBtZXNzYWdlczIgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdNZXNzYWdlIDInIH1dO1xuICAgICAgICBjb25zdCBtZXNzYWdlczMgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdNZXNzYWdlIDMnIH1dO1xuXG4gICAgICAgIC8vIEFkaWNpb25hciAzIGl0ZW5zIChkZXZlIHJlbW92ZXIgbyBwcmltZWlybylcbiAgICAgICAgc21hbGxDYWNoZS5zZXQobWVzc2FnZXMxLCAnUmVzcG9uc2UgMScpO1xuICAgICAgICBzbWFsbENhY2hlLnNldChtZXNzYWdlczIsICdSZXNwb25zZSAyJyk7XG4gICAgICAgIHNtYWxsQ2FjaGUuc2V0KG1lc3NhZ2VzMywgJ1Jlc3BvbnNlIDMnKTtcblxuICAgICAgICAvLyBPIHByaW1laXJvIGRldmUgdGVyIHNpZG8gcmVtb3ZpZG9cbiAgICAgICAgZXhwZWN0KHNtYWxsQ2FjaGUuZ2V0KG1lc3NhZ2VzMSkpLnRvQmVOdWxsKCk7XG4gICAgICAgIC8vIE9zIG91dHJvcyBkb2lzIGRldmVtIGV4aXN0aXJcbiAgICAgICAgZXhwZWN0KHNtYWxsQ2FjaGUuZ2V0KG1lc3NhZ2VzMikpLnRvQmUoJ1Jlc3BvbnNlIDInKTtcbiAgICAgICAgZXhwZWN0KHNtYWxsQ2FjaGUuZ2V0KG1lc3NhZ2VzMykpLnRvQmUoJ1Jlc3BvbnNlIDMnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2NsZWFyJywgKCkgPT4ge1xuICAgICAgdGVzdCgnZGV2ZSBsaW1wYXIgdG9kb3Mgb3MgaXRlbnMgZG8gY2FjaGUnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzMSA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ01lc3NhZ2UgMScgfV07XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzMiA9IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ01lc3NhZ2UgMicgfV07XG5cbiAgICAgICAgcmVzcG9uc2VDYWNoZS5zZXQobWVzc2FnZXMxLCAnUmVzcG9uc2UgMScpO1xuICAgICAgICByZXNwb25zZUNhY2hlLnNldChtZXNzYWdlczIsICdSZXNwb25zZSAyJyk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlQ2FjaGUuZ2V0KG1lc3NhZ2VzMSkpLnRvQmUoJ1Jlc3BvbnNlIDEnKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlQ2FjaGUuZ2V0KG1lc3NhZ2VzMikpLnRvQmUoJ1Jlc3BvbnNlIDInKTtcblxuICAgICAgICByZXNwb25zZUNhY2hlLmNsZWFyKCk7XG5cbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlQ2FjaGUuZ2V0KG1lc3NhZ2VzMSkpLnRvQmVOdWxsKCk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZUNhY2hlLmdldChtZXNzYWdlczIpKS50b0JlTnVsbCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnc3RhdHMnLCAoKSA9PiB7XG4gICAgICB0ZXN0KCdkZXZlIHJldG9ybmFyIGVzdGF0w61zdGljYXMgZG8gY2FjaGUnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnVGVzdCcgfV07XG4gICAgICAgIHJlc3BvbnNlQ2FjaGUuc2V0KG1lc3NhZ2VzLCAnUmVzcG9uc2UnKTtcblxuICAgICAgICBjb25zdCBzdGF0cyA9IHJlc3BvbnNlQ2FjaGUuc3RhdHMoKTtcblxuICAgICAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCdzaXplJyk7XG4gICAgICAgIGV4cGVjdChzdGF0cykudG9IYXZlUHJvcGVydHkoJ21heFNpemUnKTtcbiAgICAgICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgndHRsJyk7XG4gICAgICAgIGV4cGVjdChzdGF0cy5zaXplKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIGV4cGVjdChzdGF0cy5tYXhTaXplKS50b0JlKDEwMDApO1xuICAgICAgICBleHBlY3Qoc3RhdHMudHRsKS50b0JlKDM2MDAwMDApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjb21wcmVzc1Byb21wdCcsICgpID0+IHtcbiAgICB0ZXN0KCdkZXZlIHJlbW92ZXIgbcO6bHRpcGxvcyBlc3Bhw6dvcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb21wdCA9ICdUaGlzICAgaGFzICAgIG11bHRpcGxlICAgICBzcGFjZXMnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gY29tcHJlc3NQcm9tcHQocHJvbXB0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnVGhpcyBoYXMgbXVsdGlwbGUgc3BhY2VzJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZXZlIHJlbW92ZXIgcXVlYnJhcyBkZSBsaW5oYSBkZXNuZWNlc3PDoXJpYXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9tcHQgPSAnTGluZSAxXFxuXFxuXFxuXFxuTGluZSAyJztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNvbXByZXNzUHJvbXB0KHByb21wdCk7XG5cbiAgICAgIC8vIEEgZnVuw6fDo28gYXR1YWwgY29udmVydGUgdG9kb3Mgb3MgZXNwYcOnb3MgZW0gYnJhbmNvcyBlbSB1bSDDum5pY28gZXNwYcOnb1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnTGluZSAxIExpbmUgMicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSBmYXplciB0cmltIGRvIHRleHRvJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbXB0ID0gJyAgIFRleHQgd2l0aCBzcGFjZXMgICAnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gY29tcHJlc3NQcm9tcHQocHJvbXB0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnVGV4dCB3aXRoIHNwYWNlcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSBhcGxpY2FyIHRvZGFzIGFzIG90aW1pemHDp8O1ZXMganVudGFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbXB0ID0gJyAgVGhpcyAgIGhhcyAgIFxcblxcblxcbiAgbXVsdGlwbGUgICAgaXNzdWVzICBcXG5cXG5cXG4gICc7XG4gICAgICBjb25zdCByZXN1bHQgPSBjb21wcmVzc1Byb21wdChwcm9tcHQpO1xuXG4gICAgICAvLyBBIGZ1bsOnw6NvIGF0dWFsIGNvbnZlcnRlIHRvZG9zIG9zIGVzcGHDp29zIGVtIGJyYW5jb3MgZW0gdW0gw7puaWNvIGVzcGHDp29cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ1RoaXMgaGFzIG11bHRpcGxlIGlzc3VlcycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSBtYW50ZXIgdGV4dG8gasOhIG90aW1pemFkbyBpbmFsdGVyYWRvJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbXB0ID0gJ0FscmVhZHkgb3B0aW1pemVkIHRleHQnO1xuICAgICAgY29uc3QgcmVzdWx0ID0gY29tcHJlc3NQcm9tcHQocHJvbXB0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnQWxyZWFkeSBvcHRpbWl6ZWQgdGV4dCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZGVkdXBsaWNhdGVNZXNzYWdlcycsICgpID0+IHtcbiAgICB0ZXN0KCdkZXZlIHJlbW92ZXIgbWVuc2FnZW5zIGR1cGxpY2FkYXMgY29uc2VjdXRpdmFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnSGVsbG8nIH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnSGVsbG8nIH0sXG4gICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdIaScgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZHVwbGljYXRlTWVzc2FnZXMobWVzc2FnZXMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLmNvbnRlbnQpLnRvQmUoJ0hlbGxvJyk7XG4gICAgICBleHBlY3QocmVzdWx0WzFdLmNvbnRlbnQpLnRvQmUoJ0hpJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZXZlIG1hbnRlciBtZW5zYWdlbnMgbsOjby1jb25zZWN1dGl2YXMgZHVwbGljYWRhcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gW1xuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ0hlbGxvJyB9LFxuICAgICAgICB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnSGknIH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnSGVsbG8nIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBkZWR1cGxpY2F0ZU1lc3NhZ2VzKG1lc3NhZ2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0JlKCdIZWxsbycpO1xuICAgICAgZXhwZWN0KHJlc3VsdFsxXS5jb250ZW50KS50b0JlKCdIaScpO1xuICAgICAgZXhwZWN0KHJlc3VsdFsyXS5jb250ZW50KS50b0JlKCdIZWxsbycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnZGV2ZSByZXRvcm5hciBhcnJheSB2YXppbyBwYXJhIGlucHV0IHZhemlvJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZHVwbGljYXRlTWVzc2FnZXMobWVzc2FnZXMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtdKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ2RldmUgbWFudGVyIG1lbnNhZ2VucyDDum5pY2FzIGluYWx0ZXJhZGFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnTWVzc2FnZSAxJyB9LFxuICAgICAgICB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnUmVzcG9uc2UgMScgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdNZXNzYWdlIDInIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBkZWR1cGxpY2F0ZU1lc3NhZ2VzKG1lc3NhZ2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtZXNzYWdlcyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdkZXZlIGxpZGFyIGNvbSBtw7psdGlwbGFzIGR1cGxpY2F0YXMgY29uc2VjdXRpdmFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZXMgPSBbXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnU2FtZScgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdTYW1lJyB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ1NhbWUnIH0sXG4gICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdEaWZmZXJlbnQnIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBkZWR1cGxpY2F0ZU1lc3NhZ2VzKG1lc3NhZ2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXS5jb250ZW50KS50b0JlKCdTYW1lJyk7XG4gICAgICBleHBlY3QocmVzdWx0WzFdLmNvbnRlbnQpLnRvQmUoJ0RpZmZlcmVudCcpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUtBLElBQUFBLGlCQUFBLEdBQUFDLE9BQUE7QUFMQTtBQUNBO0FBQ0E7QUFDQTs7QUFTQUMsUUFBUSxDQUFDLDBCQUEwQixFQUFFLE1BQU07RUFDekNBLFFBQVEsQ0FBQyxlQUFlLEVBQUUsTUFBTTtJQUM5QkMsVUFBVSxDQUFDLE1BQU07TUFDZkMsK0JBQWEsQ0FBQ0MsS0FBSyxDQUFDLENBQUM7SUFDdkIsQ0FBQyxDQUFDO0lBRUZILFFBQVEsQ0FBQyxjQUFjLEVBQUUsTUFBTTtNQUM3QkksSUFBSSxDQUFDLHVEQUF1RCxFQUFFLE1BQU07UUFDbEUsTUFBTUMsUUFBUSxHQUFHLENBQ2Y7VUFBRUMsSUFBSSxFQUFFLE1BQU07VUFBRUMsT0FBTyxFQUFFO1FBQVEsQ0FB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