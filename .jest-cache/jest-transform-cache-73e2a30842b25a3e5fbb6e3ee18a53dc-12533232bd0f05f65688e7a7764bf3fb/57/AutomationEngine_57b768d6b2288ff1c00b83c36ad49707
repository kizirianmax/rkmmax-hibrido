4c6c94f8f76de7663856af8d88a9ab69
/**
 * AUTOMATION ENGINE
 * Motor central de automaÃ§Ã£o que orquestra todo o processo
 * Coordena: AnÃ¡lise â†’ SeleÃ§Ã£o de Especialista â†’ GeraÃ§Ã£o de CÃ³digo â†’ ValidaÃ§Ã£o â†’ Commit
 */

import SecurityValidator from "./SecurityValidator.js";
import AuditLogger from "./AuditLogger.js";
import GitHubAutomation from "./GitHubAutomation.js";
import SpecialistSelector from "./SpecialistSelector.js";
class AutomationEngine {
  constructor(config = {}) {
    this.config = {
      maxRetries: config.maxRetries || 3,
      timeout: config.timeout || 30000,
      aiModel: config.aiModel || "gemini-2.0-flash",
      temperature: config.temperature || 0.7,
      ...config
    };
    this.validator = new SecurityValidator();
    this.auditLogger = new AuditLogger();
    this.specialistSelector = new SpecialistSelector();

    // GitHub serÃ¡ inicializado quando necessÃ¡rio
    this.gitHub = null;
  }

  /**
   * Inicializar GitHub Automation
   */
  initializeGitHub(token) {
    try {
      this.gitHub = new GitHubAutomation(token);
      return true;
    } catch (error) {
      console.error("Erro ao inicializar GitHub:", error);
      return false;
    }
  }

  /**
   * Executar automaÃ§Ã£o completa
   */
  async executeAutomation(request) {
    const automationId = this.auditLogger.logAutomationRequest({
      userId: request.userId,
      username: request.username,
      command: request.command,
      mode: request.mode || "OPTIMIZED",
      selectedSpecialist: request.selectedSpecialist,
      description: request.description,
      ipAddress: request.ipAddress,
      userAgent: request.userAgent,
      sessionId: request.sessionId
    });
    const result = {
      automationId,
      status: "INITIATED",
      steps: [],
      errors: []
    };
    try {
      // Fase 1: AnÃ¡lise do comando
      console.log(`\nðŸ“‹ FASE 1: AnÃ¡lise do comando`);
      const analysis = await this.analyzeCommand(request.command);
      result.steps.push({
        phase: "ANALYSIS",
        status: "COMPLETED",
        details: analysis
      });

      // Fase 2: SeleÃ§Ã£o de especialista
      console.log(`\nðŸŽ¯ FASE 2: SeleÃ§Ã£o de especialista`);
      let specialist;
      if (request.mode === "HYBRID" && request.selectedSpecialist) {
        specialist = request.selectedSpecialist;
        console.log(`âœ… Especialista selecionado manualmente: ${specialist}`);
      } else {
        specialist = await this.specialistSelector.selectSpecialist(analysis.taskType, analysis.keywords);
        console.log(`âœ… Especialista selecionado automaticamente: ${specialist}`);
      }
      result.steps.push({
        phase: "SPECIALIST_SELECTION",
        status: "COMPLETED",
        specialist,
        mode: request.mode
      });

      // Fase 3: GeraÃ§Ã£o de cÃ³digo
      console.log(`\nðŸ’» FASE 3: GeraÃ§Ã£o de cÃ³digo`);
      const codeGeneration = await this.generateCode(analysis, specialist, request.repositoryInfo);
      result.steps.push({
        phase: "CODE_GENERATION",
        status: "COMPLETED",
        filesGenerated: codeGeneration.files.length,
        linesOfCode: codeGeneration.totalLines
      });

      // Fase 4: ValidaÃ§Ã£o de seguranÃ§a
      console.log(`\nðŸ” FASE 4: ValidaÃ§Ã£o de seguranÃ§a`);
      const securityValidation = await this.validateCode(codeGeneration.files);
      if (!securityValidation.isValid) {
        result.status = "BLOCKED";
        result.errors.push({
          phase: "SECURITY_VALIDATION",
          message: "CÃ³digo bloqueado por validaÃ§Ã£o de seguranÃ§a",
          details: securityValidation
        });
        this.auditLogger.logSecurityValidation({
          automationId,
          filesChecked: codeGeneration.files.length,
          isValid: false,
          severity: securityValidation.severity,
          errors: securityValidation.errors,
          warnings: securityValidation.warnings
        });
        return result;
      }
      result.steps.push({
        phase: "SECURITY_VALIDATION",
        status: "COMPLETED",
        warnings: securityValidation.warnings.length
      });

      // Fase 5: Commit + Push
      console.log(`\nðŸ“ FASE 5: Commit + Push`);
      let commitResult = null;
      if (request.repositoryInfo && this.gitHub) {
        commitResult = await this.commitAndPush(codeGeneration.files, analysis.commitMessage, request.repositoryInfo, specialist);
        result.steps.push({
          phase: "GIT_COMMIT",
          status: "COMPLETED",
          commitHash: commitResult.commit.sha,
          filesChanged: commitResult.filesChanged
        });
      }

      // Fase 6: Criar PR (opcional)
      console.log(`\nðŸ”€ FASE 6: Criar Pull Request (opcional)`);
      let prResult = null;
      if (request.createPR && this.gitHub && commitResult) {
        prResult = await this.createPullRequest(analysis, specialist, request.repositoryInfo);
        result.steps.push({
          phase: "CREATE_PR",
          status: "COMPLETED",
          prNumber: prResult.pr.number,
          prUrl: prResult.pr.url
        });
      }

      // Sucesso!
      result.status = "SUCCESS";
      result.output = {
        files: codeGeneration.files,
        commit: commitResult?.commit,
        pr: prResult?.pr
      };

      // Log de conclusÃ£o
      this.auditLogger.logAutomationCompletion({
        automationId,
        userId: request.userId,
        status: "SUCCESS",
        totalDuration: result.totalDuration,
        commitHash: commitResult?.commit.sha,
        prUrl: prResult?.pr.url,
        filesCreated: codeGeneration.files.length,
        linesAdded: codeGeneration.totalLines,
        specialist,
        mode: request.mode,
        creditsUsed: request.creditsUsed
      });
      return result;
    } catch (error) {
      console.error(`âŒ Erro na automaÃ§Ã£o: ${error.message}`);
      result.status = "FAILED";
      result.errors.push({
        message: error.message,
        stack: error.stack
      });

      // Log de erro
      this.auditLogger.logError({
        automationId,
        userId: request.userId,
        errorType: error.constructor.name,
        errorMessage: error.message,
        errorStack: error.stack,
        phase: result.steps[result.steps.length - 1]?.phase || "UNKNOWN"
      });
      return result;
    }
  }

  /**
   * Analisar comando do usuÃ¡rio
   */
  async analyzeCommand(command) {
    // Aqui seria chamada uma IA para analisar o comando
    // Por enquanto, anÃ¡lise simples

    const keywords = command.toLowerCase().split(" ");
    let taskType = "GENERAL";
    if (command.includes("componente") || command.includes("component")) taskType = "COMPONENT";
    if (command.includes("funÃ§Ã£o") || command.includes("function")) taskType = "FUNCTION";
    if (command.includes("teste") || command.includes("test")) taskType = "TEST";
    if (command.includes("estilo") || command.includes("style")) taskType = "STYLE";
    if (command.includes("documentaÃ§Ã£o") || command.includes("documentation")) taskType = "DOCUMENTATION";
    if (command.includes("refatorar") || command.includes("refactor")) taskType = "REFACTOR";
    return {
      command,
      taskType,
      keywords,
      commitMessage: `feat: ${command.substring(0, 50)}`,
      description: command
    };
  }

  /**
   * Gerar cÃ³digo via IA
   */
  async generateCode(analysis, specialist, repositoryInfo) {
    // Aqui seria chamada a IA (Gemini, GROQ, etc)
    // Por enquanto, simulaÃ§Ã£o

    console.log(`ðŸ¤– Gerando cÃ³digo com ${specialist}...`);

    // Simular geraÃ§Ã£o de cÃ³digo
    const files = [{
      path: `src/generated_${Date.now()}.js`,
      content: `// Gerado automaticamente por ${specialist}\n// Tarefa: ${analysis.description}\n\nexport default function generated() {\n  // CÃ³digo gerado aqui\n}\n`
    }];
    return {
      files,
      totalLines: files.reduce((sum, f) => sum + f.content.split("\n").length, 0),
      specialist
    };
  }

  /**
   * Validar cÃ³digo
   */
  async validateCode(files) {
    console.log(`ðŸ” Validando ${files.length} arquivos...`);
    const validation = await this.validator.validateFiles(files);
    if (!validation.isValid) {
      console.log(`âŒ ValidaÃ§Ã£o falhou!`);
      return {
        isValid: false,
        severity: "critical",
        errors: validation.details.flatMap(d => d.errors),
        warnings: validation.details.flatMap(d => d.warnings)
      };
    }
    console.log(`âœ… CÃ³digo validado com sucesso!`);
    return {
      isValid: true,
      severity: "none",
      errors: [],
      warnings: validation.details.flatMap(d => d.warnings)
    };
  }

  /**
   * Fazer commit + push
   */
  async commitAndPush(files, message, repositoryInfo, specialist) {
    console.log(`ðŸ“ Fazendo commit + push...`);
    if (!this.gitHub) {
      throw new Error("GitHub nÃ£o inicializado");
    }
    const result = await this.gitHub.commitAndPush(repositoryInfo.owner, repositoryInfo.repo, files, message, repositoryInfo.branch || "main", {
      name: `${specialist} Bot`,
      email: `${specialist.toLowerCase()}@rkmmax.com`
    });
    console.log(`âœ… Commit realizado: ${result.commit.sha.substring(0, 7)}`);
    return result;
  }

  /**
   * Criar Pull Request
   */
  async createPullRequest(analysis, specialist, repositoryInfo) {
    console.log(`ðŸ”€ Criando Pull Request...`);
    if (!this.gitHub) {
      throw new Error("GitHub nÃ£o inicializado");
    }
    const branchName = `automation/${specialist.toLowerCase()}/${Date.now()}`;
    const pr = await this.gitHub.createPullRequest(repositoryInfo.owner, repositoryInfo.repo, `[${specialist}] ${analysis.commitMessage}`, `AutomaÃ§Ã£o executada por ${specialist}\n\nTarefa: ${analysis.description}`, branchName, repositoryInfo.branch || "main");
    console.log(`âœ… PR criado: ${pr.url}`);
    return {
      pr
    };
  }

  /**
   * Obter histÃ³rico de automaÃ§Ãµes
   */
  getAutomationHistory(userId, limit = 50) {
    return this.auditLogger.searchLogs({
      type: "AUTOMATION_REQUEST",
      userId
    }).slice(-limit);
  }

  /**
   * Obter estatÃ­sticas de automaÃ§Ã£o
   */
  getAutomationStats(userId) {
    const logs = this.auditLogger.searchLogs({
      userId
    });
    const stats = {
      totalAutomations: logs.length,
      successfulAutomations: logs.filter(l => l.status === "SUCCESS").length,
      failedAutomations: logs.filter(l => l.status === "FAILED").length,
      blockedAutomations: logs.filter(l => l.status === "BLOCKED").length,
      byMode: {},
      bySpecialist: {}
    };
    logs.forEach(log => {
      if (log.mode) {
        stats.byMode[log.mode] = (stats.byMode[log.mode] || 0) + 1;
      }
      if (log.selectedSpecialist) {
        stats.bySpecialist[log.selectedSpecialist] = (stats.bySpecialist[log.selectedSpecialist] || 0) + 1;
      }
    });
    return stats;
  }
}
export default AutomationEngine;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZWN1cml0eVZhbGlkYXRvciIsIkF1ZGl0TG9nZ2VyIiwiR2l0SHViQXV0b21hdGlvbiIsIlNwZWNpYWxpc3RTZWxlY3RvciIsIkF1dG9tYXRpb25FbmdpbmUiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsIm1heFJldHJpZXMiLCJ0aW1lb3V0IiwiYWlNb2RlbCIsInRlbXBlcmF0dXJlIiwidmFsaWRhdG9yIiwiYXVkaXRMb2dnZXIiLCJzcGVjaWFsaXN0U2VsZWN0b3IiLCJnaXRIdWIiLCJpbml0aWFsaXplR2l0SHViIiwidG9rZW4iLCJlcnJvciIsImNvbnNvbGUiLCJleGVjdXRlQXV0b21hdGlvbiIsInJlcXVlc3QiLCJhdXRvbWF0aW9uSWQiLCJsb2dBdXRvbWF0aW9uUmVxdWVzdCIsInVzZXJJZCIsInVzZXJuYW1lIiwiY29tbWFuZCIsIm1vZGUiLCJzZWxlY3RlZFNwZWNpYWxpc3QiLCJkZXNjcmlwdGlvbiIsImlwQWRkcmVzcyIsInVzZXJBZ2VudCIsInNlc3Npb25JZCIsInJlc3VsdCIsInN0YXR1cyIsInN0ZXBzIiwiZXJyb3JzIiwibG9nIiwiYW5hbHlzaXMiLCJhbmFseXplQ29tbWFuZCIsInB1c2giLCJwaGFzZSIsImRldGFpbHMiLCJzcGVjaWFsaXN0Iiwic2VsZWN0U3BlY2lhbGlzdCIsInRhc2tUeXBlIiwia2V5d29yZHMiLCJjb2RlR2VuZXJhdGlvbiIsImdlbmVyYXRlQ29kZSIsInJlcG9zaXRvcnlJbmZvIiwiZmlsZXNHZW5lcmF0ZWQiLCJmaWxlcyIsImxlbmd0aCIsImxpbmVzT2ZDb2RlIiwidG90YWxMaW5lcyIsInNlY3VyaXR5VmFsaWRhdGlvbiIsInZhbGlkYXRlQ29kZSIsImlzVmFsaWQiLCJtZXNzYWdlIiwibG9nU2VjdXJpdHlWYWxpZGF0aW9uIiwiZmlsZXNDaGVja2VkIiwic2V2ZXJpdHkiLCJ3YXJuaW5ncyIsImNvbW1pdFJlc3VsdCIsImNvbW1pdEFuZFB1c2giLCJjb21taXRNZXNzYWdlIiwiY29tbWl0SGFzaCIsImNvbW1pdCIsInNoYSIsImZpbGVzQ2hhbmdlZCIsInByUmVzdWx0IiwiY3JlYXRlUFIiLCJjcmVhdGVQdWxsUmVxdWVzdCIsInByTnVtYmVyIiwicHIiLCJudW1iZXIiLCJwclVybCIsInVybCIsIm91dHB1dCIsImxvZ0F1dG9tYXRpb25Db21wbGV0aW9uIiwidG90YWxEdXJhdGlvbiIsImZpbGVzQ3JlYXRlZCIsImxpbmVzQWRkZWQiLCJjcmVkaXRzVXNlZCIsInN0YWNrIiwibG9nRXJyb3IiLCJlcnJvclR5cGUiLCJuYW1lIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JTdGFjayIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJpbmNsdWRlcyIsInN1YnN0cmluZyIsInBhdGgiLCJEYXRlIiwibm93IiwiY29udGVudCIsInJlZHVjZSIsInN1bSIsImYiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVGaWxlcyIsImZsYXRNYXAiLCJkIiwiRXJyb3IiLCJvd25lciIsInJlcG8iLCJicmFuY2giLCJlbWFpbCIsImJyYW5jaE5hbWUiLCJnZXRBdXRvbWF0aW9uSGlzdG9yeSIsImxpbWl0Iiwic2VhcmNoTG9ncyIsInR5cGUiLCJzbGljZSIsImdldEF1dG9tYXRpb25TdGF0cyIsImxvZ3MiLCJzdGF0cyIsInRvdGFsQXV0b21hdGlvbnMiLCJzdWNjZXNzZnVsQXV0b21hdGlvbnMiLCJmaWx0ZXIiLCJsIiwiZmFpbGVkQXV0b21hdGlvbnMiLCJibG9ja2VkQXV0b21hdGlvbnMiLCJieU1vZGUiLCJieVNwZWNpYWxpc3QiLCJmb3JFYWNoIl0sInNvdXJjZXMiOlsiQXV0b21hdGlvbkVuZ2luZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFVVE9NQVRJT04gRU5HSU5FXG4gKiBNb3RvciBjZW50cmFsIGRlIGF1dG9tYcOnw6NvIHF1ZSBvcnF1ZXN0cmEgdG9kbyBvIHByb2Nlc3NvXG4gKiBDb29yZGVuYTogQW7DoWxpc2Ug4oaSIFNlbGXDp8OjbyBkZSBFc3BlY2lhbGlzdGEg4oaSIEdlcmHDp8OjbyBkZSBDw7NkaWdvIOKGkiBWYWxpZGHDp8OjbyDihpIgQ29tbWl0XG4gKi9cblxuaW1wb3J0IFNlY3VyaXR5VmFsaWRhdG9yIGZyb20gXCIuL1NlY3VyaXR5VmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQXVkaXRMb2dnZXIgZnJvbSBcIi4vQXVkaXRMb2dnZXIuanNcIjtcbmltcG9ydCBHaXRIdWJBdXRvbWF0aW9uIGZyb20gXCIuL0dpdEh1YkF1dG9tYXRpb24uanNcIjtcbmltcG9ydCBTcGVjaWFsaXN0U2VsZWN0b3IgZnJvbSBcIi4vU3BlY2lhbGlzdFNlbGVjdG9yLmpzXCI7XG5cbmNsYXNzIEF1dG9tYXRpb25FbmdpbmUge1xuICBjb25zdHJ1Y3Rvcihjb25maWcgPSB7fSkge1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgbWF4UmV0cmllczogY29uZmlnLm1heFJldHJpZXMgfHwgMyxcbiAgICAgIHRpbWVvdXQ6IGNvbmZpZy50aW1lb3V0IHx8IDMwMDAwLFxuICAgICAgYWlNb2RlbDogY29uZmlnLmFpTW9kZWwgfHwgXCJnZW1pbmktMi4wLWZsYXNoXCIsXG4gICAgICB0ZW1wZXJhdHVyZTogY29uZmlnLnRlbXBlcmF0dXJlIHx8IDAuNyxcbiAgICAgIC4uLmNvbmZpZyxcbiAgICB9O1xuXG4gICAgdGhpcy52YWxpZGF0b3IgPSBuZXcgU2VjdXJpdHlWYWxpZGF0b3IoKTtcbiAgICB0aGlzLmF1ZGl0TG9nZ2VyID0gbmV3IEF1ZGl0TG9nZ2VyKCk7XG4gICAgdGhpcy5zcGVjaWFsaXN0U2VsZWN0b3IgPSBuZXcgU3BlY2lhbGlzdFNlbGVjdG9yKCk7XG5cbiAgICAvLyBHaXRIdWIgc2Vyw6EgaW5pY2lhbGl6YWRvIHF1YW5kbyBuZWNlc3PDoXJpb1xuICAgIHRoaXMuZ2l0SHViID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbmljaWFsaXphciBHaXRIdWIgQXV0b21hdGlvblxuICAgKi9cbiAgaW5pdGlhbGl6ZUdpdEh1Yih0b2tlbikge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmdpdEh1YiA9IG5ldyBHaXRIdWJBdXRvbWF0aW9uKHRva2VuKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBpbmljaWFsaXphciBHaXRIdWI6XCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0YXIgYXV0b21hw6fDo28gY29tcGxldGFcbiAgICovXG4gIGFzeW5jIGV4ZWN1dGVBdXRvbWF0aW9uKHJlcXVlc3QpIHtcbiAgICBjb25zdCBhdXRvbWF0aW9uSWQgPSB0aGlzLmF1ZGl0TG9nZ2VyLmxvZ0F1dG9tYXRpb25SZXF1ZXN0KHtcbiAgICAgIHVzZXJJZDogcmVxdWVzdC51c2VySWQsXG4gICAgICB1c2VybmFtZTogcmVxdWVzdC51c2VybmFtZSxcbiAgICAgIGNvbW1hbmQ6IHJlcXVlc3QuY29tbWFuZCxcbiAgICAgIG1vZGU6IHJlcXVlc3QubW9kZSB8fCBcIk9QVElNSVpFRFwiLFxuICAgICAgc2VsZWN0ZWRTcGVjaWFsaXN0OiByZXF1ZXN0LnNlbGVjdGVkU3BlY2lhbGlzdCxcbiAgICAgIGRlc2NyaXB0aW9uOiByZXF1ZXN0LmRlc2NyaXB0aW9uLFxuICAgICAgaXBBZGRyZXNzOiByZXF1ZXN0LmlwQWRkcmVzcyxcbiAgICAgIHVzZXJBZ2VudDogcmVxdWVzdC51c2VyQWdlbnQsXG4gICAgICBzZXNzaW9uSWQ6IHJlcXVlc3Quc2Vzc2lvbklkLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgYXV0b21hdGlvbklkLFxuICAgICAgc3RhdHVzOiBcIklOSVRJQVRFRFwiLFxuICAgICAgc3RlcHM6IFtdLFxuICAgICAgZXJyb3JzOiBbXSxcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEZhc2UgMTogQW7DoWxpc2UgZG8gY29tYW5kb1xuICAgICAgY29uc29sZS5sb2coYFxcbvCfk4sgRkFTRSAxOiBBbsOhbGlzZSBkbyBjb21hbmRvYCk7XG4gICAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IHRoaXMuYW5hbHl6ZUNvbW1hbmQocmVxdWVzdC5jb21tYW5kKTtcbiAgICAgIHJlc3VsdC5zdGVwcy5wdXNoKHtcbiAgICAgICAgcGhhc2U6IFwiQU5BTFlTSVNcIixcbiAgICAgICAgc3RhdHVzOiBcIkNPTVBMRVRFRFwiLFxuICAgICAgICBkZXRhaWxzOiBhbmFseXNpcyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGYXNlIDI6IFNlbGXDp8OjbyBkZSBlc3BlY2lhbGlzdGFcbiAgICAgIGNvbnNvbGUubG9nKGBcXG7wn46vIEZBU0UgMjogU2VsZcOnw6NvIGRlIGVzcGVjaWFsaXN0YWApO1xuICAgICAgbGV0IHNwZWNpYWxpc3Q7XG5cbiAgICAgIGlmIChyZXF1ZXN0Lm1vZGUgPT09IFwiSFlCUklEXCIgJiYgcmVxdWVzdC5zZWxlY3RlZFNwZWNpYWxpc3QpIHtcbiAgICAgICAgc3BlY2lhbGlzdCA9IHJlcXVlc3Quc2VsZWN0ZWRTcGVjaWFsaXN0O1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEVzcGVjaWFsaXN0YSBzZWxlY2lvbmFkbyBtYW51YWxtZW50ZTogJHtzcGVjaWFsaXN0fWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3BlY2lhbGlzdCA9IGF3YWl0IHRoaXMuc3BlY2lhbGlzdFNlbGVjdG9yLnNlbGVjdFNwZWNpYWxpc3QoXG4gICAgICAgICAgYW5hbHlzaXMudGFza1R5cGUsXG4gICAgICAgICAgYW5hbHlzaXMua2V5d29yZHNcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2coYOKchSBFc3BlY2lhbGlzdGEgc2VsZWNpb25hZG8gYXV0b21hdGljYW1lbnRlOiAke3NwZWNpYWxpc3R9YCk7XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdC5zdGVwcy5wdXNoKHtcbiAgICAgICAgcGhhc2U6IFwiU1BFQ0lBTElTVF9TRUxFQ1RJT05cIixcbiAgICAgICAgc3RhdHVzOiBcIkNPTVBMRVRFRFwiLFxuICAgICAgICBzcGVjaWFsaXN0LFxuICAgICAgICBtb2RlOiByZXF1ZXN0Lm1vZGUsXG4gICAgICB9KTtcblxuICAgICAgLy8gRmFzZSAzOiBHZXJhw6fDo28gZGUgY8OzZGlnb1xuICAgICAgY29uc29sZS5sb2coYFxcbvCfkrsgRkFTRSAzOiBHZXJhw6fDo28gZGUgY8OzZGlnb2ApO1xuICAgICAgY29uc3QgY29kZUdlbmVyYXRpb24gPSBhd2FpdCB0aGlzLmdlbmVyYXRlQ29kZShhbmFseXNpcywgc3BlY2lhbGlzdCwgcmVxdWVzdC5yZXBvc2l0b3J5SW5mbyk7XG5cbiAgICAgIHJlc3VsdC5zdGVwcy5wdXNoKHtcbiAgICAgICAgcGhhc2U6IFwiQ09ERV9HRU5FUkFUSU9OXCIsXG4gICAgICAgIHN0YXR1czogXCJDT01QTEVURURcIixcbiAgICAgICAgZmlsZXNHZW5lcmF0ZWQ6IGNvZGVHZW5lcmF0aW9uLmZpbGVzLmxlbmd0aCxcbiAgICAgICAgbGluZXNPZkNvZGU6IGNvZGVHZW5lcmF0aW9uLnRvdGFsTGluZXMsXG4gICAgICB9KTtcblxuICAgICAgLy8gRmFzZSA0OiBWYWxpZGHDp8OjbyBkZSBzZWd1cmFuw6dhXG4gICAgICBjb25zb2xlLmxvZyhgXFxu8J+UkCBGQVNFIDQ6IFZhbGlkYcOnw6NvIGRlIHNlZ3VyYW7Dp2FgKTtcbiAgICAgIGNvbnN0IHNlY3VyaXR5VmFsaWRhdGlvbiA9IGF3YWl0IHRoaXMudmFsaWRhdGVDb2RlKGNvZGVHZW5lcmF0aW9uLmZpbGVzKTtcblxuICAgICAgaWYgKCFzZWN1cml0eVZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgICByZXN1bHQuc3RhdHVzID0gXCJCTE9DS0VEXCI7XG4gICAgICAgIHJlc3VsdC5lcnJvcnMucHVzaCh7XG4gICAgICAgICAgcGhhc2U6IFwiU0VDVVJJVFlfVkFMSURBVElPTlwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiQ8OzZGlnbyBibG9xdWVhZG8gcG9yIHZhbGlkYcOnw6NvIGRlIHNlZ3VyYW7Dp2FcIixcbiAgICAgICAgICBkZXRhaWxzOiBzZWN1cml0eVZhbGlkYXRpb24sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYXVkaXRMb2dnZXIubG9nU2VjdXJpdHlWYWxpZGF0aW9uKHtcbiAgICAgICAgICBhdXRvbWF0aW9uSWQsXG4gICAgICAgICAgZmlsZXNDaGVja2VkOiBjb2RlR2VuZXJhdGlvbi5maWxlcy5sZW5ndGgsXG4gICAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgICAgc2V2ZXJpdHk6IHNlY3VyaXR5VmFsaWRhdGlvbi5zZXZlcml0eSxcbiAgICAgICAgICBlcnJvcnM6IHNlY3VyaXR5VmFsaWRhdGlvbi5lcnJvcnMsXG4gICAgICAgICAgd2FybmluZ3M6IHNlY3VyaXR5VmFsaWRhdGlvbi53YXJuaW5ncyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0LnN0ZXBzLnB1c2goe1xuICAgICAgICBwaGFzZTogXCJTRUNVUklUWV9WQUxJREFUSU9OXCIsXG4gICAgICAgIHN0YXR1czogXCJDT01QTEVURURcIixcbiAgICAgICAgd2FybmluZ3M6IHNlY3VyaXR5VmFsaWRhdGlvbi53YXJuaW5ncy5sZW5ndGgsXG4gICAgICB9KTtcblxuICAgICAgLy8gRmFzZSA1OiBDb21taXQgKyBQdXNoXG4gICAgICBjb25zb2xlLmxvZyhgXFxu8J+TnSBGQVNFIDU6IENvbW1pdCArIFB1c2hgKTtcbiAgICAgIGxldCBjb21taXRSZXN1bHQgPSBudWxsO1xuXG4gICAgICBpZiAocmVxdWVzdC5yZXBvc2l0b3J5SW5mbyAmJiB0aGlzLmdpdEh1Yikge1xuICAgICAgICBjb21taXRSZXN1bHQgPSBhd2FpdCB0aGlzLmNvbW1pdEFuZFB1c2goXG4gICAgICAgICAgY29kZUdlbmVyYXRpb24uZmlsZXMsXG4gICAgICAgICAgYW5hbHlzaXMuY29tbWl0TWVzc2FnZSxcbiAgICAgICAgICByZXF1ZXN0LnJlcG9zaXRvcnlJbmZvLFxuICAgICAgICAgIHNwZWNpYWxpc3RcbiAgICAgICAgKTtcblxuICAgICAgICByZXN1bHQuc3RlcHMucHVzaCh7XG4gICAgICAgICAgcGhhc2U6IFwiR0lUX0NPTU1JVFwiLFxuICAgICAgICAgIHN0YXR1czogXCJDT01QTEVURURcIixcbiAgICAgICAgICBjb21taXRIYXNoOiBjb21taXRSZXN1bHQuY29tbWl0LnNoYSxcbiAgICAgICAgICBmaWxlc0NoYW5nZWQ6IGNvbW1pdFJlc3VsdC5maWxlc0NoYW5nZWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBGYXNlIDY6IENyaWFyIFBSIChvcGNpb25hbClcbiAgICAgIGNvbnNvbGUubG9nKGBcXG7wn5SAIEZBU0UgNjogQ3JpYXIgUHVsbCBSZXF1ZXN0IChvcGNpb25hbClgKTtcbiAgICAgIGxldCBwclJlc3VsdCA9IG51bGw7XG5cbiAgICAgIGlmIChyZXF1ZXN0LmNyZWF0ZVBSICYmIHRoaXMuZ2l0SHViICYmIGNvbW1pdFJlc3VsdCkge1xuICAgICAgICBwclJlc3VsdCA9IGF3YWl0IHRoaXMuY3JlYXRlUHVsbFJlcXVlc3QoYW5hbHlzaXMsIHNwZWNpYWxpc3QsIHJlcXVlc3QucmVwb3NpdG9yeUluZm8pO1xuXG4gICAgICAgIHJlc3VsdC5zdGVwcy5wdXNoKHtcbiAgICAgICAgICBwaGFzZTogXCJDUkVBVEVfUFJcIixcbiAgICAgICAgICBzdGF0dXM6IFwiQ09NUExFVEVEXCIsXG4gICAgICAgICAgcHJOdW1iZXI6IHByUmVzdWx0LnByLm51bWJlcixcbiAgICAgICAgICBwclVybDogcHJSZXN1bHQucHIudXJsLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gU3VjZXNzbyFcbiAgICAgIHJlc3VsdC5zdGF0dXMgPSBcIlNVQ0NFU1NcIjtcbiAgICAgIHJlc3VsdC5vdXRwdXQgPSB7XG4gICAgICAgIGZpbGVzOiBjb2RlR2VuZXJhdGlvbi5maWxlcyxcbiAgICAgICAgY29tbWl0OiBjb21taXRSZXN1bHQ/LmNvbW1pdCxcbiAgICAgICAgcHI6IHByUmVzdWx0Py5wcixcbiAgICAgIH07XG5cbiAgICAgIC8vIExvZyBkZSBjb25jbHVzw6NvXG4gICAgICB0aGlzLmF1ZGl0TG9nZ2VyLmxvZ0F1dG9tYXRpb25Db21wbGV0aW9uKHtcbiAgICAgICAgYXV0b21hdGlvbklkLFxuICAgICAgICB1c2VySWQ6IHJlcXVlc3QudXNlcklkLFxuICAgICAgICBzdGF0dXM6IFwiU1VDQ0VTU1wiLFxuICAgICAgICB0b3RhbER1cmF0aW9uOiByZXN1bHQudG90YWxEdXJhdGlvbixcbiAgICAgICAgY29tbWl0SGFzaDogY29tbWl0UmVzdWx0Py5jb21taXQuc2hhLFxuICAgICAgICBwclVybDogcHJSZXN1bHQ/LnByLnVybCxcbiAgICAgICAgZmlsZXNDcmVhdGVkOiBjb2RlR2VuZXJhdGlvbi5maWxlcy5sZW5ndGgsXG4gICAgICAgIGxpbmVzQWRkZWQ6IGNvZGVHZW5lcmF0aW9uLnRvdGFsTGluZXMsXG4gICAgICAgIHNwZWNpYWxpc3QsXG4gICAgICAgIG1vZGU6IHJlcXVlc3QubW9kZSxcbiAgICAgICAgY3JlZGl0c1VzZWQ6IHJlcXVlc3QuY3JlZGl0c1VzZWQsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIEVycm8gbmEgYXV0b21hw6fDo286ICR7ZXJyb3IubWVzc2FnZX1gKTtcblxuICAgICAgcmVzdWx0LnN0YXR1cyA9IFwiRkFJTEVEXCI7XG4gICAgICByZXN1bHQuZXJyb3JzLnB1c2goe1xuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gICAgICB9KTtcblxuICAgICAgLy8gTG9nIGRlIGVycm9cbiAgICAgIHRoaXMuYXVkaXRMb2dnZXIubG9nRXJyb3Ioe1xuICAgICAgICBhdXRvbWF0aW9uSWQsXG4gICAgICAgIHVzZXJJZDogcmVxdWVzdC51c2VySWQsXG4gICAgICAgIGVycm9yVHlwZTogZXJyb3IuY29uc3RydWN0b3IubmFtZSxcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBlcnJvclN0YWNrOiBlcnJvci5zdGFjayxcbiAgICAgICAgcGhhc2U6IHJlc3VsdC5zdGVwc1tyZXN1bHQuc3RlcHMubGVuZ3RoIC0gMV0/LnBoYXNlIHx8IFwiVU5LTk9XTlwiLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFuYWxpc2FyIGNvbWFuZG8gZG8gdXN1w6FyaW9cbiAgICovXG4gIGFzeW5jIGFuYWx5emVDb21tYW5kKGNvbW1hbmQpIHtcbiAgICAvLyBBcXVpIHNlcmlhIGNoYW1hZGEgdW1hIElBIHBhcmEgYW5hbGlzYXIgbyBjb21hbmRvXG4gICAgLy8gUG9yIGVucXVhbnRvLCBhbsOhbGlzZSBzaW1wbGVzXG5cbiAgICBjb25zdCBrZXl3b3JkcyA9IGNvbW1hbmQudG9Mb3dlckNhc2UoKS5zcGxpdChcIiBcIik7XG5cbiAgICBsZXQgdGFza1R5cGUgPSBcIkdFTkVSQUxcIjtcbiAgICBpZiAoY29tbWFuZC5pbmNsdWRlcyhcImNvbXBvbmVudGVcIikgfHwgY29tbWFuZC5pbmNsdWRlcyhcImNvbXBvbmVudFwiKSkgdGFza1R5cGUgPSBcIkNPTVBPTkVOVFwiO1xuICAgIGlmIChjb21tYW5kLmluY2x1ZGVzKFwiZnVuw6fDo29cIikgfHwgY29tbWFuZC5pbmNsdWRlcyhcImZ1bmN0aW9uXCIpKSB0YXNrVHlwZSA9IFwiRlVOQ1RJT05cIjtcbiAgICBpZiAoY29tbWFuZC5pbmNsdWRlcyhcInRlc3RlXCIpIHx8IGNvbW1hbmQuaW5jbHVkZXMoXCJ0ZXN0XCIpKSB0YXNrVHlwZSA9IFwiVEVTVFwiO1xuICAgIGlmIChjb21tYW5kLmluY2x1ZGVzKFwiZXN0aWxvXCIpIHx8IGNvbW1hbmQuaW5jbHVkZXMoXCJzdHlsZVwiKSkgdGFza1R5cGUgPSBcIlNUWUxFXCI7XG4gICAgaWYgKGNvbW1hbmQuaW5jbHVkZXMoXCJkb2N1bWVudGHDp8Ojb1wiKSB8fCBjb21tYW5kLmluY2x1ZGVzKFwiZG9jdW1lbnRhdGlvblwiKSlcbiAgICAgIHRhc2tUeXBlID0gXCJET0NVTUVOVEFUSU9OXCI7XG4gICAgaWYgKGNvbW1hbmQuaW5jbHVkZXMoXCJyZWZhdG9yYXJcIikgfHwgY29tbWFuZC5pbmNsdWRlcyhcInJlZmFjdG9yXCIpKSB0YXNrVHlwZSA9IFwiUkVGQUNUT1JcIjtcblxuICAgIHJldHVybiB7XG4gICAgICBjb21tYW5kLFxuICAgICAgdGFza1R5cGUsXG4gICAgICBrZXl3b3JkcyxcbiAgICAgIGNvbW1pdE1lc3NhZ2U6IGBmZWF0OiAke2NvbW1hbmQuc3Vic3RyaW5nKDAsIDUwKX1gLFxuICAgICAgZGVzY3JpcHRpb246IGNvbW1hbmQsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXJhciBjw7NkaWdvIHZpYSBJQVxuICAgKi9cbiAgYXN5bmMgZ2VuZXJhdGVDb2RlKGFuYWx5c2lzLCBzcGVjaWFsaXN0LCByZXBvc2l0b3J5SW5mbykge1xuICAgIC8vIEFxdWkgc2VyaWEgY2hhbWFkYSBhIElBIChHZW1pbmksIEdST1EsIGV0YylcbiAgICAvLyBQb3IgZW5xdWFudG8sIHNpbXVsYcOnw6NvXG5cbiAgICBjb25zb2xlLmxvZyhg8J+kliBHZXJhbmRvIGPDs2RpZ28gY29tICR7c3BlY2lhbGlzdH0uLi5gKTtcblxuICAgIC8vIFNpbXVsYXIgZ2VyYcOnw6NvIGRlIGPDs2RpZ29cbiAgICBjb25zdCBmaWxlcyA9IFtcbiAgICAgIHtcbiAgICAgICAgcGF0aDogYHNyYy9nZW5lcmF0ZWRfJHtEYXRlLm5vdygpfS5qc2AsXG4gICAgICAgIGNvbnRlbnQ6IGAvLyBHZXJhZG8gYXV0b21hdGljYW1lbnRlIHBvciAke3NwZWNpYWxpc3R9XFxuLy8gVGFyZWZhOiAke2FuYWx5c2lzLmRlc2NyaXB0aW9ufVxcblxcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdlbmVyYXRlZCgpIHtcXG4gIC8vIEPDs2RpZ28gZ2VyYWRvIGFxdWlcXG59XFxuYCxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIHJldHVybiB7XG4gICAgICBmaWxlcyxcbiAgICAgIHRvdGFsTGluZXM6IGZpbGVzLnJlZHVjZSgoc3VtLCBmKSA9PiBzdW0gKyBmLmNvbnRlbnQuc3BsaXQoXCJcXG5cIikubGVuZ3RoLCAwKSxcbiAgICAgIHNwZWNpYWxpc3QsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGFyIGPDs2RpZ29cbiAgICovXG4gIGFzeW5jIHZhbGlkYXRlQ29kZShmaWxlcykge1xuICAgIGNvbnNvbGUubG9nKGDwn5SNIFZhbGlkYW5kbyAke2ZpbGVzLmxlbmd0aH0gYXJxdWl2b3MuLi5gKTtcblxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRvci52YWxpZGF0ZUZpbGVzKGZpbGVzKTtcblxuICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgICBjb25zb2xlLmxvZyhg4p2MIFZhbGlkYcOnw6NvIGZhbGhvdSFgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICBzZXZlcml0eTogXCJjcml0aWNhbFwiLFxuICAgICAgICBlcnJvcnM6IHZhbGlkYXRpb24uZGV0YWlscy5mbGF0TWFwKChkKSA9PiBkLmVycm9ycyksXG4gICAgICAgIHdhcm5pbmdzOiB2YWxpZGF0aW9uLmRldGFpbHMuZmxhdE1hcCgoZCkgPT4gZC53YXJuaW5ncyksXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDinIUgQ8OzZGlnbyB2YWxpZGFkbyBjb20gc3VjZXNzbyFgKTtcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgIHNldmVyaXR5OiBcIm5vbmVcIixcbiAgICAgIGVycm9yczogW10sXG4gICAgICB3YXJuaW5nczogdmFsaWRhdGlvbi5kZXRhaWxzLmZsYXRNYXAoKGQpID0+IGQud2FybmluZ3MpLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRmF6ZXIgY29tbWl0ICsgcHVzaFxuICAgKi9cbiAgYXN5bmMgY29tbWl0QW5kUHVzaChmaWxlcywgbWVzc2FnZSwgcmVwb3NpdG9yeUluZm8sIHNwZWNpYWxpc3QpIHtcbiAgICBjb25zb2xlLmxvZyhg8J+TnSBGYXplbmRvIGNvbW1pdCArIHB1c2guLi5gKTtcblxuICAgIGlmICghdGhpcy5naXRIdWIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkdpdEh1YiBuw6NvIGluaWNpYWxpemFkb1wiKTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdpdEh1Yi5jb21taXRBbmRQdXNoKFxuICAgICAgcmVwb3NpdG9yeUluZm8ub3duZXIsXG4gICAgICByZXBvc2l0b3J5SW5mby5yZXBvLFxuICAgICAgZmlsZXMsXG4gICAgICBtZXNzYWdlLFxuICAgICAgcmVwb3NpdG9yeUluZm8uYnJhbmNoIHx8IFwibWFpblwiLFxuICAgICAge1xuICAgICAgICBuYW1lOiBgJHtzcGVjaWFsaXN0fSBCb3RgLFxuICAgICAgICBlbWFpbDogYCR7c3BlY2lhbGlzdC50b0xvd2VyQ2FzZSgpfUBya21tYXguY29tYCxcbiAgICAgIH1cbiAgICApO1xuXG4gICAgY29uc29sZS5sb2coYOKchSBDb21taXQgcmVhbGl6YWRvOiAke3Jlc3VsdC5jb21taXQuc2hhLnN1YnN0cmluZygwLCA3KX1gKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQ3JpYXIgUHVsbCBSZXF1ZXN0XG4gICAqL1xuICBhc3luYyBjcmVhdGVQdWxsUmVxdWVzdChhbmFseXNpcywgc3BlY2lhbGlzdCwgcmVwb3NpdG9yeUluZm8pIHtcbiAgICBjb25zb2xlLmxvZyhg8J+UgCBDcmlhbmRvIFB1bGwgUmVxdWVzdC4uLmApO1xuXG4gICAgaWYgKCF0aGlzLmdpdEh1Yikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2l0SHViIG7Do28gaW5pY2lhbGl6YWRvXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGJyYW5jaE5hbWUgPSBgYXV0b21hdGlvbi8ke3NwZWNpYWxpc3QudG9Mb3dlckNhc2UoKX0vJHtEYXRlLm5vdygpfWA7XG5cbiAgICBjb25zdCBwciA9IGF3YWl0IHRoaXMuZ2l0SHViLmNyZWF0ZVB1bGxSZXF1ZXN0KFxuICAgICAgcmVwb3NpdG9yeUluZm8ub3duZXIsXG4gICAgICByZXBvc2l0b3J5SW5mby5yZXBvLFxuICAgICAgYFske3NwZWNpYWxpc3R9XSAke2FuYWx5c2lzLmNvbW1pdE1lc3NhZ2V9YCxcbiAgICAgIGBBdXRvbWHDp8OjbyBleGVjdXRhZGEgcG9yICR7c3BlY2lhbGlzdH1cXG5cXG5UYXJlZmE6ICR7YW5hbHlzaXMuZGVzY3JpcHRpb259YCxcbiAgICAgIGJyYW5jaE5hbWUsXG4gICAgICByZXBvc2l0b3J5SW5mby5icmFuY2ggfHwgXCJtYWluXCJcbiAgICApO1xuXG4gICAgY29uc29sZS5sb2coYOKchSBQUiBjcmlhZG86ICR7cHIudXJsfWApO1xuXG4gICAgcmV0dXJuIHsgcHIgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnRlciBoaXN0w7NyaWNvIGRlIGF1dG9tYcOnw7Vlc1xuICAgKi9cbiAgZ2V0QXV0b21hdGlvbkhpc3RvcnkodXNlcklkLCBsaW1pdCA9IDUwKSB7XG4gICAgcmV0dXJuIHRoaXMuYXVkaXRMb2dnZXJcbiAgICAgIC5zZWFyY2hMb2dzKHtcbiAgICAgICAgdHlwZTogXCJBVVRPTUFUSU9OX1JFUVVFU1RcIixcbiAgICAgICAgdXNlcklkLFxuICAgICAgfSlcbiAgICAgIC5zbGljZSgtbGltaXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idGVyIGVzdGF0w61zdGljYXMgZGUgYXV0b21hw6fDo29cbiAgICovXG4gIGdldEF1dG9tYXRpb25TdGF0cyh1c2VySWQpIHtcbiAgICBjb25zdCBsb2dzID0gdGhpcy5hdWRpdExvZ2dlci5zZWFyY2hMb2dzKHsgdXNlcklkIH0pO1xuXG4gICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICB0b3RhbEF1dG9tYXRpb25zOiBsb2dzLmxlbmd0aCxcbiAgICAgIHN1Y2Nlc3NmdWxBdXRvbWF0aW9uczogbG9ncy5maWx0ZXIoKGwpID0+IGwuc3RhdHVzID09PSBcIlNVQ0NFU1NcIikubGVuZ3RoLFxuICAgICAgZmFpbGVkQXV0b21hdGlvbnM6IGxvZ3MuZmlsdGVyKChsKSA9PiBsLnN0YXR1cyA9PT0gXCJGQUlMRURcIikubGVuZ3RoLFxuICAgICAgYmxvY2tlZEF1dG9tYXRpb25zOiBsb2dzLmZpbHRlcigobCkgPT4gbC5zdGF0dXMgPT09IFwiQkxPQ0tFRFwiKS5sZW5ndGgsXG4gICAgICBieU1vZGU6IHt9LFxuICAgICAgYnlTcGVjaWFsaXN0OiB7fSxcbiAgICB9O1xuXG4gICAgbG9ncy5mb3JFYWNoKChsb2cpID0+IHtcbiAgICAgIGlmIChsb2cubW9kZSkge1xuICAgICAgICBzdGF0cy5ieU1vZGVbbG9nLm1vZGVdID0gKHN0YXRzLmJ5TW9kZVtsb2cubW9kZV0gfHwgMCkgKyAxO1xuICAgICAgfVxuICAgICAgaWYgKGxvZy5zZWxlY3RlZFNwZWNpYWxpc3QpIHtcbiAgICAgICAgc3RhdHMuYnlTcGVjaWFsaXN0W2xvZy5zZWxlY3RlZFNwZWNpYWxpc3RdID1cbiAgICAgICAgICAoc3RhdHMuYnlTcGVjaWFsaXN0W2xvZy5zZWxlY3RlZFNwZWNpYWxpc3RdIHx8IDApICsgMTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBzdGF0cztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBdXRvbWF0aW9uRW5naW5lO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGlCQUFpQixNQUFNLHdCQUF3QjtBQUN0RCxPQUFPQyxXQUFXLE1BQU0sa0JBQWtCO0FBQzFDLE9BQU9DLGdCQUFnQixNQUFNLHVCQUF1QjtBQUNwRCxPQUFPQyxrQkFBa0IsTUFBTSx5QkFB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