{"version":3,"names":["SecurityValidator","AuditLogger","GitHubAutomation","SpecialistSelector","AutomationEngine","constructor","config","maxRetries","timeout","aiModel","temperature","validator","auditLogger","specialistSelector","gitHub","initializeGitHub","token","error","console","executeAutomation","request","automationId","logAutomationRequest","userId","username","command","mode","selectedSpecialist","description","ipAddress","userAgent","sessionId","result","status","steps","errors","log","analysis","analyzeCommand","push","phase","details","specialist","selectSpecialist","taskType","keywords","codeGeneration","generateCode","repositoryInfo","filesGenerated","files","length","linesOfCode","totalLines","securityValidation","validateCode","isValid","message","logSecurityValidation","filesChecked","severity","warnings","commitResult","commitAndPush","commitMessage","commitHash","commit","sha","filesChanged","prResult","createPR","createPullRequest","prNumber","pr","number","prUrl","url","output","logAutomationCompletion","totalDuration","filesCreated","linesAdded","creditsUsed","stack","logError","errorType","name","errorMessage","errorStack","toLowerCase","split","includes","substring","path","Date","now","content","reduce","sum","f","validation","validateFiles","flatMap","d","Error","owner","repo","branch","email","branchName","getAutomationHistory","limit","searchLogs","type","slice","getAutomationStats","logs","stats","totalAutomations","successfulAutomations","filter","l","failedAutomations","blockedAutomations","byMode","bySpecialist","forEach"],"sources":["AutomationEngine.js"],"sourcesContent":["/**\n * AUTOMATION ENGINE\n * Motor central de automaÃ§Ã£o que orquestra todo o processo\n * Coordena: AnÃ¡lise â†’ SeleÃ§Ã£o de Especialista â†’ GeraÃ§Ã£o de CÃ³digo â†’ ValidaÃ§Ã£o â†’ Commit\n */\n\nimport SecurityValidator from \"./SecurityValidator.js\";\nimport AuditLogger from \"./AuditLogger.js\";\nimport GitHubAutomation from \"./GitHubAutomation.js\";\nimport SpecialistSelector from \"./SpecialistSelector.js\";\n\nclass AutomationEngine {\n  constructor(config = {}) {\n    this.config = {\n      maxRetries: config.maxRetries || 3,\n      timeout: config.timeout || 30000,\n      aiModel: config.aiModel || \"gemini-2.0-flash\",\n      temperature: config.temperature || 0.7,\n      ...config,\n    };\n\n    this.validator = new SecurityValidator();\n    this.auditLogger = new AuditLogger();\n    this.specialistSelector = new SpecialistSelector();\n\n    // GitHub serÃ¡ inicializado quando necessÃ¡rio\n    this.gitHub = null;\n  }\n\n  /**\n   * Inicializar GitHub Automation\n   */\n  initializeGitHub(token) {\n    try {\n      this.gitHub = new GitHubAutomation(token);\n      return true;\n    } catch (error) {\n      console.error(\"Erro ao inicializar GitHub:\", error);\n      return false;\n    }\n  }\n\n  /**\n   * Executar automaÃ§Ã£o completa\n   */\n  async executeAutomation(request) {\n    const automationId = this.auditLogger.logAutomationRequest({\n      userId: request.userId,\n      username: request.username,\n      command: request.command,\n      mode: request.mode || \"OPTIMIZED\",\n      selectedSpecialist: request.selectedSpecialist,\n      description: request.description,\n      ipAddress: request.ipAddress,\n      userAgent: request.userAgent,\n      sessionId: request.sessionId,\n    });\n\n    const result = {\n      automationId,\n      status: \"INITIATED\",\n      steps: [],\n      errors: [],\n    };\n\n    try {\n      // Fase 1: AnÃ¡lise do comando\n      console.log(`\\nðŸ“‹ FASE 1: AnÃ¡lise do comando`);\n      const analysis = await this.analyzeCommand(request.command);\n      result.steps.push({\n        phase: \"ANALYSIS\",\n        status: \"COMPLETED\",\n        details: analysis,\n      });\n\n      // Fase 2: SeleÃ§Ã£o de especialista\n      console.log(`\\nðŸŽ¯ FASE 2: SeleÃ§Ã£o de especialista`);\n      let specialist;\n\n      if (request.mode === \"HYBRID\" && request.selectedSpecialist) {\n        specialist = request.selectedSpecialist;\n        console.log(`âœ… Especialista selecionado manualmente: ${specialist}`);\n      } else {\n        specialist = await this.specialistSelector.selectSpecialist(\n          analysis.taskType,\n          analysis.keywords\n        );\n        console.log(`âœ… Especialista selecionado automaticamente: ${specialist}`);\n      }\n\n      result.steps.push({\n        phase: \"SPECIALIST_SELECTION\",\n        status: \"COMPLETED\",\n        specialist,\n        mode: request.mode,\n      });\n\n      // Fase 3: GeraÃ§Ã£o de cÃ³digo\n      console.log(`\\nðŸ’» FASE 3: GeraÃ§Ã£o de cÃ³digo`);\n      const codeGeneration = await this.generateCode(analysis, specialist, request.repositoryInfo);\n\n      result.steps.push({\n        phase: \"CODE_GENERATION\",\n        status: \"COMPLETED\",\n        filesGenerated: codeGeneration.files.length,\n        linesOfCode: codeGeneration.totalLines,\n      });\n\n      // Fase 4: ValidaÃ§Ã£o de seguranÃ§a\n      console.log(`\\nðŸ” FASE 4: ValidaÃ§Ã£o de seguranÃ§a`);\n      const securityValidation = await this.validateCode(codeGeneration.files);\n\n      if (!securityValidation.isValid) {\n        result.status = \"BLOCKED\";\n        result.errors.push({\n          phase: \"SECURITY_VALIDATION\",\n          message: \"CÃ³digo bloqueado por validaÃ§Ã£o de seguranÃ§a\",\n          details: securityValidation,\n        });\n\n        this.auditLogger.logSecurityValidation({\n          automationId,\n          filesChecked: codeGeneration.files.length,\n          isValid: false,\n          severity: securityValidation.severity,\n          errors: securityValidation.errors,\n          warnings: securityValidation.warnings,\n        });\n\n        return result;\n      }\n\n      result.steps.push({\n        phase: \"SECURITY_VALIDATION\",\n        status: \"COMPLETED\",\n        warnings: securityValidation.warnings.length,\n      });\n\n      // Fase 5: Commit + Push\n      console.log(`\\nðŸ“ FASE 5: Commit + Push`);\n      let commitResult = null;\n\n      if (request.repositoryInfo && this.gitHub) {\n        commitResult = await this.commitAndPush(\n          codeGeneration.files,\n          analysis.commitMessage,\n          request.repositoryInfo,\n          specialist\n        );\n\n        result.steps.push({\n          phase: \"GIT_COMMIT\",\n          status: \"COMPLETED\",\n          commitHash: commitResult.commit.sha,\n          filesChanged: commitResult.filesChanged,\n        });\n      }\n\n      // Fase 6: Criar PR (opcional)\n      console.log(`\\nðŸ”€ FASE 6: Criar Pull Request (opcional)`);\n      let prResult = null;\n\n      if (request.createPR && this.gitHub && commitResult) {\n        prResult = await this.createPullRequest(analysis, specialist, request.repositoryInfo);\n\n        result.steps.push({\n          phase: \"CREATE_PR\",\n          status: \"COMPLETED\",\n          prNumber: prResult.pr.number,\n          prUrl: prResult.pr.url,\n        });\n      }\n\n      // Sucesso!\n      result.status = \"SUCCESS\";\n      result.output = {\n        files: codeGeneration.files,\n        commit: commitResult?.commit,\n        pr: prResult?.pr,\n      };\n\n      // Log de conclusÃ£o\n      this.auditLogger.logAutomationCompletion({\n        automationId,\n        userId: request.userId,\n        status: \"SUCCESS\",\n        totalDuration: result.totalDuration,\n        commitHash: commitResult?.commit.sha,\n        prUrl: prResult?.pr.url,\n        filesCreated: codeGeneration.files.length,\n        linesAdded: codeGeneration.totalLines,\n        specialist,\n        mode: request.mode,\n        creditsUsed: request.creditsUsed,\n      });\n\n      return result;\n    } catch (error) {\n      console.error(`âŒ Erro na automaÃ§Ã£o: ${error.message}`);\n\n      result.status = \"FAILED\";\n      result.errors.push({\n        message: error.message,\n        stack: error.stack,\n      });\n\n      // Log de erro\n      this.auditLogger.logError({\n        automationId,\n        userId: request.userId,\n        errorType: error.constructor.name,\n        errorMessage: error.message,\n        errorStack: error.stack,\n        phase: result.steps[result.steps.length - 1]?.phase || \"UNKNOWN\",\n      });\n\n      return result;\n    }\n  }\n\n  /**\n   * Analisar comando do usuÃ¡rio\n   */\n  async analyzeCommand(command) {\n    // Aqui seria chamada uma IA para analisar o comando\n    // Por enquanto, anÃ¡lise simples\n\n    const keywords = command.toLowerCase().split(\" \");\n\n    let taskType = \"GENERAL\";\n    if (command.includes(\"componente\") || command.includes(\"component\")) taskType = \"COMPONENT\";\n    if (command.includes(\"funÃ§Ã£o\") || command.includes(\"function\")) taskType = \"FUNCTION\";\n    if (command.includes(\"teste\") || command.includes(\"test\")) taskType = \"TEST\";\n    if (command.includes(\"estilo\") || command.includes(\"style\")) taskType = \"STYLE\";\n    if (command.includes(\"documentaÃ§Ã£o\") || command.includes(\"documentation\"))\n      taskType = \"DOCUMENTATION\";\n    if (command.includes(\"refatorar\") || command.includes(\"refactor\")) taskType = \"REFACTOR\";\n\n    return {\n      command,\n      taskType,\n      keywords,\n      commitMessage: `feat: ${command.substring(0, 50)}`,\n      description: command,\n    };\n  }\n\n  /**\n   * Gerar cÃ³digo via IA\n   */\n  async generateCode(analysis, specialist, repositoryInfo) {\n    // Aqui seria chamada a IA (Gemini, GROQ, etc)\n    // Por enquanto, simulaÃ§Ã£o\n\n    console.log(`ðŸ¤– Gerando cÃ³digo com ${specialist}...`);\n\n    // Simular geraÃ§Ã£o de cÃ³digo\n    const files = [\n      {\n        path: `src/generated_${Date.now()}.js`,\n        content: `// Gerado automaticamente por ${specialist}\\n// Tarefa: ${analysis.description}\\n\\nexport default function generated() {\\n  // CÃ³digo gerado aqui\\n}\\n`,\n      },\n    ];\n\n    return {\n      files,\n      totalLines: files.reduce((sum, f) => sum + f.content.split(\"\\n\").length, 0),\n      specialist,\n    };\n  }\n\n  /**\n   * Validar cÃ³digo\n   */\n  async validateCode(files) {\n    console.log(`ðŸ” Validando ${files.length} arquivos...`);\n\n    const validation = await this.validator.validateFiles(files);\n\n    if (!validation.isValid) {\n      console.log(`âŒ ValidaÃ§Ã£o falhou!`);\n      return {\n        isValid: false,\n        severity: \"critical\",\n        errors: validation.details.flatMap((d) => d.errors),\n        warnings: validation.details.flatMap((d) => d.warnings),\n      };\n    }\n\n    console.log(`âœ… CÃ³digo validado com sucesso!`);\n    return {\n      isValid: true,\n      severity: \"none\",\n      errors: [],\n      warnings: validation.details.flatMap((d) => d.warnings),\n    };\n  }\n\n  /**\n   * Fazer commit + push\n   */\n  async commitAndPush(files, message, repositoryInfo, specialist) {\n    console.log(`ðŸ“ Fazendo commit + push...`);\n\n    if (!this.gitHub) {\n      throw new Error(\"GitHub nÃ£o inicializado\");\n    }\n\n    const result = await this.gitHub.commitAndPush(\n      repositoryInfo.owner,\n      repositoryInfo.repo,\n      files,\n      message,\n      repositoryInfo.branch || \"main\",\n      {\n        name: `${specialist} Bot`,\n        email: `${specialist.toLowerCase()}@rkmmax.com`,\n      }\n    );\n\n    console.log(`âœ… Commit realizado: ${result.commit.sha.substring(0, 7)}`);\n\n    return result;\n  }\n\n  /**\n   * Criar Pull Request\n   */\n  async createPullRequest(analysis, specialist, repositoryInfo) {\n    console.log(`ðŸ”€ Criando Pull Request...`);\n\n    if (!this.gitHub) {\n      throw new Error(\"GitHub nÃ£o inicializado\");\n    }\n\n    const branchName = `automation/${specialist.toLowerCase()}/${Date.now()}`;\n\n    const pr = await this.gitHub.createPullRequest(\n      repositoryInfo.owner,\n      repositoryInfo.repo,\n      `[${specialist}] ${analysis.commitMessage}`,\n      `AutomaÃ§Ã£o executada por ${specialist}\\n\\nTarefa: ${analysis.description}`,\n      branchName,\n      repositoryInfo.branch || \"main\"\n    );\n\n    console.log(`âœ… PR criado: ${pr.url}`);\n\n    return { pr };\n  }\n\n  /**\n   * Obter histÃ³rico de automaÃ§Ãµes\n   */\n  getAutomationHistory(userId, limit = 50) {\n    return this.auditLogger\n      .searchLogs({\n        type: \"AUTOMATION_REQUEST\",\n        userId,\n      })\n      .slice(-limit);\n  }\n\n  /**\n   * Obter estatÃ­sticas de automaÃ§Ã£o\n   */\n  getAutomationStats(userId) {\n    const logs = this.auditLogger.searchLogs({ userId });\n\n    const stats = {\n      totalAutomations: logs.length,\n      successfulAutomations: logs.filter((l) => l.status === \"SUCCESS\").length,\n      failedAutomations: logs.filter((l) => l.status === \"FAILED\").length,\n      blockedAutomations: logs.filter((l) => l.status === \"BLOCKED\").length,\n      byMode: {},\n      bySpecialist: {},\n    };\n\n    logs.forEach((log) => {\n      if (log.mode) {\n        stats.byMode[log.mode] = (stats.byMode[log.mode] || 0) + 1;\n      }\n      if (log.selectedSpecialist) {\n        stats.bySpecialist[log.selectedSpecialist] =\n          (stats.bySpecialist[log.selectedSpecialist] || 0) + 1;\n      }\n    });\n\n    return stats;\n  }\n}\n\nexport default AutomationEngine;\n"],"mappings":"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","ignoreList":[]}